<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¡”ç¾…å åœ - æ˜Ÿç©ºå åœ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
            background: linear-gradient(to bottom, #0a0e27 0%, #1a1a3e 50%, #2d1b4e 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* æ˜Ÿç©ºèƒŒæ™¯ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* æµæ˜Ÿæ•ˆæœ */
        .shooting-star {
            position: fixed;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
            animation: shoot 3s linear infinite;
            opacity: 0;
        }

        @keyframes shoot {
            0% {
                transform: translateX(0) translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-300px) translateY(300px);
                opacity: 0;
            }
        }

        /* ä¸»å®¹å™¨ */
        .container {
            position: relative;
            z-index: 2;
            max-width: 1100px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* é ­éƒ¨ */
        header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 1s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 3em;
            color: #fff;
            text-shadow: 0 0 20px rgba(147, 112, 219, 0.8),
                         0 0 40px rgba(147, 112, 219, 0.5);
            margin-bottom: 10px;
            letter-spacing: 5px;
        }

        .subtitle {
            color: #b8b8d4;
            font-size: 1.2em;
            letter-spacing: 3px;
        }

        /* å¡ç‰‡å®¹å™¨ */
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            animation: fadeIn 1s ease-out 0.3s both;
            margin-bottom: 30px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .spread-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .spread-card {
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .spread-card:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: #9370db;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(147, 112, 219, 0.3);
        }

        .spread-card.active {
            background: rgba(147, 112, 219, 0.2);
            border-color: #9370db;
            box-shadow: 0 0 20px rgba(147, 112, 219, 0.5);
        }

        .spread-card h3 {
            color: #fff;
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .spread-card p {
            color: #b8b8d4;
            font-size: 0.9em;
        }

        .form-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            color: #e0e0ff;
            font-size: 1.1em;
            margin-bottom: 10px;
            font-weight: 500;
        }

        textarea {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            font-size: 1em;
            transition: all 0.3s ease;
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        textarea:focus {
            outline: none;
            border-color: #9370db;
            box-shadow: 0 0 15px rgba(147, 112, 219, 0.5);
            background: rgba(255, 255, 255, 0.15);
        }

        textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        /* æŒ‰éˆ• */
        button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #9370db 0%, #8a2be2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 2px;
            margin-top: 20px;
            box-shadow: 0 5px 20px rgba(147, 112, 219, 0.4);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(147, 112, 219, 0.6);
        }

        button:active {
            transform: translateY(-1px);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ç‰Œé™£å€åŸŸ */
        .card-spread {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            margin: 40px 0;
            min-height: 300px;
        }

        .tarot-card {
            width: 120px;
            height: 200px;
            background: linear-gradient(135deg, #1a1a3e 0%, #2d1b4e 100%);
            border: 2px solid rgba(147, 112, 219, 0.5);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .tarot-card::before {
            content: 'ğŸŒŸ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            opacity: 0.3;
        }

        .tarot-card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 10px 30px rgba(147, 112, 219, 0.5);
            border-color: #9370db;
        }

        .tarot-card.flipped {
            background: linear-gradient(135deg, #fff 0%, #f0e6ff 100%);
            border-color: #9370db;
        }

        .tarot-card.flipped::before {
            display: none;
        }

        .card-content {
            display: none;
            padding: 15px;
            text-align: center;
            height: 100%;
            flex-direction: column;
            justify-content: center;
        }

        .tarot-card.flipped .card-content {
            display: flex;
        }

        .card-name {
            font-size: 0.9em;
            font-weight: bold;
            color: #2d1b4e;
            margin-bottom: 5px;
        }

        .card-number {
            font-size: 0.7em;
            color: #666;
        }

        .card-reversed {
            color: #dc143c;
            font-size: 0.7em;
            margin-top: 5px;
        }

        /* çµæœé¡¯ç¤ºå€åŸŸ */
        .result-section {
            margin-top: 40px;
            display: none;
        }

        .result-section.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .interpretation {
            color: #e0e0ff;
            line-height: 1.8;
            margin-top: 30px;
            padding: 30px;
            background: rgba(147, 112, 219, 0.1);
            border: 1px solid rgba(147, 112, 219, 0.3);
            border-radius: 15px;
        }

        .interpretation h3 {
            color: #9370db;
            margin-bottom: 20px;
            font-size: 1.5em;
            text-align: center;
        }

        .card-interpretation {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #9370db;
        }

        .card-interpretation h4 {
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .card-interpretation p {
            margin-bottom: 10px;
        }

        .card-interpretation .position {
            color: #9370db;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .overall-reading {
            background: rgba(255, 215, 0, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .overall-reading h4 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .card {
                padding: 25px;
            }

            .tarot-card {
                width: 100px;
                height: 166px;
            }

            .card-name {
                font-size: 0.75em;
            }
        }

        /* è¿”å›é¦–é æŒ‰éˆ• */
        .home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            text-decoration: none;
            transition: all 0.3s ease;
            z-index: 1000;
            width: auto;
            margin: 0;
            display: inline-block;
            font-size: 1em;
        }

        .home-button:hover {
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 5px 15px rgba(147, 112, 219, 0.4);
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }

        /* æ´—ç‰Œå‹•ç•« */
        @keyframes shuffle {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px) rotate(-5deg); }
            75% { transform: translateX(10px) rotate(5deg); }
        }

        .shuffling {
            animation: shuffle 0.3s ease-in-out infinite;
        }
    </style>
<link rel="stylesheet" href="../mobile-ui.css">
</head>
<body>
    <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
    <div class="stars" id="stars"></div>
    
    <!-- è¿”å›é¦–é æŒ‰éˆ• -->
    <a href="../index.html" class="home-button">ğŸ  é¦–é </a>

    <div class="container">
        <header>
            <h1>ğŸ”® å¡”ç¾…å åœ ğŸ”®</h1>
            <p class="subtitle">è†è½å…§å¿ƒçš„è²éŸ³ æ¢ç´¢å‘½é‹çš„æŒ‡å¼•</p>
        </header>

        <div class="card">
            <h2 style="color: #9370db; margin-bottom: 30px; text-align: center;">é¸æ“‡ç‰Œé™£</h2>
            
            <div class="spread-selector">
                <div class="spread-card active" data-spread="single">
                    <h3>ğŸŒŸ å–®ç‰Œå åœ</h3>
                    <p>ç°¡å–®ç›´æ¥ï¼Œé©åˆæ—¥å¸¸æŒ‡å¼•</p>
                </div>
                <div class="spread-card" data-spread="triple">
                    <h3>ğŸ”± ä¸‰ç‰Œé™£</h3>
                    <p>éå»ã€ç¾åœ¨ã€æœªä¾†</p>
                </div>
                <div class="spread-card" data-spread="celtic">
                    <h3>âœ¨ å‡±çˆ¾ç‰¹åå­—</h3>
                    <p>æœ€ç¶“å…¸çš„ç‰Œé™£ï¼Œå…¨é¢è§£æ</p>
                </div>
            </div>

            <div class="form-group">
                <label for="question">æ‚¨æƒ³å•çš„å•é¡Œ</label>
                <textarea id="question" placeholder="è«‹è¼¸å…¥æ‚¨æƒ³å åœçš„å•é¡Œï¼Œè¶Šå…·é«”è¶Šå¥½..."></textarea>
            </div>

            <button onclick="startDivination()" id="startBtn">ğŸ´ é–‹å§‹æŠ½ç‰Œ</button>

            <div class="card-spread" id="cardSpread"></div>

            <div class="result-section" id="resultSection">
                <div class="interpretation" id="interpretation"></div>
            </div>
        </div>
    </div>

    <script>
        // ç”Ÿæˆæ˜Ÿç©º
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const numberOfStars = 200;

            for (let i = 0; i < numberOfStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }

            for (let i = 0; i < 3; i++) {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                shootingStar.style.left = Math.random() * 100 + '%';
                shootingStar.style.top = Math.random() * 50 + '%';
                shootingStar.style.animationDelay = Math.random() * 5 + 's';
                starsContainer.appendChild(shootingStar);
            }
        }

        // åˆ‡æ›ç‰Œé™£
        let currentSpread = 'single';
        document.querySelectorAll('.spread-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.spread-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                currentSpread = this.dataset.spread;
                
                // æ¸…ç©ºä¹‹å‰çš„çµæœ
                document.getElementById('cardSpread').innerHTML = '';
                document.getElementById('resultSection').classList.remove('show');
            });
        });

        // å¡”ç¾…ç‰Œæ•¸æ“šï¼ˆå¤§é˜¿çˆ¾å…‹é‚£22å¼µï¼‰
        const tarotCards = [
            { number: 0, name: 'æ„šè€…', upright: 'æ–°çš„é–‹å§‹ã€å†’éšªã€å¤©çœŸã€è‡ªç”±', reversed: 'é­¯è½ã€æ„šè ¢ã€ç¼ºä¹æ–¹å‘', keywords: 'ç´”çœŸã€ä¿¡ä»»ã€å†’éšªç²¾ç¥' },
            { number: 1, name: 'é­”è¡“å¸«', upright: 'å‰µé€ åŠ›ã€æŠ€èƒ½ã€æ„å¿—åŠ›ã€æºé€š', reversed: 'æ“ç¸±ã€æ¬ºé¨™ã€æŠ€èƒ½æ¿«ç”¨', keywords: 'å‰µé€ ã€é¡¯åŒ–ã€æ‰èƒ½' },
            { number: 2, name: 'å¥³ç¥­å¸', upright: 'ç›´è¦ºã€ç¥ç§˜ã€æ½›æ„è­˜ã€æ™ºæ…§', reversed: 'ç§˜å¯†ã€éš±è—ã€ç¼ºä¹å…§åœ¨è²éŸ³', keywords: 'ç›´è¦ºã€ç¥ç§˜ã€å…§åœ¨çŸ¥è­˜' },
            { number: 3, name: 'çš‡å', upright: 'è±é¥’ã€æ¯æ€§ã€è‡ªç„¶ã€æ„Ÿå®˜', reversed: 'ä¾è³´ã€ç©ºè™›ã€éåº¦ä¿è­·', keywords: 'è±ç››ã€æ»‹é¤Šã€å‰µé€ åŠ›' },
            { number: 4, name: 'çš‡å¸', upright: 'æ¬Šå¨ã€çµæ§‹ã€æŒæ§ã€çˆ¶æ€§', reversed: 'å°ˆåˆ¶ã€åƒµåŒ–ã€æ§åˆ¶æ¬²', keywords: 'æ¬Šå¨ã€ç©©å®šã€ä¿è­·' },
            { number: 5, name: 'æ•™çš‡', upright: 'å‚³çµ±ã€æ•™è‚²ã€ä¿¡ä»°ã€å°å¸«', reversed: 'åå›ã€æ–°æ–¹æ³•ã€å€‹äººä¿¡å¿µ', keywords: 'å‚³çµ±ã€æŒ‡å°ã€ç²¾ç¥æ™ºæ…§' },
            { number: 6, name: 'æˆ€äºº', upright: 'æ„›æƒ…ã€å’Œè«§ã€é—œä¿‚ã€é¸æ“‡', reversed: 'å¤±è¡¡ã€æºé€šä¸è‰¯ã€èª˜æƒ‘', keywords: 'æ„›ã€å’Œè«§ã€é¸æ“‡' },
            { number: 7, name: 'æˆ°è»Š', upright: 'æ„å¿—åŠ›ã€æ±ºå¿ƒã€å‹åˆ©ã€æ§åˆ¶', reversed: 'å¤±æ§ã€ä¾µç•¥ã€ç¼ºä¹æ–¹å‘', keywords: 'æ„å¿—ã€æ±ºå¿ƒã€å‹åˆ©' },
            { number: 8, name: 'åŠ›é‡', upright: 'å‹‡æ°£ã€è€å¿ƒã€å…§åœ¨åŠ›é‡ã€åŒæƒ…', reversed: 'è»Ÿå¼±ã€è‡ªæˆ‘æ‡·ç–‘ã€ç¼ºä¹è‡ªä¿¡', keywords: 'å‹‡æ°£ã€è€å¿ƒã€æ…ˆæ‚²' },
            { number: 9, name: 'éš±è€…', upright: 'å…§çœã€å°‹æ‰¾ã€å­¤ç¨ã€æŒ‡å¼•', reversed: 'å­¤ç«‹ã€é€ƒé¿ã€è¿·å¤±', keywords: 'å…§çœã€å°‹æ±‚çœŸç†ã€æ™ºæ…§' },
            { number: 10, name: 'å‘½é‹ä¹‹è¼ª', upright: 'æ”¹è®Šã€å¾ªç’°ã€å‘½é‹ã€å¥½é‹', reversed: 'å£é‹ã€æŠ—æ‹’æ”¹è®Šã€å¤±æ§', keywords: 'å‘½é‹ã€æ”¹è®Šã€å¾ªç’°' },
            { number: 11, name: 'æ­£ç¾©', upright: 'å…¬å¹³ã€çœŸç›¸ã€æ³•å¾‹ã€å› æœ', reversed: 'ä¸å…¬ã€è¬Šè¨€ã€é€ƒé¿è²¬ä»»', keywords: 'å…¬æ­£ã€çœŸç†ã€å¹³è¡¡' },
            { number: 12, name: 'å€’åŠäºº', upright: 'çŠ§ç‰²ã€æ–°è§€é»ã€ç­‰å¾…ã€æ”¾ä¸‹', reversed: 'æ‹–å»¶ã€æŠ—æ‹’ã€å¾’å‹çŠ§ç‰²', keywords: 'çŠ§ç‰²ã€é “æ‚Ÿã€æ–°è¦–è§’' },
            { number: 13, name: 'æ­»ç¥', upright: 'çµæŸã€è½‰è®Šã€éæ¸¡ã€é‡‹æ”¾', reversed: 'æŠ—æ‹’æ”¹è®Šã€åœæ»¯ã€ææ‡¼', keywords: 'è½‰è®Šã€çµæŸã€æ–°ç”Ÿ' },
            { number: 14, name: 'ç¯€åˆ¶', upright: 'å¹³è¡¡ã€è€å¿ƒã€ç¯€åˆ¶ã€å’Œè«§', reversed: 'ä¸å¹³è¡¡ã€éåº¦ã€ç¼ºä¹é•·é çœ¼å…‰', keywords: 'å¹³è¡¡ã€èª¿å’Œã€è€å¿ƒ' },
            { number: 15, name: 'æƒ¡é­”', upright: 'æŸç¸›ã€ç‰©è³ªä¸»ç¾©ã€èª˜æƒ‘ã€åŸ·è‘—', reversed: 'é‡‹æ”¾ã€è¦ºé†’ã€è„«é›¢æŸç¸›', keywords: 'æŸç¸›ã€æ…¾æœ›ã€é™°å½±' },
            { number: 16, name: 'é«˜å¡”', upright: 'çªç„¶æ”¹è®Šã€å‹•ç›ªã€å•Ÿç¤ºã€è¦ºé†’', reversed: 'é€ƒé¿ç½é›£ã€ææ‡¼æ”¹è®Šã€å»¶é²', keywords: 'çªè®Šã€å´©æ½°ã€é “æ‚Ÿ' },
            { number: 17, name: 'æ˜Ÿæ˜Ÿ', upright: 'å¸Œæœ›ã€ä¿¡ä»°ã€ç›®æ¨™ã€éˆæ„Ÿ', reversed: 'çµ•æœ›ã€ç¼ºä¹ä¿¡å¿µã€è¿·å¤±æ–¹å‘', keywords: 'å¸Œæœ›ã€éˆæ„Ÿã€å¯§éœ' },
            { number: 18, name: 'æœˆäº®', upright: 'å¹»è¦ºã€ææ‡¼ã€ç„¦æ…®ã€æ½›æ„è­˜', reversed: 'é‡‹æ”¾ææ‡¼ã€å£“æŠ‘æƒ…ç·’ã€å…§åœ¨æ··äº‚', keywords: 'å¹»è¦ºã€ç›´è¦ºã€ææ‡¼' },
            { number: 19, name: 'å¤ªé™½', upright: 'æˆåŠŸã€æ´»åŠ›ã€å–œæ‚…ã€ç©æ¥µ', reversed: 'éåº¦æ¨‚è§€ã€å¤±æ•—ã€ç¼ºä¹ç†±æƒ…', keywords: 'æˆåŠŸã€å–œæ‚…ã€æ´»åŠ›' },
            { number: 20, name: 'å¯©åˆ¤', upright: 'è¦ºé†’ã€æ›´æ–°ã€æ±ºå®šã€å¯¬æ•', reversed: 'è‡ªæˆ‘æ‡·ç–‘ã€æ‹’çµ•åçœã€å…§ç–š', keywords: 'é‡ç”Ÿã€è¦ºé†’ã€åˆ¤æ–·' },
            { number: 21, name: 'ä¸–ç•Œ', upright: 'å®Œæˆã€æˆå°±ã€æ—…è¡Œã€å®Œæ•´', reversed: 'æœªå®Œæˆã€å»¶é²ã€ç¼ºä¹é–‰åˆ', keywords: 'å®Œæˆã€æˆå°±ã€æ•´åˆ' }
        ];

        // æ´—ç‰Œ
        function shuffleDeck() {
            const shuffled = [...tarotCards];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // æŠ½ç‰Œ
        let drawnCards = [];
        let flippedCount = 0;

        function startDivination() {
            const question = document.getElementById('question').value;
            if (!question.trim()) {
                alert('è«‹è¼¸å…¥æ‚¨æƒ³å åœçš„å•é¡Œï¼');
                return;
            }

            // é‡ç½®
            drawnCards = [];
            flippedCount = 0;
            document.getElementById('resultSection').classList.remove('show');
            document.getElementById('startBtn').disabled = true;

            // æ´—ç‰Œ
            const shuffledDeck = shuffleDeck();
            
            // æ ¹æ“šç‰Œé™£æ±ºå®šæŠ½ç‰Œæ•¸é‡
            let cardCount = 1;
            if (currentSpread === 'triple') cardCount = 3;
            if (currentSpread === 'celtic') cardCount = 10;

            // æŠ½ç‰Œ
            for (let i = 0; i < cardCount; i++) {
                const card = shuffledDeck[i];
                const isReversed = Math.random() > 0.5;
                drawnCards.push({ ...card, reversed: isReversed, position: i });
            }

            // é¡¯ç¤ºç‰ŒèƒŒ
            displayCardBacks();
        }

        // é¡¯ç¤ºç‰ŒèƒŒ
        function displayCardBacks() {
            const spreadContainer = document.getElementById('cardSpread');
            spreadContainer.innerHTML = '';

            drawnCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'tarot-card';
                cardElement.dataset.index = index;
                cardElement.onclick = () => flipCard(index);
                spreadContainer.appendChild(cardElement);
            });

            // æç¤ºç”¨æˆ¶ç¿»ç‰Œ
            setTimeout(() => {
                alert('è«‹é»æ“Šç‰ŒèƒŒç¿»é–‹å¡”ç¾…ç‰Œï¼');
            }, 500);
        }

        // ç¿»ç‰Œ
        function flipCard(index) {
            const card = drawnCards[index];
            const cardElement = document.querySelectorAll('.tarot-card')[index];
            
            if (cardElement.classList.contains('flipped')) return;

            cardElement.classList.add('flipped');
            cardElement.onclick = null;

            const content = document.createElement('div');
            content.className = 'card-content';
            content.innerHTML = `
                <div class="card-number">${card.number}</div>
                <div class="card-name">${card.name}</div>
                ${card.reversed ? '<div class="card-reversed">é€†ä½</div>' : ''}
            `;
            cardElement.appendChild(content);

            flippedCount++;

            if (flippedCount === drawnCards.length) {
                setTimeout(() => {
                    showInterpretation();
                }, 500);
            }
        }

        // é¡¯ç¤ºè§£è®€
        function showInterpretation() {
            const question = document.getElementById('question').value;
            const interpretation = document.getElementById('interpretation');
            
            let html = `<h3>ğŸ”® å¡”ç¾…è§£è®€</h3>`;
            html += `<p style="text-align: center; color: #b8b8d4; margin-bottom: 30px;">å•é¡Œï¼š${question}</p>`;

            // æ ¹æ“šç‰Œé™£é¡å‹é¡¯ç¤ºä¸åŒçš„ä½ç½®èªªæ˜
            const positions = getPositions();

            drawnCards.forEach((card, index) => {
                const meaning = card.reversed ? card.reversed : card.upright;
                const positionName = positions[index];
                
                html += `
                    <div class="card-interpretation">
                        <div class="position">${positionName}</div>
                        <h4>${card.name} ${card.reversed ? '(é€†ä½)' : '(æ­£ä½)'}</h4>
                        <p><strong>é—œéµå­—ï¼š</strong>${card.keywords}</p>
                        <p><strong>ç‰Œæ„ï¼š</strong>${meaning}</p>
                        <p><strong>è§£è®€ï¼š</strong>${getDetailedInterpretation(card, positionName)}</p>
                    </div>
                `;
            });

            // ç¶œåˆè§£è®€
            html += `
                <div class="overall-reading">
                    <h4>âœ¨ ç¶œåˆå»ºè­°</h4>
                    <p>${getOverallReading()}</p>
                </div>
            `;

            interpretation.innerHTML = html;
            document.getElementById('resultSection').classList.add('show');
            document.getElementById('startBtn').disabled = false;
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }

        // ç²å–ä½ç½®åç¨±
        function getPositions() {
            if (currentSpread === 'single') {
                return ['ç•¶å‰æŒ‡å¼•'];
            } else if (currentSpread === 'triple') {
                return ['éå»', 'ç¾åœ¨', 'æœªä¾†'];
            } else if (currentSpread === 'celtic') {
                return [
                    'ç¾æ³', 'æŒ‘æˆ°', 'éå»', 'æœªä¾†',
                    'ç›®æ¨™', 'æ½›æ„è­˜', 'å»ºè­°', 'å¤–åœ¨å½±éŸ¿',
                    'å¸Œæœ›èˆ‡ææ‡¼', 'æœ€çµ‚çµæœ'
                ];
            }
        }

        // ç²å–è©³ç´°è§£è®€
        function getDetailedInterpretation(card, position) {
            const interpretations = {
                'æ„šè€…': { 
                    upright: 'é€™æ˜¯ä¸€å€‹æ–°é–‹å§‹çš„æ™‚åˆ»ï¼Œå¸¶è‘—ç´”çœŸå’Œä¿¡ä»»è¸ä¸Šæ–°çš„æ—…ç¨‹ã€‚ä¸è¦å®³æ€•æœªçŸ¥ï¼Œä¿æŒé–‹æ”¾çš„å¿ƒæ…‹ã€‚',
                    reversed: 'å¯èƒ½éæ–¼è¡å‹•æˆ–ç¼ºä¹è¨ˆåŠƒã€‚å»ºè­°ä¸‰æ€è€Œå¾Œè¡Œï¼Œä¸è¦è¢«è¡¨é¢çš„èª˜æƒ‘æ‰€è¿·æƒ‘ã€‚'
                },
                'é­”è¡“å¸«': {
                    upright: 'ä½ æ“æœ‰å¯¦ç¾ç›®æ¨™æ‰€éœ€çš„ä¸€åˆ‡è³‡æºå’Œèƒ½åŠ›ã€‚ç¾åœ¨æ˜¯æ¡å–è¡Œå‹•ã€ç™¼æ®å‰µé€ åŠ›çš„æœ€ä½³æ™‚æ©Ÿã€‚',
                    reversed: 'å¯èƒ½æœ‰äººåœ¨æ“ç¸±å±€å‹¢ï¼Œæˆ–è€…ä½ çš„æ‰èƒ½æ²’æœ‰å¾—åˆ°å……åˆ†ç™¼æ®ã€‚è­¦æƒ•æ¬ºé¨™å’Œè‡ªæ¬ºã€‚'
                },
                'å¥³ç¥­å¸': {
                    upright: 'ç›¸ä¿¡ä½ çš„ç›´è¦ºå’Œå…§åœ¨æ™ºæ…§ã€‚ç­”æ¡ˆå¯èƒ½é‚„æœªé¡¯ç¾ï¼Œéœ€è¦è€å¿ƒç­‰å¾…å’Œå…§çœã€‚',
                    reversed: 'ä½ å¯èƒ½å¿½è¦–äº†å…§åœ¨çš„è²éŸ³ï¼Œæˆ–æœ‰é‡è¦ä¿¡æ¯è¢«éš±è—ã€‚å‚¾è½ä½ çš„ç›´è¦ºã€‚'
                },
                'çš‡å': {
                    upright: 'è±ç››å’Œæ»‹é¤Šçš„æ™‚æœŸã€‚å‰µé€ åŠ›æ—ºç››ï¼Œé©åˆåŸ¹è‚²æ–°è¨ˆåŠƒæˆ–ç…§é¡§ä»–äººã€‚',
                    reversed: 'å¯èƒ½éåº¦ä¾è³´ä»–äººæˆ–å¿½è¦–è‡ªæˆ‘ç…§é¡§ã€‚éœ€è¦åœ¨çµ¦äºˆå’Œæ¥å—ä¹‹é–“æ‰¾åˆ°å¹³è¡¡ã€‚'
                },
                'çš‡å¸': {
                    upright: 'å»ºç«‹ç§©åºå’Œçµæ§‹çš„æ™‚å€™ã€‚ç”¨ç†æ€§å’Œæ¬Šå¨ä¾†è™•ç†äº‹å‹™ï¼Œä½†ä¸è¦éæ–¼åƒµåŒ–ã€‚',
                    reversed: 'å¯èƒ½é¢è‡¨æ§åˆ¶æ¬²éå¼·æˆ–æ¬Šå¨è¢«æŒ‘æˆ°çš„æƒ…æ³ã€‚å­¸æœƒé©åº¦æ”¾æ¬Šå’Œéˆæ´»æ‡‰å°ã€‚'
                },
                'æ•™çš‡': {
                    upright: 'å°‹æ±‚æ™ºæ…§çš„æŒ‡å¼•æˆ–éµå¾ªå‚³çµ±åƒ¹å€¼ã€‚å¯èƒ½éœ€è¦å°å¸«çš„å¹«åŠ©æˆ–å …å®ˆä¿¡å¿µã€‚',
                    reversed: 'è³ªç–‘å‚³çµ±æˆ–å°‹æ‰¾è‡ªå·±çš„é“è·¯ã€‚ä¸è¦ç›²å¾ï¼Œæ‰¾åˆ°å±¬æ–¼è‡ªå·±çš„çœŸç†ã€‚'
                },
                'æˆ€äºº': {
                    upright: 'é‡è¦çš„é¸æ“‡æˆ–é—œä¿‚çš„å’Œè«§ã€‚è½å¾å…§å¿ƒï¼Œåšå‡ºèˆ‡åƒ¹å€¼è§€ä¸€è‡´çš„æ±ºå®šã€‚',
                    reversed: 'é—œä¿‚ä¸­çš„ä¸å’Œè«§æˆ–è‰±é›£çš„é¸æ“‡ã€‚éœ€è¦æ›´å¥½çš„æºé€šå’Œè‡ªæˆ‘åçœã€‚'
                },
                'æˆ°è»Š': {
                    upright: 'æ†‘è—‰æ„å¿—åŠ›å’Œæ±ºå¿ƒå…‹æœéšœç¤™ã€‚ä¿æŒå°ˆæ³¨ï¼Œå‹åˆ©åœ¨æœ›ã€‚',
                    reversed: 'å¯èƒ½å¤±å»æ§åˆ¶æˆ–æ–¹å‘ä¸æ˜ã€‚éœ€è¦é‡æ–°è©•ä¼°ç›®æ¨™ï¼Œé¿å…ç›²ç›®è¡å‹•ã€‚'
                },
                'åŠ›é‡': {
                    upright: 'ç”¨æº«æŸ”å’Œè€å¿ƒè€Œéè »åŠ›ä¾†è™•ç†å•é¡Œã€‚å…§åœ¨åŠ›é‡æ¯”å¤–åœ¨å¼·å‹¢æ›´æœ‰åŠ›é‡ã€‚',
                    reversed: 'å¯èƒ½ç¼ºä¹è‡ªä¿¡æˆ–éæ–¼è»Ÿå¼±ã€‚éœ€è¦æ‰¾å›å…§åœ¨çš„å‹‡æ°£å’ŒåŠ›é‡ã€‚'
                },
                'éš±è€…': {
                    upright: 'éœ€è¦ç¨è™•å’Œå…§çœçš„æ™‚æœŸã€‚å°‹æ‰¾å…§åœ¨çš„ç­”æ¡ˆå’Œæ™ºæ…§æŒ‡å¼•ã€‚',
                    reversed: 'å¯èƒ½éåº¦å­¤ç«‹æˆ–é€ƒé¿ç¾å¯¦ã€‚é©åº¦çš„ç¤¾äº¤å’Œå¤–åœ¨é€£çµä¹Ÿå¾ˆé‡è¦ã€‚'
                },
                'å‘½é‹ä¹‹è¼ª': {
                    upright: 'å‘½é‹çš„è½‰æŠ˜é»ã€‚æ¥å—æ”¹è®Šï¼Œé †æ‡‰ç”Ÿå‘½çš„å¾ªç’°ã€‚å¥½é‹å³å°‡åˆ°ä¾†ã€‚',
                    reversed: 'å¯èƒ½é­é‡æŒ«æŠ˜æˆ–æŠ—æ‹’å¿…è¦çš„æ”¹è®Šã€‚å­¸æœƒæ¥å—ç„¡æ³•æ§åˆ¶çš„äº‹ç‰©ã€‚'
                },
                'æ­£ç¾©': {
                    upright: 'å…¬å¹³çš„åˆ¤æ±ºå’Œå› æœå ±æ‡‰ã€‚çœŸç›¸å°‡è¢«æ­ç¤ºï¼Œæ­£ç¾©æœƒå¾—åˆ°ä¼¸å¼µã€‚',
                    reversed: 'å¯èƒ½é¢è‡¨ä¸å…¬æˆ–é€ƒé¿è²¬ä»»ã€‚éœ€è¦å°è‡ªå·±çš„è¡Œç‚ºè² è²¬ä¸¦å°‹æ±‚å¹³è¡¡ã€‚'
                },
                'å€’åŠäºº': {
                    upright: 'æš«æ™‚çš„çŠ§ç‰²æœƒå¸¶ä¾†æ–°çš„è¦–è§’ã€‚æ”¾ä¸‹åŸ·è‘—ï¼Œå¾ä¸åŒè§’åº¦çœ‹å•é¡Œã€‚',
                    reversed: 'å¾’å‹çš„çŠ§ç‰²æˆ–æ‹’çµ•æ”¹è®Šè¦–è§’ã€‚å¯èƒ½éœ€è¦é‡æ–°è©•ä¼°ä»€éº¼å€¼å¾—å …æŒã€‚'
                },
                'æ­»ç¥': {
                    upright: 'å¿…è¦çš„çµæŸç‚ºæ–°çš„é–‹å§‹é‹ªè·¯ã€‚æ”¾ä¸‹éå»ï¼Œæ“æŠ±è½‰è®Šã€‚',
                    reversed: 'æŠ—æ‹’æ”¹è®Šæˆ–å®³æ€•æ”¾æ‰‹ã€‚ä½†è½‰è®Šæ˜¯ä¸å¯é¿å…çš„ï¼Œæ¥å—å®ƒæ‰èƒ½å‰é€²ã€‚'
                },
                'ç¯€åˆ¶': {
                    upright: 'å¹³è¡¡å’Œè€å¿ƒæ˜¯é—œéµã€‚æ•´åˆå°ç«‹é¢ï¼Œæ‰¾åˆ°ä¸­åº¸ä¹‹é“ã€‚',
                    reversed: 'ç”Ÿæ´»å¤±è¡¡æˆ–éåº¦æ”¾ç¸±ã€‚éœ€è¦æ¢å¾©ç¯€åˆ¶å’Œå’Œè«§ã€‚'
                },
                'æƒ¡é­”': {
                    upright: 'è­¦æƒ•æŸç¸›å’Œèª˜æƒ‘ã€‚ä½ å¯èƒ½è¢«ç‰©è³ªæ¬²æœ›æˆ–ä¸å¥åº·çš„é—œä¿‚æ‰€å›°ã€‚',
                    reversed: 'å¾æŸç¸›ä¸­è§£è„«çš„æ©Ÿæœƒã€‚èªè­˜åˆ°ä½ æ“æœ‰è‡ªç”±é¸æ“‡çš„åŠ›é‡ã€‚'
                },
                'é«˜å¡”': {
                    upright: 'çªç„¶çš„åŠ‡è®Šæ‰“ç ´èˆŠæœ‰çµæ§‹ã€‚é›–ç„¶è‰±é›£ï¼Œä½†é€™æ˜¯å¿…è¦çš„æ¸…ç†å’Œé‡å»ºã€‚',
                    reversed: 'é€ƒé¿å¿…è¦çš„æ”¹è®Šæˆ–å»¶é²ç½é›£ã€‚é¢å°ç¾å¯¦æ‰èƒ½çœŸæ­£é‡å»ºã€‚'
                },
                'æ˜Ÿæ˜Ÿ': {
                    upright: 'å¸Œæœ›å’Œç™‚ç™’çš„æ™‚æœŸã€‚ä¿æŒä¿¡å¿µï¼Œä½ çš„é¡˜æœ›æœƒå¯¦ç¾ã€‚',
                    reversed: 'å¤±å»ä¿¡å¿ƒæˆ–æ„Ÿåˆ°çµ•æœ›ã€‚é‡æ–°é€£æ¥å…§åœ¨çš„å¸Œæœ›ä¹‹å…‰ã€‚'
                },
                'æœˆäº®': {
                    upright: 'å¹»è¦ºå’Œä¸ç¢ºå®šæ€§ã€‚ç›¸ä¿¡ç›´è¦ºï¼Œä½†è¦è­¦æƒ•ææ‡¼å’Œå¹»æƒ³ã€‚',
                    reversed: 'é€æ¼¸é‡‹æ”¾ææ‡¼å’Œç„¦æ…®ã€‚çœŸç›¸é–‹å§‹æµ®ç¾ï¼Œæ··äº‚å°‡è¢«æ¾„æ¸…ã€‚'
                },
                'å¤ªé™½': {
                    upright: 'æˆåŠŸã€å–œæ‚…å’Œæ´»åŠ›å……æ²›çš„æ™‚æœŸã€‚äº«å—ç”Ÿå‘½çš„ç¾å¥½ï¼Œåˆ†äº«ä½ çš„å…‰èŠ’ã€‚',
                    reversed: 'æš«æ™‚çš„ä½è¿·æˆ–éåº¦æ¨‚è§€ã€‚ä¿æŒç¾å¯¦çš„æ…‹åº¦ï¼Œé™½å…‰çµ‚æœƒå†ç¾ã€‚'
                },
                'å¯©åˆ¤': {
                    upright: 'è¦ºé†’å’Œé‡ç”Ÿçš„æ™‚åˆ»ã€‚å°éå»åšå‡ºåˆ¤æ–·ï¼Œæº–å‚™è¿æ¥æ–°ç”Ÿã€‚',
                    reversed: 'æ‹’çµ•åçœæˆ–é€ƒé¿è²¬ä»»ã€‚éœ€è¦å¯¬æ•è‡ªå·±å’Œä»–äººï¼Œæ‰èƒ½å‰é€²ã€‚'
                },
                'ä¸–ç•Œ': {
                    upright: 'åœ“æ»¿çš„å®Œæˆå’Œæˆå°±ã€‚ä¸€å€‹é€±æœŸçµæŸï¼Œæ–°çš„æ—…ç¨‹å³å°‡é–‹å§‹ã€‚',
                    reversed: 'æœªå®Œæˆæˆ–ç¼ºä¹é–‰åˆæ„Ÿã€‚å¯èƒ½é‚„éœ€è¦æ›´å¤šåŠªåŠ›æ‰èƒ½é”æˆç›®æ¨™ã€‚'
                }
            };

            const cardInterp = interpretations[card.name];
            if (!cardInterp) return 'æ­¤ç‰Œæ­£å¼•å°ä½ æ³¨æ„ç›¸é—œçš„èƒ½é‡å’Œä¸»é¡Œã€‚';
            
            return card.reversed ? cardInterp.reversed : cardInterp.upright;
        }

        // ç²å–ç¶œåˆè§£è®€
        function getOverallReading() {
            const hasReversed = drawnCards.some(c => c.reversed);
            const majorCards = drawnCards.filter(c => [0, 10, 13, 16].includes(c.number));
            
            let reading = '';

            if (currentSpread === 'single') {
                reading = `é€™å¼µç‰Œç‚ºæ‚¨ç•¶å‰çš„å•é¡Œæä¾›äº†ç›´æ¥çš„æŒ‡å¼•ã€‚è«‹ä»”ç´°æ€è€ƒç‰Œé¢çš„è¨Šæ¯ï¼Œå®ƒæ­£æ˜¯æ‚¨æ­¤åˆ»æœ€éœ€è¦çš„å»ºè­°ã€‚`;
            } else if (currentSpread === 'triple') {
                reading = `å¾éå»åˆ°æœªä¾†çš„æ™‚é–“ç·šé¡¯ç¤ºäº†äº‹æƒ…çš„ç™¼å±•è»Œè·¡ã€‚éå»çš„ç¶“é©—å½±éŸ¿è‘—ç¾åœ¨ï¼Œè€Œç¾åœ¨çš„é¸æ“‡å°‡å¡‘é€ æœªä¾†ã€‚`;
            } else {
                reading = `å‡±çˆ¾ç‰¹åå­—ç‰Œé™£ç‚ºæ‚¨å±•ç¾äº†å•é¡Œçš„å…¨è²Œï¼Œå¾å…§åœ¨åˆ°å¤–åœ¨ï¼Œå¾éå»åˆ°æœªä¾†ã€‚æ¯å¼µç‰Œéƒ½åœ¨ç‚ºæ•´é«”æ•…äº‹å¢æ·»ç´°ç¯€ã€‚`;
            }

            if (hasReversed) {
                reading += ` å‡ºç¾é€†ä½ç‰Œæé†’æ‚¨æ³¨æ„èƒ½é‡çš„é˜»å¡æˆ–éœ€è¦èª¿æ•´çš„æ–¹é¢ã€‚`;
            }

            if (majorCards.length > 0) {
                reading += ` å¤§é˜¿çˆ¾å…‹é‚£ç‰Œçš„å‡ºç¾è¡¨ç¤ºé€™äº›æ˜¯ç”Ÿå‘½ä¸­çš„é‡è¦èª²é¡Œï¼Œå€¼å¾—æ·±å…¥æ€è€ƒã€‚`;
            }

            reading += ` è¨˜ä½ï¼Œå¡”ç¾…ç‰Œæ˜¯ä¸€é¢é¡å­ï¼Œåæ˜ çš„æ˜¯æ‚¨å…§åœ¨çš„æ™ºæ…§ã€‚æœ€çµ‚çš„æ±ºå®šæ¬Šå§‹çµ‚åœ¨æ‚¨æ‰‹ä¸­ã€‚`;

            return reading;
        }

        // é é¢åŠ è¼‰æ™‚åˆå§‹åŒ–
        window.addEventListener('load', function() {
            createStars();
        });
    </script>
<script src="../mobile-nav.js"></script>
</body>
</html>
