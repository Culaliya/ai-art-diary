<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¢…èŠ±æ˜“æ•¸ - æ˜Ÿç©ºå åœ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft JhengHei', 'PingFang TC', sans-serif;
            background: linear-gradient(to bottom, #0a0e27 0%, #1a1a3e 50%, #2d1b4e 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* æ˜Ÿç©ºèƒŒæ™¯ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* æµæ˜Ÿæ•ˆæœ */
        .shooting-star {
            position: fixed;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px 2px rgba(255, 255, 255, 0.8);
            animation: shoot 3s linear infinite;
            opacity: 0;
        }

        @keyframes shoot {
            0% {
                transform: translateX(0) translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-300px) translateY(300px);
                opacity: 0;
            }
        }

        /* ä¸»å®¹å™¨ */
        .container {
            position: relative;
            z-index: 2;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* é ­éƒ¨ */
        header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 1s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 3em;
            color: #fff;
            text-shadow: 0 0 20px rgba(255, 105, 180, 0.8),
                         0 0 40px rgba(255, 105, 180, 0.5);
            margin-bottom: 10px;
            letter-spacing: 5px;
        }

        .subtitle {
            color: #b8b8d4;
            font-size: 1.2em;
            letter-spacing: 3px;
        }

        /* å¡ç‰‡å®¹å™¨ */
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            animation: fadeIn 1s ease-out 0.3s both;
            margin-bottom: 30px;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .method-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .method-card {
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .method-card:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: #ff69b4;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3);
        }

        .method-card.active {
            background: rgba(255, 105, 180, 0.2);
            border-color: #ff69b4;
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
        }

        .method-card h3 {
            color: #fff;
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .method-card p {
            color: #b8b8d4;
            font-size: 0.9em;
        }

        .form-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            color: #e0e0ff;
            font-size: 1.1em;
            margin-bottom: 10px;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        select option {
            background: #fff;
            color: #000;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #ff69b4;
            box-shadow: 0 0 15px rgba(255, 105, 180, 0.5);
            background: rgba(255, 255, 255, 0.15);
        }

        input::placeholder, textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        /* èµ·å¦æŒ‰éˆ• */
        .number-input-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        /* æŒ‰éˆ• */
        button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #ff69b4 0%, #ff1493 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 2px;
            margin-top: 20px;
            box-shadow: 0 5px 20px rgba(255, 105, 180, 0.4);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(255, 105, 180, 0.6);
        }

        button:active {
            transform: translateY(-1px);
        }

        /* çµæœé¡¯ç¤ºå€åŸŸ */
        .result-section {
            margin-top: 40px;
            display: none;
        }

        .result-section.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .hexagram-display {
            display: flex;
            justify-content: center;
            gap: 60px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .hexagram {
            text-align: center;
        }

        .hexagram-title {
            color: #ff69b4;
            font-size: 1.2em;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .hexagram-lines {
            background: rgba(0, 0, 0, 0.3);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid rgba(255, 105, 180, 0.3);
        }

        .line {
            height: 8px;
            margin: 12px 0;
            border-radius: 4px;
            background: linear-gradient(90deg, #ff69b4, #ff1493);
            box-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
            position: relative;
        }

        .line.broken {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .line.broken::before,
        .line.broken::after {
            content: '';
            flex: 1;
            height: 8px;
            background: linear-gradient(90deg, #ff69b4, #ff1493);
            border-radius: 4px;
        }

        .hexagram-name {
            margin-top: 20px;
            font-size: 2em;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .hexagram-info {
            margin-top: 10px;
            color: #b8b8d4;
            font-size: 0.9em;
        }

        .interpretation {
            color: #e0e0ff;
            line-height: 1.8;
            margin-top: 30px;
            padding: 30px;
            background: rgba(255, 105, 180, 0.1);
            border: 1px solid rgba(255, 105, 180, 0.3);
            border-radius: 15px;
        }

        .interpretation h3 {
            color: #ff69b4;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .interpretation h4 {
            color: #ffd700;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .interpretation p {
            margin-bottom: 15px;
        }

        .divination-info {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            color: #b8b8d4;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .card {
                padding: 25px;
            }

            .hexagram-display {
                gap: 30px;
            }

            .number-input-group {
                grid-template-columns: 1fr;
            }
        }

        /* è¿”å›é¦–é æŒ‰éˆ• */
        .home-button {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: #fff;
            text-decoration: none;
            transition: all 0.3s ease;
            z-index: 1000;
            width: auto;
            margin: 0;
            display: inline-block;
            font-size: 1em;
        }

        .home-button:hover {
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4);
            transform: translateY(-2px);
        }

        .hidden {
            display: none;
        }
    </style>
<link rel="stylesheet" href="../mobile-ui.css">
</head>
<body>
    <!-- æ˜Ÿç©ºèƒŒæ™¯ -->
    <div class="stars" id="stars"></div>
    
    <!-- è¿”å›é¦–é æŒ‰éˆ• -->
    <a href="../index.html" class="home-button">ğŸ  é¦–é </a>

    <div class="container">
        <header>
            <h1>ğŸŒ¸ æ¢…èŠ±æ˜“æ•¸ ğŸŒ¸</h1>
            <p class="subtitle">è§€è¬ç‰©ä¹‹è±¡ æ¸¬å¤©åœ°ä¹‹æ•¸</p>
        </header>

        <div class="card">
            <h2 style="color: #ff69b4; margin-bottom: 30px; text-align: center;">é¸æ“‡èµ·å¦æ–¹å¼</h2>
            
            <div class="method-selector">
                <div class="method-card active" data-method="time">
                    <h3>â° æ™‚é–“èµ·å¦</h3>
                    <p>æ ¹æ“šå¹´æœˆæ—¥æ™‚èµ·å¦</p>
                </div>
                <div class="method-card" data-method="number">
                    <h3>ğŸ² æ•¸å­—èµ·å¦</h3>
                    <p>å ±å…©å€‹æ•¸å­—èµ·å¦</p>
                </div>
                <div class="method-card" data-method="question">
                    <h3>ğŸ’­ å•äº‹èµ·å¦</h3>
                    <p>æ ¹æ“šå•é¡Œå­—æ•¸èµ·å¦</p>
                </div>
            </div>

            <!-- æ™‚é–“èµ·å¦ -->
            <div id="timeMethod" class="method-content">
                <div class="form-group">
                    <label for="question1">æ‚¨æƒ³å•çš„å•é¡Œ</label>
                    <textarea id="question1" placeholder="è«‹è¼¸å…¥æ‚¨æƒ³å åœçš„å•é¡Œ..."></textarea>
                </div>
                <button onclick="divinateByTime()">ğŸ”® æ™‚é–“èµ·å¦</button>
            </div>

            <!-- æ•¸å­—èµ·å¦ -->
            <div id="numberMethod" class="method-content hidden">
                <div class="form-group">
                    <label for="question2">æ‚¨æƒ³å•çš„å•é¡Œ</label>
                    <textarea id="question2" placeholder="è«‹è¼¸å…¥æ‚¨æƒ³å åœçš„å•é¡Œ..."></textarea>
                </div>
                <div class="number-input-group">
                    <div class="form-group">
                        <label for="number1">ç¬¬ä¸€å€‹æ•¸å­— (1-100)</label>
                        <input type="number" id="number1" min="1" max="100" placeholder="è«‹è¼¸å…¥æ•¸å­—">
                    </div>
                    <div class="form-group">
                        <label for="number2">ç¬¬äºŒå€‹æ•¸å­— (1-100)</label>
                        <input type="number" id="number2" min="1" max="100" placeholder="è«‹è¼¸å…¥æ•¸å­—">
                    </div>
                </div>
                <button onclick="divinateByNumber()">ğŸ”® æ•¸å­—èµ·å¦</button>
            </div>

            <!-- å•äº‹èµ·å¦ -->
            <div id="questionMethod" class="method-content hidden">
                <div class="form-group">
                    <label for="question3">æ‚¨æƒ³å•çš„å•é¡Œï¼ˆå­—æ•¸ç”¨æ–¼èµ·å¦ï¼‰</label>
                    <textarea id="question3" placeholder="è«‹è¼¸å…¥æ‚¨æƒ³å åœçš„å•é¡Œï¼Œå•é¡Œçš„å­—æ•¸å°‡ç”¨æ–¼èµ·å¦..."></textarea>
                </div>
                <button onclick="divinateByQuestion()">ğŸ”® å•äº‹èµ·å¦</button>
            </div>

            <div class="result-section" id="resultSection">
                <h2 style="color: #ff69b4; text-align: center; margin-bottom: 30px;">å¦è±¡è§£æ</h2>
                
                <div class="divination-info" id="divinationInfo"></div>

                <div class="hexagram-display">
                    <div class="hexagram">
                        <div class="hexagram-title">æœ¬å¦</div>
                        <div class="hexagram-lines" id="originalHexagram"></div>
                        <div class="hexagram-name" id="originalName"></div>
                        <div class="hexagram-info" id="originalInfo"></div>
                    </div>
                    <div class="hexagram" id="changedHexagramContainer" style="display: none;">
                        <div class="hexagram-title">è®Šå¦</div>
                        <div class="hexagram-lines" id="changedHexagram"></div>
                        <div class="hexagram-name" id="changedName"></div>
                        <div class="hexagram-info" id="changedInfo"></div>
                    </div>
                </div>

                <div class="interpretation" id="interpretation"></div>
            </div>
        </div>
    </div>

    <script>
        // ç”Ÿæˆæ˜Ÿç©º
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const numberOfStars = 200;

            for (let i = 0; i < numberOfStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }

            for (let i = 0; i < 3; i++) {
                const shootingStar = document.createElement('div');
                shootingStar.className = 'shooting-star';
                shootingStar.style.left = Math.random() * 100 + '%';
                shootingStar.style.top = Math.random() * 50 + '%';
                shootingStar.style.animationDelay = Math.random() * 5 + 's';
                starsContainer.appendChild(shootingStar);
            }
        }

        // åˆ‡æ›èµ·å¦æ–¹å¼
        document.querySelectorAll('.method-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.method-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                
                document.querySelectorAll('.method-content').forEach(m => m.classList.add('hidden'));
                
                const method = this.dataset.method;
                document.getElementById(method + 'Method').classList.remove('hidden');
            });
        });

        // å…«å¦åŸºæœ¬æ•¸æ“š
        const trigrams = {
            1: { name: 'ä¹¾', nature: 'å¤©', attribute: 'é‡‘', symbol: 'â˜°' },
            2: { name: 'å…Œ', nature: 'æ¾¤', attribute: 'é‡‘', symbol: 'â˜±' },
            3: { name: 'é›¢', nature: 'ç«', attribute: 'ç«', symbol: 'â˜²' },
            4: { name: 'éœ‡', nature: 'é›·', attribute: 'æœ¨', symbol: 'â˜³' },
            5: { name: 'å·½', nature: 'é¢¨', attribute: 'æœ¨', symbol: 'â˜´' },
            6: { name: 'å', nature: 'æ°´', attribute: 'æ°´', symbol: 'â˜µ' },
            7: { name: 'è‰®', nature: 'å±±', attribute: 'åœŸ', symbol: 'â˜¶' },
            8: { name: 'å¤', nature: 'åœ°', attribute: 'åœŸ', symbol: 'â˜·' }
        };

        // å…­åå››å¦æ•¸æ“šï¼ˆç°¡åŒ–ç‰ˆï¼‰
        const hexagrams = {
            '11': { name: 'ä¹¾ç‚ºå¤©', description: 'å…ƒäº¨åˆ©è²', interpretation: 'ä¹¾å¦ä»£è¡¨ç´”é™½ä¹‹è±¡ï¼Œè±¡å¾µå‰›å¥ã€é€²å–ã€‚æ­¤å¦å¤§å‰ï¼Œå®œç©æ¥µé€²å–ï¼Œè‡ªå¼·ä¸æ¯ã€‚äº‹æ¥­æ–¹é¢æœƒæœ‰å¤§çš„ç™¼å±•ï¼Œä½†éœ€æŒä¹‹ä»¥æ†ã€‚' },
            '12': { name: 'å¤©æ¾¤å±¥', description: 'å±¥è™å°¾', interpretation: 'å±¥å¦è±¡å¾µè¬¹æ…è¡Œäº‹ã€‚é›–è™•å¢ƒå¾®å¦™ï¼Œä½†åªè¦è¡Œç‚ºç«¯æ­£ï¼Œå°å¿ƒè¬¹æ…ï¼Œä¾¿èƒ½åŒ–éšªç‚ºå¤·ã€‚å‡¡äº‹å®œä½èª¿è¡Œäº‹ï¼Œé¿å…é‹’èŠ’å¤ªéœ²ã€‚' },
            '13': { name: 'å¤©ç«åŒäºº', description: 'åŒäººäºé‡', interpretation: 'åŒäººå¦è±¡å¾µåœ˜çµåˆä½œã€‚æ­¤æ™‚å®œèˆ‡ä»–äººå”åŠ›ï¼Œä»¥å…¬æ­£ç„¡ç§çš„æ…‹åº¦è™•äº‹ã€‚äººéš›é—œä¿‚å’Œè«§ï¼Œäº‹æ¥­ä¸Šé©åˆåˆä½œç™¼å±•ã€‚' },
            '14': { name: 'å¤©é›·ç„¡å¦„', description: 'ç„¡å¦„ä¹‹ç½', interpretation: 'ç„¡å¦„å¦è­¦ç¤ºè¦é †æ‡‰è‡ªç„¶ï¼Œä¸å¯å¦„å‹•ã€‚æ­¤æ™‚ä¸å®œå†’é€²ï¼Œæ‡‰ä¿æŒç´”æ­£ä¹‹å¿ƒï¼Œé †å…¶è‡ªç„¶æ–¹èƒ½é¿å…ç½ç¦ã€‚' },
            '15': { name: 'å¤©é¢¨å§¤', description: 'å¥³å£¯å‹¿ç”¨', interpretation: 'å§¤å¦è±¡å¾µé‚‚é€…ã€ç›¸é‡ã€‚æé†’è¦è­¦æƒ•å°äººï¼Œé˜²å¾®æœæ¼¸ã€‚æ­¤æ™‚ä¸å®œè¼•ä¿¡ä»–äººï¼Œéœ€è¬¹æ…åˆ¤æ–·ã€‚' },
            '16': { name: 'å¤©æ°´è¨Ÿ', description: 'è¨Ÿå‰‡çµ‚å‡¶', interpretation: 'è¨Ÿå¦ä»£è¡¨çˆ­è¨Ÿã€ç³¾ç´›ã€‚å»ºè­°é€€è®“ç‚ºä¸Šï¼Œé¿å…çˆ­åŸ·ã€‚å³ä½¿æœ‰ç†ä¹Ÿä¸å®œéåˆ†çˆ­è¾¯ï¼Œå’Œè§£ç‚ºä½³ã€‚' },
            '17': { name: 'å¤©å±±é¯', description: 'é¯ä¸–ç„¡æ‚¶', interpretation: 'é¯å¦è±¡å¾µé€€éš±ã€é¿è®“ã€‚æ­¤æ™‚å®œä»¥é€€ç‚ºé€²ï¼Œæš«æ™‚éš±é€€ä»¥å¾…æ™‚æ©Ÿã€‚ä¸æ˜¯æ¶ˆæ¥µé€ƒé¿ï¼Œè€Œæ˜¯æ˜å“²ä¿èº«ã€‚' },
            '18': { name: 'å¤©åœ°å¦', description: 'å¦æ¥µæ³°ä¾†', interpretation: 'å¦å¦ä»£è¡¨é–‰å¡ä¸é€šã€‚ç›®å‰é‹å‹¢ä¸ä½³ï¼Œä½†ä¸è¦æ°£é¤’ã€‚å …å®ˆæ­£é“ï¼Œç­‰å¾…æ™‚æ©Ÿï¼Œçµ‚æœƒå¦æ¥µæ³°ä¾†ã€‚' },
            '21': { name: 'æ¾¤å¤©å¤¬', description: 'å¤¬è€Œå‹¿ç–‘', interpretation: 'å¤¬å¦è±¡å¾µæ±ºæ–·ã€çªç ´ã€‚æ­¤æ™‚æ©Ÿæœƒä¾†è‡¨ï¼Œæ‡‰æœæ–·æ±ºç­–ï¼Œä½†è¦æ³¨æ„æ–¹å¼æ–¹æ³•ï¼Œå‰›æŸ”ä¸¦æ¿Ÿã€‚' },
            '22': { name: 'å…Œç‚ºæ¾¤', description: 'éº—æ¾¤å…Œ', interpretation: 'å…Œå¦ä»£è¡¨å–œæ‚…ã€å’Œæ‚…ã€‚é‹å‹¢é †æš¢ï¼Œäººéš›é—œä¿‚è‰¯å¥½ã€‚ä½†è¦ä¿æŒçœŸèª ï¼Œä¸å¯æµæ–¼è¼•æµ®ã€‚' },
            '23': { name: 'æ¾¤ç«é©', description: 'æ¹¯æ­¦é©å‘½', interpretation: 'é©å¦è±¡å¾µè®Šé©ã€æ”¹é©ã€‚æ­¤æ™‚é©åˆæ”¹è®Šç¾ç‹€ï¼Œé©æ•…é¼æ–°ã€‚ä½†æ”¹é©è¦é †æ‡‰æ°‘å¿ƒï¼ŒæŠŠæ¡æ™‚æ©Ÿã€‚' },
            '24': { name: 'æ¾¤é›·éš¨', description: 'éš¨æ™‚ä¹‹ç¾©', interpretation: 'éš¨å¦ä»£è¡¨éš¨å’Œã€è·Ÿéš¨ã€‚æ­¤æ™‚å®œé †æ‡‰å½¢å‹¢ï¼Œéš¨æ©Ÿæ‡‰è®Šã€‚ä¸å¿…éåˆ†å …æŒå·±è¦‹ï¼Œé©ç•¶è®Šé€šæœƒæ›´å¥½ã€‚' },
            '25': { name: 'æ¾¤é¢¨å¤§é', description: 'å¤§éä¹‹ä¸–', interpretation: 'å¤§éå¦è­¦ç¤ºè² è·éé‡ã€‚ç›®å‰å£“åŠ›è¼ƒå¤§ï¼Œæ‡‰é‡åŠ›è€Œè¡Œï¼Œä¸å¯å‹‰å¼·ã€‚é©ç•¶æ”¾ä¸‹ä¸€äº›ï¼Œä»¥å…ä¸å ªé‡è² ã€‚' },
            '26': { name: 'æ¾¤æ°´å›°', description: 'å›°äº¨è²', interpretation: 'å›°å¦è±¡å¾µå›°å¢ƒã€‚é›–ç„¶ç›®å‰è™•å¢ƒè‰±é›£ï¼Œä½†åªè¦å …å®ˆæ­£é“ï¼Œä¿æŒä¿¡å¿µï¼Œçµ‚æœƒèµ°å‡ºå›°å¢ƒã€‚' },
            '27': { name: 'æ¾¤å±±å’¸', description: 'äºŒæ°£æ„Ÿæ‡‰', interpretation: 'å’¸å¦ä»£è¡¨æ„Ÿæ‡‰ã€äº¤æµã€‚æ­¤æ™‚äººéš›é—œä¿‚å’Œè«§ï¼Œé©åˆæºé€šäº¤æµã€‚æ„Ÿæƒ…æ–¹é¢å°¤å…¶é †åˆ©ã€‚' },
            '28': { name: 'æ¾¤åœ°èƒ', description: 'èƒèšå‡é¨°', interpretation: 'èƒå¦è±¡å¾µèšé›†ã€æœƒåˆã€‚æ­¤æ™‚é©åˆåœ˜éšŠåˆä½œï¼Œçœ¾å¿—æˆåŸã€‚ä½†è¦æ³¨æ„çµ„ç¹”ç®¡ç†ï¼Œé˜²æ­¢æ··äº‚ã€‚' },
            '31': { name: 'ç«å¤©å¤§æœ‰', description: 'ç«åœ¨å¤©ä¸Š', interpretation: 'å¤§æœ‰å¦ä»£è¡¨è±æ”¶ã€æ”¶ç©«ã€‚ç›®å‰é‹å‹¢æ¥µä½³ï¼Œäº‹æ¥­è²¡é‹çš†æ—ºã€‚ä½†éœ€ä¿æŒè¬™è™›ï¼Œä¸å¯é©•å‚²è‡ªæ»¿ã€‚' },
            '32': { name: 'ç«æ¾¤ç½', description: 'ç½è€Œä¸çˆ­', interpretation: 'ç½å¦è±¡å¾µåˆ†é›¢ã€èƒŒé›¢ã€‚æ­¤æ™‚å¯èƒ½å‡ºç¾åˆ†æ­§ï¼Œä½†ä¸å¿…å¼·æ±‚ä¸€è‡´ã€‚æ±‚åŒå­˜ç•°ï¼Œå„è¡Œå…¶æ˜¯ä¹Ÿå¯ã€‚' },
            '33': { name: 'é›¢ç‚ºç«', description: 'é‡æ˜éº—æ­£', interpretation: 'é›¢å¦ä»£è¡¨å…‰æ˜ã€ä¾é™„ã€‚é‹å‹¢å…‰æ˜ï¼Œä½†éœ€ä¾é™„æ–¼æ­£é“ã€‚äº‹æ¥­ä¸Šé©åˆåˆä½œï¼Œå€ŸåŠ©ä»–äººåŠ›é‡ã€‚' },
            '34': { name: 'ç«é›·å™¬å—‘', description: 'å™¬å—‘äº¨', interpretation: 'å™¬å—‘å¦è±¡å¾µå’¬åˆã€è§£æ±ºã€‚ç›®å‰éšœç¤™å¯ä»¥æ’é™¤ï¼Œä½†éœ€è¦æœæ–·è¡Œå‹•ã€‚è¨´è¨Ÿã€çˆ­ç«¯å¯ç²è§£æ±ºã€‚' },
            '35': { name: 'ç«é¢¨é¼', description: 'é¼æ–°é©æ•…', interpretation: 'é¼å¦ä»£è¡¨ç©©å›ºã€é¼æ–°ã€‚æ­¤æ™‚åŸºç¤ç©©å›ºï¼Œé©åˆæ”¹é©å‰µæ–°ã€‚äº‹æ¥­å°‡æœ‰æ–°çš„ç™¼å±•æ©Ÿæœƒã€‚' },
            '36': { name: 'ç«æ°´æœªæ¿Ÿ', description: 'æœªæ¿Ÿçµ‚å‡¶', interpretation: 'æœªæ¿Ÿå¦è±¡å¾µæœªå®Œæˆã€å‰æ™¯ä¸æ˜ã€‚ç›®å‰äº‹æƒ…å°šæœªæˆåŠŸï¼Œéœ€ç¹¼çºŒåŠªåŠ›ã€‚è¬¹æ…è¡Œäº‹ï¼Œä¸å¯å¤§æ„ã€‚' },
            '37': { name: 'ç«å±±æ—…', description: 'æ—…è€Œç„¡è¦ª', interpretation: 'æ—…å¦ä»£è¡¨æ—…è¡Œã€æ¼‚æ³Šã€‚ç›®å‰è™•æ–¼éæ¸¡æœŸï¼Œä¸å®œå®‰å®šã€‚é©åˆå¤–å‡ºã€è®Šå‹•ï¼Œä½†è¦å°å¿ƒè¬¹æ…ã€‚' },
            '38': { name: 'ç«åœ°æ™‰', description: 'æ™‰å¦‚ç¢©é¼ ', interpretation: 'æ™‰å¦è±¡å¾µæ™‰å‡ã€å‰é€²ã€‚é‹å‹¢ä¸Šå‡ï¼Œäº‹æ¥­æœ‰æ™‰å‡æ©Ÿæœƒã€‚ä½†è¦è…³è¸å¯¦åœ°ï¼Œæ­¥æ­¥ç‚ºç‡Ÿã€‚' },
            '41': { name: 'é›·å¤©å¤§å£¯', description: 'å¤§å£¯ä¹‹å¾·', interpretation: 'å¤§å£¯å¦ä»£è¡¨å¼·ç››ã€å£¯å¤§ã€‚ç›®å‰å¯¦åŠ›é›„åšï¼Œå¯å¤§å±•æ‹³è…³ã€‚ä½†è¦æ³¨æ„ä¸å¯é€å¼·ï¼Œéå‰›æ˜“æŠ˜ã€‚' },
            '42': { name: 'é›·æ¾¤æ­¸å¦¹', description: 'æ­¸å¦¹ä»¥å¨£', interpretation: 'æ­¸å¦¹å¦è±¡å¾µæ­¸å¾ã€å©šå§»ã€‚æ„Ÿæƒ…æ–¹é¢æœ‰é€²å±•ï¼Œä½†è¦ç†æ€§å°å¾…ã€‚ä¸å¯æ„Ÿæƒ…ç”¨äº‹ï¼Œéœ€è¬¹æ…é¸æ“‡ã€‚' },
            '43': { name: 'é›·ç«è±', description: 'è±å…¶å±‹', interpretation: 'è±å¦ä»£è¡¨è±ç››ã€è±æ”¶ã€‚ç›®å‰é‹å‹¢æ¥µå¥½ï¼Œæ”¶ç©«è±ç¢©ã€‚ä½†ç››æ¥µè€Œè¡°ï¼Œéœ€å±…å®‰æ€å±ã€‚' },
            '44': { name: 'éœ‡ç‚ºé›·', description: 'éœ‡é©šç™¾é‡Œ', interpretation: 'éœ‡å¦è±¡å¾µéœ‡å‹•ã€é©šæã€‚å¯èƒ½æœ‰çªç™¼äº‹ä»¶ï¼Œä½†ä¸å¿…é©šæ…Œã€‚é€™æ˜¯è€ƒé©—ï¼Œä¹Ÿæ˜¯è½‰æ©Ÿã€‚' },
            '45': { name: 'é›·é¢¨æ†', description: 'æ†ä¹…ä¸è®Š', interpretation: 'æ†å¦ä»£è¡¨æ†ä¹…ã€æŒä¹…ã€‚æé†’è¦æœ‰æ†å¿ƒï¼Œå …æŒä¸æ‡ˆã€‚ä¸å¯ä¸‰å¿ƒäºŒæ„ï¼ŒæŒä¹‹ä»¥æ†å¿…æœ‰æ‰€æˆã€‚' },
            '46': { name: 'é›·æ°´è§£', description: 'è§£è€Œå¾Œäº¨', interpretation: 'è§£å¦è±¡å¾µè§£é™¤ã€åŒ–è§£ã€‚å›°å¢ƒå°‡æœƒè§£é™¤ï¼Œå•é¡Œå¯ä»¥è§£æ±ºã€‚æ­¤æ™‚å®œå¯¬å®å¤§é‡ï¼ŒåŒ–è§£æ©æ€¨ã€‚' },
            '47': { name: 'é›·å±±å°é', description: 'å°éå¯ä¹Ÿ', interpretation: 'å°éå¦æé†’å°å¿ƒè¬¹æ…ã€‚ç›®å‰ä¸å®œæœ‰å¤§å‹•ä½œï¼Œæ‡‰ä½èª¿è¡Œäº‹ã€‚å°çš„éå¤±å¯ä»¥åŸè«’ï¼Œå¤§éŒ¯ä¸å¯çŠ¯ã€‚' },
            '48': { name: 'é›·åœ°è±«', description: 'è±«é †ä»¥å‹•', interpretation: 'è±«å¦ä»£è¡¨æ„‰æ‚…ã€é †åˆ©ã€‚é‹å‹¢é †æš¢ï¼Œå¿ƒæƒ…æ„‰å¿«ã€‚é©åˆå¨›æ¨‚æ”¾é¬†ï¼Œä½†ä¸å¯éåº¦æ²‰æººã€‚' },
            '51': { name: 'é¢¨å¤©å°ç•œ', description: 'å°ç•œäº¨', interpretation: 'å°ç•œå¦è±¡å¾µå°æœ‰ç©è“„ã€‚ç›®å‰é›–æœ‰æ”¶ç©«ï¼Œä½†ä¸è¶³ä»¥å¤§å±•ã€‚å®œç©ç´¯å¯¦åŠ›ï¼Œç­‰å¾…æ™‚æ©Ÿã€‚' },
            '52': { name: 'é¢¨æ¾¤ä¸­å­š', description: 'ä¸­å­šåŒ–é‚¦', interpretation: 'ä¸­å­šå¦ä»£è¡¨èª ä¿¡ã€ä¿¡ä»»ã€‚æ­¤æ™‚èª ä¿¡æœ€é‡è¦ï¼Œä»¥èª å¾…äººæ–¹èƒ½æˆäº‹ã€‚äººéš›é—œä¿‚å’Œè«§é †åˆ©ã€‚' },
            '53': { name: 'é¢¨ç«å®¶äºº', description: 'å®¶äººå—ƒå—ƒ', interpretation: 'å®¶äººå¦è±¡å¾µå®¶åº­ã€è¦ªäººã€‚æé†’è¦é‡è¦–å®¶åº­ï¼Œè™•ç†å¥½å®¶åº­é—œä¿‚ã€‚å®¶å’Œè¬äº‹èˆˆã€‚' },
            '54': { name: 'é¢¨é›·ç›Š', description: 'ç›Šå‹•è€Œå·½', interpretation: 'ç›Šå¦ä»£è¡¨å¢ç›Šã€åˆ©ç›Šã€‚ç›®å‰é‹å‹¢ä¸Šå‡ï¼Œæœƒæœ‰æ”¶ç›Šã€‚é©åˆæŠ•è³‡ç™¼å±•ï¼Œä½†è¦æŠŠæ¡åˆ†å¯¸ã€‚' },
            '55': { name: 'å·½ç‚ºé¢¨', description: 'é‡å·½ç”³å‘½', interpretation: 'å·½å¦è±¡å¾µé †å¾ã€è¬™éœã€‚æ­¤æ™‚å®œè¬™è™›è¬¹æ…ï¼Œé †æ‡‰å½¢å‹¢ã€‚éåˆ†å›ºåŸ·æœƒå¸¶ä¾†é˜»ç¤™ã€‚' },
            '56': { name: 'é¢¨æ°´æ¸™', description: 'æ¸™æ•£é›¢æ', interpretation: 'æ¸™å¦ä»£è¡¨æ¸™æ•£ã€é›¢æ•£ã€‚ç›®å‰å¯èƒ½æœ‰åˆ†é›¢ä¹‹è±¡ï¼Œä½†ä¸å¿…å¼·æ±‚ã€‚é †å…¶è‡ªç„¶ï¼Œå„è‡ªç™¼å±•ã€‚' },
            '57': { name: 'é¢¨å±±æ¼¸', description: 'æ¼¸é€²æœ‰åº', interpretation: 'æ¼¸å¦è±¡å¾µæ¼¸é€²ã€å¾ªåºã€‚æé†’è¦æŒ‰éƒ¨å°±ç­ï¼Œä¸å¯æ€¥æ–¼æ±‚æˆã€‚ç©©æ­¥å‰é€²ï¼Œçµ‚èƒ½é”æˆç›®æ¨™ã€‚' },
            '58': { name: 'é¢¨åœ°è§€', description: 'è§€åœ‹ä¹‹å…‰', interpretation: 'è§€å¦ä»£è¡¨è§€å¯Ÿã€è§€çœ‹ã€‚æ­¤æ™‚ä¸å®œè¡Œå‹•ï¼Œæ‡‰è§€å¯Ÿå½¢å‹¢ã€‚ä»¥æ—è§€è€…çš„è§’åº¦æ€è€ƒå•é¡Œã€‚' },
            '61': { name: 'æ°´å¤©éœ€', description: 'éœ€äºéƒŠé‡', interpretation: 'éœ€å¦è±¡å¾µç­‰å¾…ã€éœ€æ±‚ã€‚ç›®å‰æ™‚æ©Ÿæœªåˆ°ï¼Œéœ€è€å¿ƒç­‰å¾…ã€‚ä¸å¯æ€¥èºå†’é€²ï¼Œç­‰å¾…æ™‚æ©Ÿæˆç†Ÿã€‚' },
            '62': { name: 'æ°´æ¾¤ç¯€', description: 'ç¯€ä»¥åˆ¶åº¦', interpretation: 'ç¯€å¦ä»£è¡¨ç¯€åˆ¶ã€ç¯€ç´„ã€‚æé†’è¦æœ‰ç¯€åˆ¶ï¼Œé©å¯è€Œæ­¢ã€‚éåº¦æœƒå¸¶ä¾†å•é¡Œï¼Œä¸­åº¸ç‚ºä½³ã€‚' },
            '63': { name: 'æ°´ç«æ—¢æ¿Ÿ', description: 'æ—¢æ¿Ÿäº¨å°', interpretation: 'æ—¢æ¿Ÿå¦è±¡å¾µæˆåŠŸã€å®Œæˆã€‚ç›®å‰äº‹æƒ…å·²æˆï¼Œä½†è¦é˜²æ­¢ç››æ¥µè€Œè¡°ã€‚å±…å®‰æ€å±ï¼Œä¿æŒè­¦æƒ•ã€‚' },
            '64': { name: 'æ°´é›·å±¯', description: 'å±¯é›£ä¹‹ä¸–', interpretation: 'å±¯å¦ä»£è¡¨è‰±é›£ã€å±¯ç©ã€‚å‰µæ¥­ç¶­è‰±ï¼Œç›®å‰å›°é›£é‡é‡ã€‚ä½†åªè¦å …æŒï¼Œçµ‚æœƒæœ‰æ‰€æˆå°±ã€‚' },
            '65': { name: 'æ°´é¢¨äº•', description: 'æ”¹é‚‘ä¸æ”¹äº•', interpretation: 'äº•å¦è±¡å¾µäº•æ°´ã€è³‡æºã€‚æé†’è¦å–„ç”¨è³‡æºï¼Œä¸è¦æµªè²»ã€‚ç©©å®šçš„åŸºç¤å¾ˆé‡è¦ã€‚' },
            '66': { name: 'åç‚ºæ°´', description: 'ç¿’åå…¥å', interpretation: 'åå¦ä»£è¡¨éšªé˜»ã€å›°é›£ã€‚ç›®å‰é¢è‡¨é‡é‡éšªé˜»ï¼Œä½†ä¸è¦é€€ç¸®ã€‚ä¿æŒä¿¡å¿µï¼Œçµ‚èƒ½åº¦éé›£é—œã€‚' },
            '67': { name: 'æ°´å±±è¹‡', description: 'è¹‡é›£ç•¶å‰', interpretation: 'è¹‡å¦è±¡å¾µè‰±é›£ã€é˜»ç¤™ã€‚å‰è·¯è‰±éšªï¼Œä¸å®œå‰é€²ã€‚æš«æ™‚åœæ­¢ï¼Œåçœè‡ªèº«ï¼Œç­‰å¾…æ™‚æ©Ÿã€‚' },
            '68': { name: 'æ°´åœ°æ¯”', description: 'æ¯”å‰è¦ªè¼”', interpretation: 'æ¯”å¦ä»£è¡¨è¦ªæ¯”ã€ä¾é™„ã€‚æ­¤æ™‚å®œèˆ‡ä»–äººåˆä½œï¼Œå°‹æ±‚å¹«åŠ©ã€‚äººéš›é—œä¿‚å’Œè«§ï¼Œé©åˆè¯åˆã€‚' },
            '71': { name: 'å±±å¤©å¤§ç•œ', description: 'å¤§ç•œå‰›å¥', interpretation: 'å¤§ç•œå¦è±¡å¾µå¤§é‡ç©è“„ã€‚ç›®å‰å¯¦åŠ›é›„åšï¼Œä½†è¦å–„ç”¨è³‡æºã€‚ç©ç´¯æ˜¯ç‚ºäº†å°‡ä¾†çš„ç™¼å±•ã€‚' },
            '72': { name: 'å±±æ¾¤æ', description: 'æå·±ç›Šäºº', interpretation: 'æå¦ä»£è¡¨æ¸›æã€çŠ§ç‰²ã€‚å¯èƒ½éœ€è¦æš«æ™‚çš„çŠ§ç‰²ï¼Œä½†é€™æ˜¯ç‚ºäº†é•·é åˆ©ç›Šã€‚å…ˆæå¾Œç›Šã€‚' },
            '73': { name: 'å±±ç«è³', description: 'è³é£¾æ–‡æ˜', interpretation: 'è³å¦è±¡å¾µè£é£¾ã€ç¾åŒ–ã€‚å¤–è¡¨å›ºç„¶é‡è¦ï¼Œä½†ä¸å¯åªé‡å¤–è¡¨ã€‚å…§åœ¨å……å¯¦æ›´ç‚ºé—œéµã€‚' },
            '74': { name: 'å±±é›·é ¤', description: 'é ¤é¤Šæ­£å¾·', interpretation: 'é ¤å¦ä»£è¡¨é ¤é¤Šã€ä¿®é¤Šã€‚æ­¤æ™‚å®œä¿®èº«é¤Šæ€§ï¼Œå……å¯¦è‡ªå·±ã€‚æ³¨æ„é£²é£Ÿå¥åº·ï¼Œä¿é¤Šèº«é«”ã€‚' },
            '75': { name: 'å±±é¢¨è ±', description: 'è ±æƒ‘äººå¿ƒ', interpretation: 'è ±å¦è±¡å¾µè ±æƒ‘ã€è…æ•—ã€‚æé†’è¦æ•´é “ã€é©æ–°ã€‚æ¸…é™¤è…æ•—ï¼Œé‡æ–°é–‹å§‹ã€‚' },
            '76': { name: 'å±±æ°´è’™', description: 'è’™ä»¥é¤Šæ­£', interpretation: 'è’™å¦ä»£è¡¨å•Ÿè’™ã€æ•™è‚²ã€‚ç›®å‰è™•æ–¼å­¸ç¿’éšæ®µï¼Œè¦è™›å¿ƒæ±‚æ•™ã€‚ä¸æ¥ä¸‹å•ï¼Œçµ‚èƒ½æˆåŠŸã€‚' },
            '77': { name: 'è‰®ç‚ºå±±', description: 'å…¼å±±è‰®æ­¢', interpretation: 'è‰®å¦è±¡å¾µåœæ­¢ã€éœæ­¢ã€‚æ­¤æ™‚å®œéœä¸å®œå‹•ï¼Œæ‡‰è©²åœä¸‹ä¾†æ€è€ƒã€‚å‹•ä¸å¦‚éœï¼Œä¿æŒç¾ç‹€ã€‚' },
            '78': { name: 'å±±åœ°å‰', description: 'å‰è½æ¶ˆæ•£', interpretation: 'å‰å¦ä»£è¡¨å‰è½ã€è¡°é€€ã€‚ç›®å‰é‹å‹¢ä¸‹é™ï¼Œä¸å®œæœ‰å¤§å‹•ä½œã€‚ä¿å­˜å¯¦åŠ›ï¼Œç­‰å¾…æ™‚æ©Ÿã€‚' },
            '81': { name: 'åœ°å¤©æ³°', description: 'æ³°ç„¶è™•ä¹‹', interpretation: 'æ³°å¦è±¡å¾µé€šæ³°ã€é †åˆ©ã€‚é‹å‹¢æ¥µä½³ï¼Œè¬äº‹äº¨é€šã€‚ä½†è¦å±…å®‰æ€å±ï¼Œä¸å¯é©•å‚²è‡ªæ»¿ã€‚' },
            '82': { name: 'åœ°æ¾¤è‡¨', description: 'è‡¨äº‹è€Œæ‡¼', interpretation: 'è‡¨å¦ä»£è¡¨è‡¨è¿‘ã€ä¾†åˆ°ã€‚æ©Ÿæœƒå³å°‡ä¾†è‡¨ï¼Œè¦æŠŠæ¡æ™‚æ©Ÿã€‚ä»¥è¬™è™›è¬¹æ…çš„æ…‹åº¦è¿æ¥ã€‚' },
            '83': { name: 'åœ°ç«æ˜å¤·', description: 'æ˜å¤·ä¹‹é›£', interpretation: 'æ˜å¤·å¦è±¡å¾µå…‰æ˜å—å‚·ã€‚ç›®å‰è™•å¢ƒè‰±é›£ï¼Œè¦éŸœå…‰é¤Šæ™¦ã€‚ä¿è­·è‡ªå·±ï¼Œç­‰å¾…æ™‚æ©Ÿã€‚' },
            '84': { name: 'åœ°é›·å¾©', description: 'å¾©å…¶è¦‹å¤©åœ°', interpretation: 'å¾©å¦ä»£è¡¨è¿”å›ã€å¾©ç”¦ã€‚äº‹æƒ…å°‡æœ‰è½‰æ©Ÿï¼Œé‹å‹¢å›å‡ã€‚æŠŠæ¡æ©Ÿæœƒï¼Œé‡æ–°é–‹å§‹ã€‚' },
            '85': { name: 'åœ°é¢¨å‡', description: 'å‡è€Œä¸å·²', interpretation: 'å‡å¦è±¡å¾µä¸Šå‡ã€æ™‰å‡ã€‚é‹å‹¢ä¸Šå‡ï¼Œé©åˆé€²å–ã€‚ä½†è¦å¾ªåºæ¼¸é€²ï¼Œä¸å¯æ“ä¹‹éæ€¥ã€‚' },
            '86': { name: 'åœ°æ°´å¸«', description: 'å¸«å‡ºä»¥å¾‹', interpretation: 'å¸«å¦ä»£è¡¨è»éšŠã€ç´€å¾‹ã€‚æé†’è¦æœ‰çµ„ç¹”æœ‰ç´€å¾‹ã€‚é ˜å°è¦å¾—ç•¶ï¼Œæ‰èƒ½æˆåŠŸã€‚' },
            '87': { name: 'åœ°å±±è¬™', description: 'è¬™è¬™å›å­', interpretation: 'è¬™å¦è±¡å¾µè¬™è™›ã€è¬™éœã€‚æ­¤å¦å¤§å‰ï¼Œè¬™è™›ä½¿äººé€²æ­¥ã€‚ä¿æŒè¬™éœæ…‹åº¦ï¼Œäº‹äº‹é †åˆ©ã€‚' },
            '88': { name: 'å¤ç‚ºåœ°', description: 'åœ°å‹¢å¤é †', interpretation: 'å¤å¦ä»£è¡¨é †å¾ã€åŒ…å®¹ã€‚ä»¥æŸ”é †çš„æ…‹åº¦è™•äº‹ï¼Œé †æ‡‰å½¢å‹¢ã€‚ä¸çˆ­è€Œå–„å‹ï¼ŒæŸ”èƒ½å…‹å‰›ã€‚' }
        };

        // ç²å–å¦è±¡
        function getHexagramData(upper, lower) {
            const key = upper.toString() + lower.toString();
            return hexagrams[key] || { name: 'æœªçŸ¥å¦', description: 'å¾…è§£', interpretation: 'æ­¤å¦æš«ç„¡è§£é‡‹' };
        }

        // ç¹ªè£½å¦è±¡
        function drawHexagram(containerId, lines) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            // å¾ä¸‹å¾€ä¸Šç•«ï¼ˆç¬¬ä¸€çˆ»åœ¨æœ€ä¸‹é¢ï¼‰
            for (let i = lines.length - 1; i >= 0; i--) {
                const line = document.createElement('div');
                line.className = lines[i] === 1 ? 'line' : 'line broken';
                container.appendChild(line);
            }
        }

        // æ ¹æ“šæ•¸å­—ç²å–å¦è±¡ç·šæ¢
        function getTrigramLines(num) {
            const lines = [
                [1, 1, 1], // ä¹¾ 1
                [0, 1, 1], // å…Œ 2
                [1, 0, 1], // é›¢ 3
                [0, 0, 1], // éœ‡ 4
                [1, 1, 0], // å·½ 5
                [0, 1, 0], // å 6
                [1, 0, 0], // è‰® 7
                [0, 0, 0]  // å¤ 8
            ];
            return lines[num - 1];
        }

        // æ™‚é–“èµ·å¦
        function divinateByTime() {
            const question = document.getElementById('question1').value;
            if (!question.trim()) {
                alert('è«‹è¼¸å…¥æ‚¨æƒ³å•çš„å•é¡Œï¼');
                return;
            }

            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const day = now.getDate();
            const hour = now.getHours();
            const minute = now.getMinutes();

            // è¨ˆç®—ä¸Šå¦ï¼š(å¹´ + æœˆ + æ—¥) % 8
            const upperNum = ((year + month + day) % 8) || 8;
            
            // è¨ˆç®—ä¸‹å¦ï¼š(å¹´ + æœˆ + æ—¥ + æ™‚) % 8
            const lowerNum = ((year + month + day + hour) % 8) || 8;
            
            // è¨ˆç®—å‹•çˆ»ï¼š(å¹´ + æœˆ + æ—¥ + æ™‚) % 6
            const changingLine = ((year + month + day + hour) % 6) || 6;

            displayResult(upperNum, lowerNum, changingLine, question, 
                `èµ·å¦æ™‚é–“ï¼š${year}å¹´${month}æœˆ${day}æ—¥ ${hour}æ™‚${minute}åˆ†`);
        }

        // æ•¸å­—èµ·å¦
        function divinateByNumber() {
            const question = document.getElementById('question2').value;
            const num1 = parseInt(document.getElementById('number1').value);
            const num2 = parseInt(document.getElementById('number2').value);

            if (!question.trim()) {
                alert('è«‹è¼¸å…¥æ‚¨æƒ³å•çš„å•é¡Œï¼');
                return;
            }

            if (!num1 || !num2 || num1 < 1 || num1 > 100 || num2 < 1 || num2 > 100) {
                alert('è«‹è¼¸å…¥1-100ä¹‹é–“çš„æ•¸å­—ï¼');
                return;
            }

            const upperNum = (num1 % 8) || 8;
            const lowerNum = (num2 % 8) || 8;
            const changingLine = ((num1 + num2) % 6) || 6;

            displayResult(upperNum, lowerNum, changingLine, question, 
                `å ±æ•¸èµ·å¦ï¼š${num1}ã€${num2}`);
        }

        // å•äº‹èµ·å¦
        function divinateByQuestion() {
            const question = document.getElementById('question3').value;
            
            if (!question.trim()) {
                alert('è«‹è¼¸å…¥æ‚¨æƒ³å•çš„å•é¡Œï¼');
                return;
            }

            const charCount = question.length;
            const upperNum = (charCount % 8) || 8;
            const lowerNum = ((charCount + new Date().getHours()) % 8) || 8;
            const changingLine = ((charCount + new Date().getMinutes()) % 6) || 6;

            displayResult(upperNum, lowerNum, changingLine, question, 
                `å•äº‹èµ·å¦ï¼šå•é¡Œå…±${charCount}å­—`);
        }

        // é¡¯ç¤ºçµæœ
        function displayResult(upperNum, lowerNum, changingLine, question, method) {
            // ç²å–å¦è±¡æ•¸æ“š
            const upperTrigram = trigrams[upperNum];
            const lowerTrigram = trigrams[lowerNum];
            const hexagram = getHexagramData(upperNum, lowerNum);

            // ç¹ªè£½æœ¬å¦
            const upperLines = getTrigramLines(upperNum);
            const lowerLines = getTrigramLines(lowerNum);
            const allLines = [...lowerLines, ...upperLines];
            drawHexagram('originalHexagram', allLines);

            // è¨­ç½®æœ¬å¦ä¿¡æ¯
            document.getElementById('originalName').textContent = hexagram.name;
            document.getElementById('originalInfo').textContent = 
                `ä¸Šå¦ï¼š${upperTrigram.symbol}${upperTrigram.name}ï¼ˆ${upperTrigram.nature}ï¼‰\nä¸‹å¦ï¼š${lowerTrigram.symbol}${lowerTrigram.name}ï¼ˆ${lowerTrigram.nature}ï¼‰`;

            // è¨ˆç®—è®Šå¦
            const changedLines = [...allLines];
            changedLines[changingLine - 1] = changedLines[changingLine - 1] === 1 ? 0 : 1;
            
            // é‡æ–°è¨ˆç®—è®Šå¦çš„ä¸Šä¸‹å¦
            const changedLowerLines = changedLines.slice(0, 3);
            const changedUpperLines = changedLines.slice(3, 6);
            
            let changedUpperNum = 0, changedLowerNum = 0;
            
            // æ‰¾å‡ºè®Šå¦å°æ‡‰çš„å¦æ•¸
            for (let i = 1; i <= 8; i++) {
                const lines = getTrigramLines(i);
                if (JSON.stringify(lines) === JSON.stringify(changedUpperLines)) {
                    changedUpperNum = i;
                }
                if (JSON.stringify(lines) === JSON.stringify(changedLowerLines)) {
                    changedLowerNum = i;
                }
            }

            const changedHexagram = getHexagramData(changedUpperNum, changedLowerNum);
            const changedUpperTrigram = trigrams[changedUpperNum];
            const changedLowerTrigram = trigrams[changedLowerNum];

            // é¡¯ç¤ºè®Šå¦
            document.getElementById('changedHexagramContainer').style.display = 'block';
            drawHexagram('changedHexagram', changedLines);
            document.getElementById('changedName').textContent = changedHexagram.name;
            document.getElementById('changedInfo').textContent = 
                `ä¸Šå¦ï¼š${changedUpperTrigram.symbol}${changedUpperTrigram.name}ï¼ˆ${changedUpperTrigram.nature}ï¼‰\nä¸‹å¦ï¼š${changedLowerTrigram.symbol}${changedLowerTrigram.name}ï¼ˆ${changedLowerTrigram.nature}ï¼‰`;

            // é¡¯ç¤ºå åœä¿¡æ¯
            document.getElementById('divinationInfo').innerHTML = `
                <strong>å•é¡Œï¼š</strong>${question}<br>
                <strong>èµ·å¦æ–¹å¼ï¼š</strong>${method}<br>
                <strong>å‹•çˆ»ï¼š</strong>ç¬¬${changingLine}çˆ»
            `;

            // é¡¯ç¤ºè§£é‡‹
            const yaoNames = ['åˆ', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'ä¸Š'];
            document.getElementById('interpretation').innerHTML = `
                <h3>ğŸŒ¸ å¦è±¡è§£æ</h3>
                
                <h4>æœ¬å¦ï¼š${hexagram.name}</h4>
                <p><strong>å¦è¾­ï¼š</strong>${hexagram.description}</p>
                <p>${hexagram.interpretation}</p>

                <h4>å‹•çˆ»ï¼š${yaoNames[changingLine - 1]}çˆ»</h4>
                <p>ç¬¬${changingLine}çˆ»ç™¼å‹•ï¼Œè¡¨ç¤ºæ­¤è™•æœ‰è®ŠåŒ–ä¹‹è±¡ã€‚äº‹æƒ…çš„ç™¼å±•å°‡æœè‘—è®Šå¦çš„æ–¹å‘æ¼”è®Šã€‚</p>

                <h4>è®Šå¦ï¼š${changedHexagram.name}</h4>
                <p><strong>å¦è¾­ï¼š</strong>${changedHexagram.description}</p>
                <p>${changedHexagram.interpretation}</p>

                <h4>ç¶œåˆåˆ¤æ–·</h4>
                <p>æœ¬å¦${hexagram.name}ä»£è¡¨ç•¶å‰çš„ç‹€æ³ï¼Œè€Œè®Šå¦${changedHexagram.name}å‰‡é ç¤ºæœªä¾†çš„ç™¼å±•è¶¨å‹¢ã€‚</p>
                <p>é‡å°æ‚¨çš„å•é¡Œã€Œ${question}ã€ï¼Œå»ºè­°æ‚¨çµåˆæœ¬å¦èˆ‡è®Šå¦çš„å«ç¾©ä¾†ç†è§£ç•¶å‰å½¢å‹¢èˆ‡æœªä¾†èµ°å‘ã€‚</p>
                <p style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.2); color: #ffd700;">
                    â­ å åœå»ºè­°ï¼šæ˜“ç¶“ä¹‹é“åœ¨æ–¼è®ŠåŒ–ï¼Œé †æ‡‰è‡ªç„¶ï¼Œæ–¹èƒ½è¶¨å‰é¿å‡¶ã€‚å»ºè­°æ‚¨æ ¹æ“šå¦è±¡æŒ‡å¼•ï¼Œå¯©æ™‚åº¦å‹¢ï¼Œåšå‡ºæ˜æ™ºæ±ºç­–ã€‚
                </p>
            `;

            // é¡¯ç¤ºçµæœå€åŸŸä¸¦æ»¾å‹•
            document.getElementById('resultSection').classList.add('show');
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }

        // é é¢åŠ è¼‰æ™‚åˆå§‹åŒ–
        window.addEventListener('load', function() {
            createStars();
        });
    </script>
<script src="../mobile-nav.js"></script>
</body>
</html>
