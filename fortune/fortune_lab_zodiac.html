<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ğŸŒŒ Culaliya Mystic Lab | å‘½ç›¤å…¨å±•é–‹ v5</title>
<style>
body {
  margin: 0;
  font-family: 'Noto Sans TC', sans-serif;
  background: radial-gradient(circle at 50% 20%, #08061a 0%, #0e0828 70%, #000 100%);
  color: #fff;
  text-align: center;
  min-height: 100vh;
}
h1 {
  margin-top: 40px;
  color: #ffd700;
  text-shadow: 0 0 20px #ffb347, 0 0 40px #ffd700;
}
.container {
  width: min(90%, 900px);
  margin: 40px auto;
  padding: 20px;
  background: rgba(20, 10, 40, 0.85);
  border: 1px solid rgba(255,215,0,0.3);
  border-radius: 18px;
  box-shadow: 0 0 40px rgba(255,215,0,0.2);
  backdrop-filter: blur(8px);
}
input, button {
  width: 90%;
  max-width: 400px;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid #ffb347;
  font-size: 1em;
  background: rgba(255,255,255,0.05);
  color: #fff;
  margin-bottom: 10px;
}
button {
  cursor: pointer;
  background: linear-gradient(45deg,#5a2ad8,#8a4af8);
  border: none;
  color: #fff;
  font-weight: bold;
  transition: all 0.3s;
  box-shadow: 0 0 20px rgba(106,42,216,0.4);
}
button:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 35px rgba(255,215,0,0.7);
}
canvas {
  margin-top: 30px;
  background: rgba(255,255,255,0.05);
  border-radius: 50%;
  box-shadow: 0 0 30px rgba(255,215,0,0.25);
}
.result {
  margin-top: 30px;
  text-align: left;
  background: rgba(255,255,255,0.05);
  border-radius: 10px;
  padding: 15px;
}
.loader {
  margin: 20px auto;
  border: 4px solid rgba(255,255,255,0.1);
  border-top: 4px solid #ffd700;
  border-radius: 50%;
  width: 36px;
  height: 36px;
  animation: spin 1s linear infinite;
}
@keyframes spin {100%{transform:rotate(360deg)}}
</style>
</head>
<body>
<h1>ğŸŒŒ Culaliya Mystic Lab å‘½ç›¤å…¨å±•é–‹ v5</h1>
<div class="container">
  <label>å‡ºç”Ÿæ—¥æœŸ</label>
  <input type="date" id="birthDate">
  <label>å‡ºç”Ÿæ™‚é–“</label>
  <input type="time" id="birthTime">
  <label>å‡ºç”Ÿåœ°é»ï¼ˆåŸå¸‚ï¼‰</label>
  <input type="text" id="birthPlace" placeholder="ä¾‹å¦‚ï¼šTaipei">
  <button id="generateBtn">âœ¨ ç”Ÿæˆå‘½ç›¤</button>
  <div id="loading"></div>
  <canvas id="chart" width="500" height="500"></canvas>
  <div class="result" id="result"></div>
</div>

<script>
// ğŸŒ é›¢ç·šæ˜Ÿåº§é‚è¼¯
const zodiac = [
  ["æ‘©ç¾¯åº§", [12,22,1,19]],
  ["æ°´ç“¶åº§", [1,20,2,18]],
  ["é›™é­šåº§", [2,19,3,20]],
  ["ç‰¡ç¾Šåº§", [3,21,4,19]],
  ["é‡‘ç‰›åº§", [4,20,5,20]],
  ["é›™å­åº§", [5,21,6,20]],
  ["å·¨èŸ¹åº§", [6,21,7,22]],
  ["ç…å­åº§", [7,23,8,22]],
  ["è™•å¥³åº§", [8,23,9,22]],
  ["å¤©ç§¤åº§", [9,23,10,22]],
  ["å¤©è åº§", [10,23,11,21]],
  ["å°„æ‰‹åº§", [11,22,12,21]]
];

function getZodiac(month,day){
  for(let [sign,[sm,sd,em,ed]] of zodiac){
    if((month===sm && day>=sd)||(month===em && day<=ed)) return sign;
  }
  return "æœªçŸ¥";
}

// ğŸŒ æœˆäº®èˆ‡ä¸Šå‡æ¨¡æ“¬
function fakeMoon(sign){
  const list = ["é›™é­šåº§","ç‰¡ç¾Šåº§","é‡‘ç‰›åº§","é›™å­åº§","å·¨èŸ¹åº§","ç…å­åº§","è™•å¥³åº§","å¤©ç§¤åº§","å¤©è åº§","å°„æ‰‹åº§","æ‘©ç¾¯åº§","æ°´ç“¶åº§"];
  return list[(list.indexOf(sign)+2)%12];
}
function fakeRising(sign){
  const list = ["é›™é­šåº§","ç‰¡ç¾Šåº§","é‡‘ç‰›åº§","é›™å­åº§","å·¨èŸ¹åº§","ç…å­åº§","è™•å¥³åº§","å¤©ç§¤åº§","å¤©è åº§","å°„æ‰‹åº§","æ‘©ç¾¯åº§","æ°´ç“¶åº§"];
  return list[(list.indexOf(sign)+4)%12];
}

// ğŸ´ ç•«æ˜Ÿç›¤
function drawChart(ctx){
  const cx=250,cy=250,r=200;
  ctx.clearRect(0,0,500,500);
  ctx.beginPath();
  ctx.arc(cx,cy,r,0,2*Math.PI);
  ctx.strokeStyle="#ffd700";
  ctx.lineWidth=2;
  ctx.stroke();
  for(let i=0;i<12;i++){
    const angle=(i*30)*Math.PI/180;
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.lineTo(cx+r*Math.cos(angle),cy+r*Math.sin(angle));
    ctx.strokeStyle="rgba(255,255,255,0.2)";
    ctx.stroke();
  }
}

// ğŸ§¿ ä»Šæ—¥é‹å‹¢ï¼ˆéš¨æ—¥æœŸç”Ÿæˆï¼‰
function getDaily(sign){
  const seed = new Date().getDate() + sign.length;
  const mood = ["å¤§å‰âœ¨","ä¸­å‰ğŸŒ™","å¹³é †â˜€ï¸","å°æ³¢å‹•ğŸŒŠ","æ³¨æ„âš¡"];
  const msg = [
    "ä»Šå¤©é©åˆå°ˆæ³¨æ–¼è‡ªå·±ï¼Œè®“å¿ƒéˆæ²‰æ¾±ã€‚",
    "æœ‰æ–°çš„éˆæ„Ÿèˆ‡å‰µæ„é–ƒç¾ï¼Œå‹‡æ•¢å±•ç¾è‡ªæˆ‘ã€‚",
    "æ³¨æ„æƒ…ç·’èµ·ä¼ï¼Œé¿å…èˆ‡äººçˆ­è«–ã€‚",
    "è²´äººå‡ºç¾æ–¼æ„æ–™ä¹‹å¤–çš„åœ°æ–¹ã€‚",
    "è¡Œå‹•åŠ›æå‡ï¼Œæ˜¯çªç ´ç“¶é ¸çš„å¥½æ™‚æ©Ÿã€‚"
  ];
  const index = seed % mood.length;
  return `${mood[index]} ${msg[index]}`;
}

// âœ¨ ä¸»ç¨‹å¼
document.getElementById("generateBtn").addEventListener("click", async ()=>{
  const date=document.getElementById("birthDate").value;
  const time=document.getElementById("birthTime").value;
  const place=document.getElementById("birthPlace").value||"æœªçŸ¥åœ°é»";
  const loading=document.getElementById("loading");
  const result=document.getElementById("result");
  const ctx=document.getElementById("chart").getContext("2d");
  if(!date){alert("è«‹è¼¸å…¥å‡ºç”Ÿæ—¥æœŸï¼");return;}

  loading.innerHTML='<div class="loader"></div><p>â³ æ­£åœ¨ç”Ÿæˆå‘½ç›¤...</p>';
  result.innerHTML='';
  drawChart(ctx);

  const [y,m,d]=date.split("-").map(Number);
  const sign = getZodiac(m,d);
  const moon = fakeMoon(sign);
  const rising = fakeRising(sign);

  loading.innerHTML='';
  result.innerHTML = `
    <h3>â˜€ï¸ å¤ªé™½æ˜Ÿåº§</h3><p>${sign}</p>
    <h3>ğŸŒ™ æœˆäº®æ˜Ÿåº§</h3><p>${moon}</p>
    <h3>â¬†ï¸ ä¸Šå‡æ˜Ÿåº§</h3><p>${rising}</p>
    <h3>ğŸ”® ä»Šæ—¥é‹å‹¢</h3><p>${getDaily(sign)}</p>
    <h3>ğŸ“ å‡ºç”Ÿåœ°é»</h3><p>${place}</p>
  `;
});
</script>
</body>
</html>
