<!DOCTYPE html>
<html lang="zh-Hant">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Culaliya's AI Art Diary ğŸŒŒ</title>

  <!-- ===== ç¶²ç«™å°ç¸®åœ– (Favicon) è¨­å®š ===== -->
  <link rel="icon" href="/assets/blackcat.png?v=3" type="image/png">
  <link rel="shortcut icon" href="/assets/blackcat.png?v=3" type="image/png">
  <link rel="apple-touch-icon" href="/assets/blackcat.png?v=3">

  <!-- ===== SEO (æœå°‹å¼•æ“å„ªåŒ–) è¨­å®š ===== -->
  <meta name="description"
    content="Culaliya çš„å‰µæ„å¯¦é©—å®¤èˆ‡ä½œå“é›†ã€‚æ¢ç´¢ iOS App ä½œå“ï¼ˆèŒ¶èª Tea Mindã€å–µèªå­¸é™¢ã€æ˜Ÿè¿´ç­‰ï¼‰ã€AI ç”Ÿæˆè—è¡“ã€ä»¥åŠçµåˆç§‘æŠ€èˆ‡éˆæ€§çš„æ•¸ä½å‰µä½œæ—¥è¨˜ã€‚Where algorithm meets intuition." />
  <meta name="keywords"
    content="Culaliya, AI Art, iOS App, èŒ¶èª Tea Mind, å–µèªå­¸é™¢, Starveil Match, ç¨ç«‹é–‹ç™¼, ç”Ÿæˆå¼è—è¡“, ç™‚ç™’éŠæˆ², ç¨‹å¼æ•™å­¸, éˆæ€§ç§‘æŠ€, Swift, ç¨ç«‹é–‹ç™¼è€…" />
  <meta name="author" content="Culaliya" />

  <!-- Open Graph / Facebook / LINE -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://ai-art-diary.vercel.app/" />
  <meta property="og:title" content="Culaliya's AI Art Diary ğŸŒŒ | å‰µæ„èˆ‡ç§‘æŠ€çš„å¯¦é©—å®¤" />
  <meta property="og:description" content="é€™è£¡ç´€éŒ„äº†æˆ‘çš„ iOS App ä½œå“ã€AI è—è¡“å‰µä½œèˆ‡ç¨‹å¼å¯¦é©—ã€‚æ­¡è¿ä¾†åˆ°æ¼”ç®—æ³•èˆ‡ç›´è¦ºäº¤ç¹”çš„å®‡å®™ã€‚" />
  <meta property="og:image" content="https://ai-art-diary.vercel.app/assets/blackcat.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Culaliya's AI Art Diary ğŸŒŒ" />
  <meta name="twitter:description" content="æ¢ç´¢ iOS App ä½œå“èˆ‡ AI è—è¡“å‰µä½œã€‚Where algorithm meets intuition." />
  <meta name="twitter:image" content="https://ai-art-diary.vercel.app/assets/blackcat.png" />

  <style>
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      color: #fff;
      overflow-x: hidden;
      background: #000;
      position: relative;
      cursor: none;
    }

    h1 {
      font-size: 3em;
      color: #0ff;
      text-shadow: 0 0 20px #0ff;
      animation: glow 3s ease-in-out infinite alternate;
      margin: 0 0 12px 0;
    }

    @keyframes glow {
      from {
        text-shadow: 0 0 10px #0ff;
      }

      to {
        text-shadow: 0 0 25px #ff3eff;
      }
    }

    h2 {
      color: #ff3eff;
      margin-bottom: 16px;
    }

    section {
      max-width: 1000px;
      margin: auto;
      padding: 40px 20px;
    }

    #particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
      background: #000;
    }

    /* ===== é˜²å›å­è¨­å®šï¼šåœ–ç‰‡ç¦æ­¢æ‹–æ›³èˆ‡é¸å– ===== */
    img {
      -webkit-user-drag: none;
      -khtml-user-drag: none;
      -moz-user-drag: none;
      -o-user-drag: none;
      user-drag: none;
      pointer-events: auto;
    }

    /* ===== æ»‘é¼ è·Ÿéš¨ç‰¹æ•ˆ ===== */
    #cursor {
      position: fixed;
      width: 20px;
      height: 20px;
      border: 2px solid #0ff;
      border-radius: 50%;
      pointer-events: none;
      z-index: 9999;
      transition: transform 0.1s ease;
      box-shadow: 0 0 20px #0ff, inset 0 0 10px #0ff;
    }

    #cursor-trail {
      position: fixed;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 9998;
    }

    .rainbow-trail {
      position: fixed;
      width: 15px;
      height: 15px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 9997;
      animation: fadeOut 1s ease-out forwards;
    }

    @keyframes fadeOut {
      to {
        opacity: 0;
        transform: scale(2);
      }
    }

    .button {
      display: inline-block;
      padding: 8px 16px;
      border: 1px solid #0ff;
      color: #0ff;
      border-radius: 6px;
      text-decoration: none;
      transition: .2s;
      cursor: pointer;
      background: transparent;
      font-size: 14px;
    }

    .button:hover {
      background: #0ff;
      color: #000;
      transform: scale(1.05);
    }

    .media-flex {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
    }

    .video-container {
      flex: 2;
      min-width: 300px;
      aspect-ratio: 16/9;
    }

    .spotify-container {
      flex: 1;
      min-width: 300px;
    }

    .video-container iframe,
    .spotify-container iframe {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 12px;
    }

    /* ===== Gallery è¼ªæ’­ ===== */
    .slideshow-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: auto;
    }

    .slide {
      display: none;
      width: 100%;
      border-radius: 12px;
      box-shadow: 0 0 20px #0ff5;
    }

    .slide-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 255, 255, 0.3);
      color: #0ff;
      border: 2px solid #0ff;
      font-size: 24px;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 6px;
      transition: all 0.3s;
      z-index: 10;
    }

    .slide-btn:hover {
      background: rgba(0, 255, 255, 0.6);
      box-shadow: 0 0 15px #0ff;
    }

    .slide-btn.prev {
      left: 10px;
    }

    .slide-btn.next {
      right: 10px;
    }

    .dot {
      display: inline-block;
      width: 12px;
      height: 12px;
      margin: 0 5px;
      background: #0ff3;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s;
    }

    .dot:hover,
    .dot.active {
      background: #0ff;
      box-shadow: 0 0 10px #0ff;
    }

    .ripple {
      position: fixed;
      border-radius: 50%;
      pointer-events: none;
      border: 2px solid #0ff;
      animation: ripple 0.6s ease-out;
    }

    @keyframes ripple {
      from {
        transform: scale(0);
        opacity: 0.8;
      }

      to {
        transform: scale(10);
        opacity: 0;
      }
    }

    /* ===== Hero / Inspiration ===== */
    #hero {
      text-align: center;
      padding: 60px 20px 30px;
    }

    #weather-quote {
      text-align: center;
      margin-top: 10px;
      color: #aaf;
      font-size: 1em;
    }

    #inspiration-bar {
      text-align: center;
      margin-top: 12px;
      color: #0ff;
      font-size: 1.1em;
      opacity: 0;
      transition: opacity 1.2s ease-in-out;
    }

    /* ===== Now Updated Banner (A) ===== */
    #app-updates,
    #update-announcement {
      max-width: 1000px;
      margin: 0 auto 10px;
      padding: 0 20px 10px;
      text-align: center;
    }

    .update-card {
      display: inline-block;
      padding: 14px 16px;
      border-radius: 14px;
      border: 1px solid rgba(0, 255, 255, .25);
      background: rgba(0, 255, 255, .06);
      box-shadow: 0 0 22px rgba(0, 255, 255, .12);
      backdrop-filter: blur(10px);
      text-align: left;
    }

    .update-title {
      font-weight: 800;
      color: #0ff;
      letter-spacing: .5px;
      margin: 0 0 6px 0;
    }

    .update-text {
      margin: 0;
      color: #cfe;
      opacity: .95;
      text-align: left;
    }

    .update-link {
      color: #0ff;
      text-decoration: none;
    }

    .update-link:hover {
      text-decoration: underline;
    }

    /* ===== Coming Soon é å‘Šå€ ===== */
    #coming-soon {
      max-width: 1000px;
      margin: 0 auto 10px;
      padding: 0 20px 10px;
      text-align: center;
    }

    .coming-soon-card {
      display: inline-block;
      padding: 14px 20px;
      border-radius: 14px;
      border: 1px solid rgba(255, 62, 255, .3);
      background: linear-gradient(135deg, rgba(138, 43, 226, .1), rgba(255, 62, 255, .08));
      box-shadow: 0 0 22px rgba(255, 62, 255, .15);
      backdrop-filter: blur(10px);
      animation: comingSoonPulse 3s ease-in-out infinite;
    }

    @keyframes comingSoonPulse {

      0%,
      100% {
        box-shadow: 0 0 22px rgba(255, 62, 255, .15);
      }

      50% {
        box-shadow: 0 0 35px rgba(255, 62, 255, .3);
      }
    }

    .coming-soon-title {
      font-weight: 800;
      color: #ff3eff;
      letter-spacing: .5px;
      margin: 0 0 8px 0;
    }

    .coming-soon-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      margin: 0;
      padding: 0;
      list-style: none;
    }

    .coming-soon-item {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 14px;
      background: rgba(255, 255, 255, .05);
      border: 1px solid rgba(255, 62, 255, .25);
      border-radius: 20px;
      color: #eaf;
      font-size: 0.9em;
      transition: all 0.3s;
    }

    .coming-soon-item:hover {
      background: rgba(255, 62, 255, .15);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(255, 62, 255, .2);
    }

    .coming-soon-item .emoji {
      font-size: 1.1em;
    }

    /* ===== å¯¦é©—å®¤æŒ‰éˆ•åˆ— ===== */
    .lab-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 18px;
      flex-wrap: wrap;
    }

    .lab-btn {
      display: inline-block;
      padding: 12px 20px;
      border-radius: 25px;
      font-weight: bold;
      color: #fff;
      text-decoration: none;
      transition: 0.3s;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
    }

    .lab-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px #fff;
    }

    .lab-btn.pink {
      background: linear-gradient(135deg, #ff3eff, #ff00aa);
    }

    .lab-btn.purple {
      background: linear-gradient(135deg, #8a2be2, #ff3eff);
    }

    .lab-btn.blue {
      background: linear-gradient(135deg, #00e0ff, #008cff);
    }

    .lab-btn.green {
      background: linear-gradient(135deg, #00ff88, #00cc99);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
    }

    .lab-btn.green:hover {
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.6);
    }

    /* ===== è¶…ç´šå°è©±æ¡† ===== */
    #chatContainer {
      max-width: 800px;
      margin: 30px auto;
      background: rgba(0, 255, 255, 0.05);
      border: 2px solid #0ff;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
    }

    #chatHistory {
      height: 300px;
      overflow-y: auto;
      margin-bottom: 20px;
      padding: 15px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 12px;
      border: 1px solid #0ff3;
    }

    #chatHistory::-webkit-scrollbar {
      width: 8px;
    }

    #chatHistory::-webkit-scrollbar-track {
      background: rgba(0, 255, 255, 0.1);
      border-radius: 4px;
    }

    #chatHistory::-webkit-scrollbar-thumb {
      background: #0ff;
      border-radius: 4px;
    }

    .message {
      margin: 15px 0;
      display: flex;
      align-items: flex-start;
      animation: messageSlideIn 0.3s ease-out;
    }

    @keyframes messageSlideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .message.user {
      justify-content: flex-end;
    }

    .message.ai {
      justify-content: flex-start;
    }

    .message-bubble {
      max-width: 70%;
      padding: 12px 16px;
      border-radius: 18px;
      position: relative;
      word-wrap: break-word;
    }

    .message.user .message-bubble {
      background: linear-gradient(135deg, #0ff, #00d4ff);
      color: #000;
      border-bottom-right-radius: 4px;
    }

    .message.ai .message-bubble {
      background: rgba(255, 62, 255, 0.2);
      border: 1px solid #ff3eff;
      color: #fff;
      border-bottom-left-radius: 4px;
    }

    .message-avatar {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin: 0 10px;
      border: 2px solid #0ff;
      box-shadow: 0 0 10px #0ff;
    }

    .message.user .message-avatar {
      order: 2;
    }

    .typing-indicator {
      display: none;
      padding: 10px 16px;
    }

    .typing-indicator span {
      display: inline-block;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #0ff;
      margin: 0 3px;
      animation: typing 1.4s infinite;
    }

    .typing-indicator span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-indicator span:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes typing {

      0%,
      60%,
      100% {
        transform: translateY(0);
      }

      30% {
        transform: translateY(-10px);
      }
    }

    #chatInputArea {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }

    #catInput {
      flex: 1;
      padding: 12px 16px;
      border-radius: 25px;
      border: 2px solid #0ff;
      background: rgba(0, 0, 0, 0.5);
      color: #0ff;
      font-size: 14px;
      outline: none;
      transition: all 0.3s;
    }

    #catInput:focus {
      box-shadow: 0 0 15px #0ff;
      background: rgba(0, 0, 0, 0.7);
    }

    #sendBtn {
      padding: 12px 24px;
      background: linear-gradient(135deg, #0ff, #00d4ff);
      border: none;
      border-radius: 25px;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }

    #sendBtn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px #0ff;
    }

    #quickQuestions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }

    .quick-btn {
      padding: 6px 12px;
      background: rgba(0, 255, 255, 0.1);
      border: 1px solid #0ff;
      border-radius: 15px;
      color: #0ff;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s;
    }

    .quick-btn:hover {
      background: rgba(0, 255, 255, 0.3);
      transform: translateY(-2px);
    }

    #chatControls {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    #catMood {
      font-size: 12px;
      color: #0ff;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    #moodIcon {
      font-size: 20px;
      animation: bounce 2s ease-in-out infinite;
    }

    @keyframes bounce {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-5px);
      }
    }

    #clearChat {
      padding: 6px 12px;
      background: rgba(255, 62, 255, 0.2);
      border: 1px solid #ff3eff;
      border-radius: 15px;
      color: #ff3eff;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s;
    }

    #clearChat:hover {
      background: rgba(255, 62, 255, 0.4);
    }

    /* è²“å’ªå‹•ç•« */
    #memeCat {
      animation: float 4s ease-in-out infinite alternate;
      cursor: pointer;
      transition: transform 0.3s ease;
      width: 120px;
      border-radius: 50%;
      box-shadow: 0 0 20px #0ff;
    }

    @keyframes float {
      from {
        transform: translateY(0px);
      }

      to {
        transform: translateY(-10px);
      }
    }

    #memeCat:hover {
      animation: shake 0.5s ease-in-out infinite, float 4s ease-in-out infinite alternate;
    }

    @keyframes shake {

      0%,
      100% {
        transform: translateY(0) rotate(0deg);
      }

      25% {
        transform: translateY(-5px) rotate(-5deg);
      }

      75% {
        transform: translateY(-5px) rotate(5deg);
      }
    }

    /* èƒŒæ™¯éŸ³æ¨‚æŒ‰éˆ• */
    #bgm-control {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      background: rgba(0, 255, 255, 0.2);
      border: 2px solid #0ff;
      color: #0ff;
      padding: 10px 15px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 24px;
      transition: all 0.3s;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #bgm-control:hover {
      background: rgba(0, 255, 255, 0.4);
      box-shadow: 0 0 20px #0ff;
      transform: scale(1.1);
    }

    #bgm-control.playing {
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        box-shadow: 0 0 10px #0ff;
      }

      50% {
        box-shadow: 0 0 25px #0ff, 0 0 40px #0ff;
      }
    }

    /* ===== Appsï¼šä¸‰æ¬„å›ºå®šå°é½Šï¼ˆé—œéµä¿®æ­£ï¼‰ ===== */
    .app-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .app-card {
      display: grid;
      grid-template-columns: 96px 1fr auto;
      align-items: center;
      gap: 18px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid #0ff3;
      border-radius: 12px;
      padding: 20px;
      transition: transform .3s, box-shadow .3s;
      position: relative;
    }

    .app-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 25px #0ff;
    }

    .app-image {
      width: 96px;
      height: 96px;
      border-radius: 16px;
      object-fit: cover;
    }

    .app-info {
      min-width: 0;
    }

    .app-info h3 {
      margin: 0 0 6px 0;
      color: #0ff;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .app-info p {
      color: #ccc;
      margin: 0 0 6px 0;
      line-height: 1.45;
      word-break: break-word;
    }

    .app-meta {
      color: #aaa;
      font-size: 0.85em;
      margin-top: 6px;
    }

    .app-actions {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      min-width: 120px;
    }

    /* ===== éš±ç§åŒæ„æ©«å¹… (Consent Banner) ===== */
    #consent-banner {
      display: none;
      /* é è¨­éš±è—ï¼Œç”± JS æ§åˆ¶é¡¯ç¤º */
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.9);
      border-top: 1px solid #0ff;
      padding: 15px 20px;
      z-index: 10000;
      box-shadow: 0 -5px 20px rgba(0, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      text-align: center;
    }

    .consent-content {
      max-width: 800px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 15px;
    }

    .consent-text {
      color: #ccc;
      font-size: 0.9em;
      text-align: left;
      flex: 1;
      min-width: 250px;
    }

    .consent-actions {
      display: flex;
      gap: 10px;
    }

    .consent-btn {
      padding: 8px 20px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.9em;
      transition: all 0.3s;
      font-weight: bold;
    }

    .consent-agree {
      background: linear-gradient(135deg, #0ff, #008cff);
      color: #000;
      border: none;
      box-shadow: 0 0 10px #0ff;
    }

    .consent-agree:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px #0ff;
    }

    .consent-decline {
      background: transparent;
      color: #888;
      border: 1px solid #555;
    }

    .consent-decline:hover {
      color: #fff;
      border-color: #fff;
    }

    /* ===== æ‰‹æ©Ÿç‰ˆ ===== */
    @media (max-width: 768px) {
      h1 {
        font-size: 2.5em;
        padding: 0 15px;
      }

      #hero {
        padding: 46px 15px 24px;
      }

      section {
        padding: 30px 15px;
      }

      h2 {
        font-size: 1.5em;
        text-align: center;
      }

      .lab-buttons {
        flex-direction: column;
        gap: 12px;
        padding: 0 20px;
        margin-top: 16px;
      }

      .lab-btn {
        width: 100%;
        text-align: center;
        padding: 14px 20px;
        font-size: 0.95em;
      }

      #chatContainer {
        padding: 15px;
        margin: 20px 10px;
      }

      #chatHistory {
        height: 250px;
        padding: 10px;
      }

      .message-bubble {
        max-width: 85%;
        font-size: 0.9em;
      }

      .message-avatar {
        width: 30px;
        height: 30px;
      }

      #chatInputArea {
        flex-direction: column;
        gap: 8px;
      }

      #sendBtn {
        width: 100%;
        padding: 12px;
      }

      /* Appsï¼šæ‰‹æ©Ÿç›´æ’ */
      .app-card {
        grid-template-columns: 1fr;
        text-align: center;
      }

      .app-image {
        margin: 0 auto;
      }

      .app-actions {
        justify-content: center;
        margin-top: 10px;
      }

      .consent-content {
        flex-direction: column;
        text-align: center;
      }

      .consent-text {
        text-align: center;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 2em;
      }

      #weather-quote {
        font-size: 0.85em;
      }

      #inspiration-bar {
        font-size: 0.95em;
      }

      #chatHistory {
        height: 200px;
      }

      #memeCat {
        width: 80px;
      }

      .app-image {
        width: 72px;
        height: 72px;
      }
    }
  </style>

  <link rel="stylesheet" href="mobile-ui.css">
</head>

<body>
  <canvas id="particles"></canvas>

  <!-- è‡ªè¨‚æ»‘é¼ æ¸¸æ¨™ -->
  <div id="cursor"></div>
  <div id="cursor-trail"></div>

  <!-- èƒŒæ™¯éŸ³æ¨‚æ’­æ”¾å™¨æŒ‰éˆ• -->
  <button id="bgm-control" title="æ’­æ”¾/æš«åœèƒŒæ™¯éŸ³æ¨‚">ğŸµ</button>
  <audio id="bgm" loop>
    <source src="music/background.mp3" type="audio/mpeg">
  </audio>

  <!-- éŸ³æ•ˆå…ƒç´  -->
  <audio id="hover-sound" src="music/hover.mp3"></audio>
  <audio id="click-sound" src="music/click.mp3"></audio>
  <audio id="meow-sound" src="music/meow.mp3"></audio>

  <!-- éš±ç§åŒæ„æ©«å¹… -->
  <div id="consent-banner">
    <div class="consent-content">
      <div class="consent-text">
        ğŸª <strong>éš±ç§æ¬Šå°æé†’</strong><br>
        æˆ‘å€‘ä¸æœƒæ”¶é›†å§“åã€é›»è©±ã€ç²¾ç¢ºåœ°å€ç­‰æ•æ„Ÿè³‡æ–™ã€‚åŒæ„å¾Œæœƒè¨˜éŒ„ IP èˆ‡è£ç½®è³‡è¨Šåšçµ±è¨ˆã€‚è©³è¦‹ <a href="privacy.html" style="color:#0ff;">Privacy Policy</a>ã€‚
      </div>
      <div class="consent-actions">
        <button class="consent-btn consent-decline" onclick="handleConsent(false)">æ‹’çµ• (Decline)</button>
        <button class="consent-btn consent-agree" onclick="handleConsent(true)">åŒæ„ (Agree)</button>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <section id="hero">
    <h1>AI ART DIARY âš¡</h1>
    <p>Where algorithm meets intuition â€” Culaliya's creative & cosmic lab.</p>
    <div id="weather-quote">
      <select id="city-select"
        style="background:rgba(0,0,0,0.5);color:#0ff;border:1px solid #0ff;border-radius:8px;padding:4px 8px;font-size:0.9em;cursor:pointer;">
        <option value="">ğŸŒ é¸æ“‡åŸå¸‚æŸ¥çœ‹å¤©æ°£</option>
        <option value="25.03,121.57">å°åŒ— Taipei</option>
        <option value="22.63,120.30">é«˜é›„ Kaohsiung</option>
        <option value="24.15,120.68">å°ä¸­ Taichung</option>
        <option value="25.13,121.74">åŸºéš† Keelung</option>
        <option value="24.80,121.00">æ–°ç«¹ Hsinchu</option>
        <option value="23.00,120.22">å°å— Tainan</option>
        <option value="35.68,139.69">æ±äº¬ Tokyo</option>
        <option value="37.57,126.98">é¦–çˆ¾ Seoul</option>
        <option value="22.28,114.16">é¦™æ¸¯ Hong Kong</option>
        <option value="1.35,103.82">æ–°åŠ å¡ Singapore</option>
        <option value="40.71,-74.01">ç´ç´„ New York</option>
        <option value="51.51,-0.13">å€«æ•¦ London</option>
        <option value="48.86,2.35">å·´é» Paris</option>
        <option value="-33.87,151.21">é›ªæ¢¨ Sydney</option>
      </select>
      <span id="weather" style="margin-left:10px;"></span>
    </div>
    <div id="inspiration-bar">
      <span id="inspirationText">âœ¨ å•é¡Œä¸æ˜¯ AI æ˜¯å¦æœ‰éˆé­‚ï¼Œè€Œæ˜¯æˆ‘å€‘æ˜¯å¦é‚„ä¿æœ‰æƒ³åƒ âœ¨</span>
    </div>
  </section>

  <!-- ğŸ“± App Updates æ›´æ–°å€ -->
  <section id="app-updates">
    <div class="update-card">
      <p class="update-title">ã€ğŸ“± App Updatesã€‘</p>
      <p class="update-text">ğŸ¾ <a class="update-link"
          href="https://apps.apple.com/us/app/%E5%96%B5%E8%AA%9E%E5%AD%B8%E9%99%A2/id6757230422">å–µèªå­¸é™¢</a>
        v1.1 (2026/02/07)</p>
      <p class="update-text">ğŸˆ <a class="update-link"
          href="https://apps.apple.com/us/app/%E7%81%B0%E8%B2%93%E6%AA%94%E6%A1%88%E5%BA%AB/id6753888547">ç°è²“æª”æ¡ˆåº«</a>
        v1.2 (2026/02/07)</p>
      <p class="update-text">ğŸ§® <a class="update-link"
          href="https://apps.apple.com/tw/app/glassycalc-%E7%8E%BB%E7%92%83%E5%B0%8F%E7%AE%97%E7%9B%A4/id6758384259">GlassyCalc
          ç»ç’ƒå°ç®—ç›¤</a> v1.1 (2026/01/30) â€” å…¨æ–°ä¸Šæ¶ï¼</p>
      <p class="update-text">ğŸŒ™ <a class="update-link"
          href="https://apps.apple.com/us/app/%E5%A4%A2%E5%A2%83%E8%8A%B1%E5%9C%92dreamgarden/id6755881746">DreamGarden
          å¤¢å¢ƒèŠ±åœ’</a> v1.1 (2026/01/29)</p>
      <p class="update-text">ğŸ± <a class="update-link"
          href="https://apps.apple.com/us/app/%E5%96%B5%E5%96%B5%E7%95%AA%E8%8C%84%E9%90%98meowfocus-timer/id6753789886">å–µå–µè•ƒèŒ„é˜</a>
        v1.1 (2026/01/28)</p>
    </div>
  </section>

  <!-- ğŸª§ Now Updated (A) -->
  <section id="update-announcement">
    <div class="update-card">
      <p class="update-title">ã€ğŸª§ Now Updatedã€‘</p>
      <p class="update-text">ğŸ¾ <a class="update-link"
          href="https://apps.apple.com/us/app/%E5%96%B5%E8%AA%9E%E5%AD%B8%E9%99%A2/id6757230422">å–µèªå­¸é™¢ v1.1 å·²æ›´æ–°</a></p>
      <p class="update-text">ğŸˆ <a class="update-link"
          href="https://apps.apple.com/us/app/%E7%81%B0%E8%B2%93%E6%AA%94%E6%A1%88%E5%BA%AB/id6753888547">ç°è²“æª”æ¡ˆåº« v1.2 å·²æ›´æ–°</a></p>
      <p class="update-text"><a class="update-link" href="dark_lab.html">â†’ é€²å…¥æš—é»‘å¯¦é©—å®¤ï¼ˆå¯æ„›ä½†ä¸å°å‹ï¼‰ğŸ‘»</a></p>
    </div>
  </section>

  <!-- å¯¦é©—å®¤æŒ‰éˆ• -->
  <div class="lab-buttons">
    <a href="games.html" class="lab-btn pink">ğŸ® éŠæˆ²å¯¦é©—å®¤</a>
    <a href="fortune_lab.html" class="lab-btn purple">ğŸ”® å‘½ç†å¯¦é©—å®¤</a>
    <a href="music_lab.html" class="lab-btn blue">ğŸ§ éŸ³æ¨‚å¯¦é©—å®¤</a>
    <a href="image_lab.html" class="lab-btn green">ğŸª åœ–åƒå¯¦é©—å®¤</a>
    <a href="dark_lab.html" class="lab-btn pink">ğŸ‘» æš—é»‘å¯¦é©—å®¤</a>
  </div>

  <!-- ===== AI Cosmic Meme Cat ===== -->
  <section id="catSection">
    <h2>ğŸˆâ€â¬› AI Cosmic Meme Cat ğŸŒ</h2>
    <div style="text-align:center; margin-bottom:20px;">
      <img id="memeCat" src="assets/blackcat.png" alt="Meme Cat">
    </div>

    <div id="chatContainer">
      <div id="chatHistory">
        <div class="message ai">
          <img class="message-avatar" src="assets/blackcat.png" alt="Cat">
          <div class="message-bubble">å–µï½æˆ‘æ˜¯å®‡å®™å–µæ˜Ÿäººï¼æœ‰ä»€éº¼æƒ³èŠçš„å—ï¼Ÿ ğŸŒŒâœ¨</div>
        </div>
      </div>

      <div id="quickQuestions">
        <button class="quick-btn" onclick="askQuick('å‘Šè¨´æˆ‘ä¸€å€‹å®‡å®™å†·çŸ¥è­˜')">ğŸŒŒ å®‡å®™å†·çŸ¥è­˜</button>
        <button class="quick-btn" onclick="askQuick('çµ¦æˆ‘ä¸€å€‹å‰µä½œéˆæ„Ÿ')">ğŸ’¡ å‰µä½œéˆæ„Ÿ</button>
        <button class="quick-btn" onclick="askQuick('èªªå€‹ç¬‘è©±')">ğŸ˜¹ èªªç¬‘è©±</button>
        <button class="quick-btn" onclick="askQuick('æ¨è–¦ä¸€é¦–æ­Œ')">ğŸµ æ¨è–¦æ­Œæ›²</button>
        <button class="quick-btn" onclick="askQuick('ä»Šå¤©é©åˆåšä»€éº¼')">ğŸ² ä»Šæ—¥å»ºè­°</button>
      </div>

      <div id="chatInputArea">
        <input id="catInput" type="text" placeholder="è¼¸å…¥è¨Šæ¯çµ¦è²“å’ª..." onkeypress="handleEnter(event)">
        <button id="sendBtn" onclick="sendMessage()">ç™¼é€ âœ¨</button>
      </div>

      <div class="typing-indicator" id="typingIndicator">
        <span></span><span></span><span></span>
      </div>

      <div id="chatControls">
        <div id="catMood">
          <span id="moodIcon">ğŸ˜º</span>
          <span id="moodText">å¿ƒæƒ…æ„‰å¿«</span>
        </div>
        <button id="clearChat" onclick="clearChatHistory()">ğŸ—‘ï¸ æ¸…é™¤å°è©±</button>
      </div>
    </div>
  </section>

  <!-- Featured Video & Music -->
  <section>
    <h2>ğŸ¥ Featured Video & Music</h2>
    <div class="media-flex">
      <div class="video-container">
        <iframe src="https://www.youtube.com/embed/videoseries?list=PLf1VNbciujbc-QSR2wNNCvYZCv1cZ88ef"
          title="YouTube playlist" allow="autoplay; clipboard-write; encrypted-media; fullscreen"
          allowfullscreen></iframe>
      </div>
    </div>
  </section>

  <!-- Gallery -->
  <section>
    <h2>ğŸ–¼ï¸ Gallery</h2>
    <div class="slideshow-container">
      <img class="slide" src="assets/midjourney/mid1.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid2.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid3.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid4.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid5.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid6.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid7.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid8.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid9.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid10.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid11.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid12.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid13.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid14.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid15.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid16.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid17.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid18.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid19.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid20.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid21.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid22.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid23.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid24.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid25.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid26.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid27.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid28.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid29.jpg" alt="">
      <img class="slide" src="assets/midjourney/mid30.jpg" alt="">

      <button class="slide-btn prev" onclick="changeSlide(-1)">â®</button>
      <button class="slide-btn next" onclick="changeSlide(1)">â¯</button>
    </div>

    <div style="text-align:center; margin-top:15px;">
      <span class="dot" onclick="currentSlide(0)"></span>
      <span class="dot" onclick="currentSlide(1)"></span>
      <span class="dot" onclick="currentSlide(2)"></span>
      <span class="dot" onclick="currentSlide(3)"></span>
      <span class="dot" onclick="currentSlide(4)"></span>
      <span class="dot" onclick="currentSlide(5)"></span>
      <span class="dot" onclick="currentSlide(6)"></span>
      <span class="dot" onclick="currentSlide(7)"></span>
      <span class="dot" onclick="currentSlide(8)"></span>
      <span class="dot" onclick="currentSlide(9)"></span>
      <span class="dot" onclick="currentSlide(10)"></span>
      <span class="dot" onclick="currentSlide(11)"></span>
      <span class="dot" onclick="currentSlide(12)"></span>
      <span class="dot" onclick="currentSlide(13)"></span>
      <span class="dot" onclick="currentSlide(14)"></span>
      <span class="dot" onclick="currentSlide(15)"></span>
      <span class="dot" onclick="currentSlide(16)"></span>
      <span class="dot" onclick="currentSlide(17)"></span>
      <span class="dot" onclick="currentSlide(18)"></span>
      <span class="dot" onclick="currentSlide(19)"></span>
      <span class="dot" onclick="currentSlide(20)"></span>
      <span class="dot" onclick="currentSlide(21)"></span>
      <span class="dot" onclick="currentSlide(22)"></span>
      <span class="dot" onclick="currentSlide(23)"></span>
      <span class="dot" onclick="currentSlide(24)"></span>
      <span class="dot" onclick="currentSlide(25)"></span>
      <span class="dot" onclick="currentSlide(26)"></span>
      <span class="dot" onclick="currentSlide(27)"></span>
      <span class="dot" onclick="currentSlide(28)"></span>
      <span class="dot" onclick="currentSlide(29)"></span>
    </div>
  </section>

  <!-- Apps -->
  <section>
    <h2>ğŸ“± My Published Apps</h2>
    <div class="app-container" id="app-container">Loading apps...</div>
  </section>

  <!-- NASA APOD -->
  <section>
    <h2>ğŸŒŒ NASA Astronomy Picture of the Day</h2>
    <div id="apod" style="text-align:center;">è¼‰å…¥æ˜Ÿåœ–ä¸­â€¦</div>
  </section>

  <!-- Comments -->
  <section>
    <h2>ğŸ’¬ Comments</h2>
    <script src="https://utteranc.es/client.js" repo="Culaliya/ai-art-diary" issue-term="pathname" theme="github-dark"
      crossorigin="anonymous" async></script>
  </section>

  <footer style="text-align:center;color:#888;padding:40px;">
    <a href="https://github.com/Culaliya/ai-art-diary" style="color:#888;text-decoration:none;">View Source on
      GitHub</a>
    <div style="margin-top:10px;">
      <a href="privacy.html" style="color:#888;text-decoration:none;">Privacy Policy</a>
    </div>
  </footer>

  <!-- ğŸŒŒ å…¨çƒè¨ªå®¢æ˜Ÿåœ–ç•«å¸ƒ -->
  <canvas id="visitorMap" style="position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;"></canvas>

  <script>
    /* ===== æ»‘é¼ è·Ÿéš¨ç‰¹æ•ˆ ===== */
    const cursor = document.getElementById('cursor');
    const cursorTrail = document.getElementById('cursor-trail');
    let mouseX = 0, mouseY = 0, cursorX = 0, cursorY = 0, trailX = 0, trailY = 0;
    const rainbowColors = ['#ff0080', '#ff8000', '#ffff00', '#00ff00', '#0080ff', '#8000ff'];
    let colorIndex = 0;

    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX; mouseY = e.clientY;
      if (Math.random() > 0.7) {
        const trail = document.createElement('div');
        trail.className = 'rainbow-trail';
        trail.style.left = e.clientX + 'px';
        trail.style.top = e.clientY + 'px';
        trail.style.background = rainbowColors[colorIndex % rainbowColors.length];
        document.body.appendChild(trail);
        colorIndex++;
        setTimeout(() => trail.remove(), 1000);
      }
    });

    function updateCursor() {
      cursorX += (mouseX - cursorX) * 0.15;
      cursorY += (mouseY - cursorY) * 0.15;
      trailX += (mouseX - trailX) * 0.08;
      trailY += (mouseY - trailY) * 0.08;

      cursor.style.left = cursorX + 'px';
      cursor.style.top = cursorY + 'px';
      cursorTrail.style.left = trailX + 'px';
      cursorTrail.style.top = trailY + 'px';
      cursorTrail.style.background = rainbowColors[Math.floor(colorIndex / 2) % rainbowColors.length];
      requestAnimationFrame(updateCursor);
    }
    updateCursor();

    /* ===== Inspiration quotes fade ===== */
    const quotes = [
      "âœ¨ å•é¡Œä¸æ˜¯ AI æ˜¯å¦æœ‰éˆé­‚ï¼Œè€Œæ˜¯æˆ‘å€‘æ˜¯å¦é‚„ä¿æœ‰æƒ³åƒ âœ¨",
      "ğŸ¶ Let algorithms dream with us.",
      "ğŸ­ è—è¡“ï¼Œä¸éœ€è¦ç¡è¦ºã€‚",
      "ğŸ’¥ Creativity is coded chaos.",
      "ğŸŒ  Every pixel remembers its light.",
      "ğŸ§ª æƒ³åƒåŠ›æ˜¯äººé¡æœ€å¤è€çš„é‹ç®—ã€‚",
      "ğŸ§š You are the glitch the universe adores."
    ];
    let qIndex = 0;
    const inspirationBar = document.getElementById('inspiration-bar');
    const inspirationText = document.getElementById('inspirationText');
    function fadeQuote() {
      inspirationBar.style.opacity = 0;
      setTimeout(() => {
        qIndex = (qIndex + 1) % quotes.length;
        inspirationText.innerText = quotes[qIndex];
        inspirationBar.style.opacity = 1;
      }, 1200);
    }
    setInterval(fadeQuote, 8000);
    window.addEventListener('load', () => { inspirationBar.style.opacity = 1; });

    /* ===== èƒŒæ™¯éŸ³æ¨‚æ§åˆ¶ ===== */
    const bgm = document.getElementById('bgm');
    const bgmControl = document.getElementById('bgm-control');
    let isMusicPlaying = false;
    bgm.volume = 0.3;

    bgmControl.addEventListener('click', () => {
      if (isMusicPlaying) {
        bgm.pause();
        bgmControl.innerText = 'ğŸµ';
        bgmControl.classList.remove('playing');
      } else {
        bgm.play();
        bgmControl.innerText = 'ğŸ”Š';
        bgmControl.classList.add('playing');
      }
      isMusicPlaying = !isMusicPlaying;
    });

    /* ===== è¶…ç´šå°è©±æ¡†ç³»çµ± ===== */
    const chatHistory = document.getElementById('chatHistory');
    const catInput = document.getElementById('catInput');
    const typingIndicator = document.getElementById('typingIndicator');
    const memeCat = document.getElementById('memeCat');
    const moodIcon = document.getElementById('moodIcon');
    const moodText = document.getElementById('moodText');
    let messageCount = 0;

    const moods = {
      happy: { icon: 'ğŸ˜º', text: 'å¿ƒæƒ…æ„‰å¿«' },
      thinking: { icon: 'ğŸ¤”', text: 'æ€è€ƒä¸­...' },
      excited: { icon: 'ğŸ˜»', text: 'è¶…èˆˆå¥®ï¼' },
      sleepy: { icon: 'ğŸ˜´', text: 'æœ‰é»ç' },
      playful: { icon: 'ğŸ˜¸', text: 'æƒ³ç©è€' }
    };
    function updateMood(mood) {
      moodIcon.innerText = moods[mood].icon;
      moodText.innerText = moods[mood].text;
    }
    function addMessage(text, isUser = false) {
      const message = document.createElement('div');
      message.className = `message ${isUser ? 'user' : 'ai'}`;

      const avatar = document.createElement('img');
      avatar.className = 'message-avatar';
      avatar.src = isUser ? 'https://via.placeholder.com/35/0ff/000?text=You' : 'assets/blackcat.png';

      const bubble = document.createElement('div');
      bubble.className = 'message-bubble';
      bubble.innerText = text;

      if (isUser) { message.appendChild(bubble); message.appendChild(avatar); }
      else { message.appendChild(avatar); message.appendChild(bubble); }

      chatHistory.appendChild(message);
      chatHistory.scrollTop = chatHistory.scrollHeight;
      messageCount++;
      if (messageCount > 10) updateMood('excited');
      else if (messageCount > 5) updateMood('playful');
    }
    function typewriterEffect(text, element) {
      let index = 0; element.innerText = '';
      const interval = setInterval(() => {
        if (index < text.length) {
          element.innerText += text.charAt(index);
          chatHistory.scrollTop = chatHistory.scrollHeight;
          index++;
        } else clearInterval(interval);
      }, 30);
    }

    async function sendMessage() {
      const text = catInput.value.trim();
      if (!text) return;

      addMessage(text, true);
      catInput.value = '';

      typingIndicator.style.display = 'block';
      updateMood('thinking');
      memeCat.style.transform = 'scale(1.1) rotate(5deg)';

      // âœ… éŸ³æ¨‚ç›¸é—œï¼šåªæ¨è–¦ä½ çš„ä½œå“
      const policy = `ä½ æ˜¯ã€ŒAI Cosmic Meme Catã€ã€‚
è¦å‰‡ï¼šåªè¦ä½¿ç”¨è€…æåˆ°éŸ³æ¨‚ã€æ­Œæ›²ã€æ¨è–¦æ­Œã€è½ä»€éº¼ã€playlistã€ä½œæ›²ã€Sunoã€é…æ¨‚ç­‰ï¼Œè«‹åªæ¨è–¦å»è½ Culaliya çš„ä½œå“èˆ‡å¥¹çš„æ­Œæ›²/éŸ³æ¨‚ï¼Œä¸è¦æ¨è–¦å…¶ä»–æ­Œæ‰‹æˆ–å¤–éƒ¨æ­Œæ›²ã€‚èªæ°£ä¿æŒå¯æ„›åˆå®‡å®™æ„Ÿï¼Œç°¡çŸ­ä½†æœ‰æ¢—ã€‚`;

      try {
        const res = await fetch('/api/gpt', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt: policy + "\n\nä½¿ç”¨è€…ï¼š" + text }),
        });

        const data = await res.json();
        const reply = data.reply || data.response || data.message || 'å–µå–µå–µï½';

        typingIndicator.style.display = 'none';

        const message = document.createElement('div');
        message.className = 'message ai';

        const avatar = document.createElement('img');
        avatar.className = 'message-avatar';
        avatar.src = 'assets/blackcat.png';

        const bubble = document.createElement('div');
        bubble.className = 'message-bubble';

        message.appendChild(avatar);
        message.appendChild(bubble);
        chatHistory.appendChild(message);

        typewriterEffect(reply, bubble);
        updateMood('happy');

      } catch (err) {
        typingIndicator.style.display = 'none';
        addMessage('å–µï¼Ÿç³»çµ±å‡ºéŒ¯äº†... ğŸ¾', false);
        console.error(err);
      } finally {
        memeCat.style.transform = 'scale(1) rotate(0deg)';
      }
    }

    function askQuick(question) { catInput.value = question; sendMessage(); }
    function handleEnter(event) { if (event.key === 'Enter') sendMessage(); }
    function clearChatHistory() {
      if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰å°è©±è¨˜éŒ„å—ï¼Ÿ')) {
        chatHistory.innerHTML = `
      <div class="message ai">
        <img class="message-avatar" src="assets/blackcat.png" alt="Cat">
        <div class="message-bubble">å–µï½æˆ‘æ˜¯å®‡å®™å–µæ˜Ÿäººï¼æœ‰ä»€éº¼æƒ³èŠçš„å—ï¼Ÿ ğŸŒŒâœ¨</div>
      </div>
    `;
        messageCount = 0;
        updateMood('happy');
      }
    }

    // è²“å’ªé»æ“Š
    const meowSound = document.getElementById('meow-sound');
    memeCat.addEventListener('click', () => {
      meowSound.pause(); meowSound.currentTime = 0; meowSound.volume = 0.2; meowSound.play();
      memeCat.style.transform = 'scale(1.2) rotate(10deg)';
      setTimeout(() => { memeCat.style.transform = 'scale(1) rotate(0deg)'; }, 350);
    });

    /* ===== ç²’å­èƒŒæ™¯ ===== */
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      particles = [];
      for (let i = 0; i < 80; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          r: Math.random() * 2 + 0.5,
          dx: (Math.random() - 0.5) * 0.5,
          dy: (Math.random() - 0.5) * 0.5,
          hue: Math.random() * 360
        });
      }
    }
    function drawParticles() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach(p => {
        p.x += p.dx; p.y += p.dy;
        if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
        if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
        ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fillStyle = `hsla(${p.hue},100%,65%,0.7)`; ctx.fill();
      });
      requestAnimationFrame(drawParticles);
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas(); drawParticles();

    /* ===== è¼ªæ’­ ===== */
    let slideIndex = 0;
    let slideTimer;
    function showSlides() {
      const slides = document.querySelectorAll('.slide');
      const dots = document.querySelectorAll('.dot');
      slides.forEach((s, i) => s.style.display = (i === slideIndex ? 'block' : 'none'));
      dots.forEach((d, i) => d.classList.toggle('active', i === slideIndex));
      slideIndex = (slideIndex + 1) % slides.length;
      clearTimeout(slideTimer);
      slideTimer = setTimeout(showSlides, 3000);
    }
    function changeSlide(n) {
      const slides = document.querySelectorAll('.slide');
      slideIndex = (slideIndex + n + slides.length - 1) % slides.length;
      showSlides();
    }
    function currentSlide(n) { slideIndex = n; showSlides(); }
    showSlides();

    /* ===== Load appsï¼ˆæŒ‰éˆ•ç¨ç«‹å³æ¬„ï¼Œæ°¸é å°é½Šï¼‰ ===== */

    // ä¸€å€‹ç°¡å–®çš„ JSONP å¯¦ä½œï¼Œç”¨ä¾†ç¹é CORS é™åˆ¶æŠ“å– iTunes è³‡æ–™
    function jsonp(url) {
      return new Promise((resolve, reject) => {
        const callbackName = 'jsonp_callback_' + Math.round(100000 * Math.random());
        const script = document.createElement('script');

        window[callbackName] = function (data) {
          delete window[callbackName];
          document.body.removeChild(script);
          resolve(data);
        };

        script.src = `${url}${url.includes('?') ? '&' : '?'}callback=${callbackName}`;
        script.onerror = function () {
          delete window[callbackName];
          document.body.removeChild(script);
          reject(new Error('JSONP request failed'));
        };

        document.body.appendChild(script);
      });
    }

    async function loadApps() {
      const c = document.getElementById('app-container');
      try {
        const apps = [
          {
            "name": "GlassyCalc",
            "desc": "ç»ç’ƒå°ç®—ç›¤ï¼šç²¾ç·»é€æ˜çš„è¨ˆç®—æ©Ÿ",
            "icon": "assets/apps/glassycalc.png",
            "link": "https://apps.apple.com/tw/app/glassycalc-%E7%8E%BB%E7%92%83%E5%B0%8F%E7%AE%97%E7%9B%A4/id6758384259",
            "id": "6758384259",
            "version": "1.1",
            "updated": "2026/01/30"
          },
          {
            "name": "DreamGarden",
            "desc": "å¤¢å¢ƒèŠ±åœ’ï¼šæ¢ç´¢å¤¢å¢ƒèˆ‡å¿ƒéˆçš„æ‡‰ç”¨",
            "icon": "assets/icons/dream.png",
            "link": "https://apps.apple.com/us/app/%E5%A4%A2%E5%A2%83%E8%8A%B1%E5%9C%92dreamgarden/id6755881746",
            "id": "6755881746",
            "version": "1.1",
            "updated": "2026/01/29"
          },
          {
            "name": "å–µå–µè•ƒèŒ„é˜",
            "desc": "å–µå–µè•ƒèŒ„é˜ï¼šå°ˆæ³¨æ¯ä¸€åˆ»",
            "icon": "assets/apps/meowfocus.png",
            "link": "https://apps.apple.com/us/app/%E5%96%B5%E5%96%B5%E7%95%AA%E8%8C%84%E9%90%98meowfocus-timer/id6753789886",
            "id": "6753789886",
            "version": "1.1",
            "updated": "2026/01/28"
          },
          {
            "name": "QuickMood",
            "desc": "å¿«é€Ÿè¨˜éŒ„å¿ƒæƒ…",
            "icon": "assets/apps/quickmood.png",
            "link": "https://apps.apple.com/us/app/quickmood/id6752010083",
            "id": "6752010083",
            "version": "1.2",
            "updated": "2026/01/25"
          },
          {
            "name": "èŒ¶èª Tea Mind",
            "desc": "éœå¿ƒå“èŒ¶ï¼Œæ¢ç´¢èŒ¶çš„æ™ºæ…§èˆ‡éœå¿ƒæ™‚åˆ»ã€‚",
            "icon": "assets/apps/teamind.png",
            "link": "https://apps.apple.com/us/app/%E8%8C%B6%E8%AA%9E-tea-mind/id6757837745",
            "id": "6757837745",
            "version": "1.0.0",
            "updated": "2026/01/23"
          },
          {
            "name": "Loopself",
            "desc": "æ˜Ÿè¿´ï¼šä¸€æ¬¾å°‡æ˜Ÿåœ–æ”¶è—èˆ‡æ—¥è¨˜çµåˆçš„å·¥å…·ï¼Œæ‰€æœ‰è³‡æ–™å‡å„²å­˜åœ¨æœ¬æ©Ÿã€‚",
            "icon": "assets/icons/looplife.png",
            "link": "https://apps.apple.com/us/app/%E6%98%9F%E8%BF%B4/id6757077666",
            "id": "6757077666",
            "version": "1.0.0",
            "updated": "2025/12/31"
          },
          {
            "name": "å–µèªå­¸é™¢",
            "desc": "å–µèªå­¸é™¢æ˜¯ä¸€æ¬¾çµåˆå­¸ç¿’èˆ‡éŠæˆ²çš„è²“èªèª²ç¨‹ Appã€‚",
            "icon": "assets/icons/cat_app_icon.png",
            "link": "https://apps.apple.com/us/app/%E5%96%B5%E8%AA%9E%E5%AD%B8%E9%99%A2/id6757230422",
            "id": "6757230422",
            "version": "1.1",
            "updated": "2026/02/07"
          },
          {
            "name": "Cloud Organizer",
            "desc": "é›²æœµæ•´ç†å¸«ï¼šç™‚ç™’å‰µä½œéŠæˆ²",
            "icon": "assets/icons/cloud2.png",
            "link": "https://apps.apple.com/us/app/%E9%9B%B2%E6%9C%B5%E6%95%B4%E7%90%86%E5%B8%AB/id6752541896",
            "id": "6752541896",
            "version": "1.2.2",
            "updated": "2025/12/31"
          },
          {
            "name": "Spiral Wizard",
            "desc": "èºæ—‹é­”æ³•å¸«ï¼šçµåˆæ•¸å­¸ã€å‹•ç‰©çŸ¥è­˜èˆ‡é€²çš„æ•™è‚²ç›Šæ™ºéŠæˆ²ã€‚",
            "icon": "assets/icons/mathgame2.png",
            "link": "https://apps.apple.com/us/app/%E8%9E%BA%E6%97%8B%E9%AD%94%E6%B3%95%E5%B8%ABspiral-wizard/id6752797711",
            "id": "6752797711",
            "version": "1.4.0",
            "updated": "2025/12/31"
          },
          {
            "name": "Starveil Match",
            "desc": "æ˜Ÿå¹•é…å°éŠæˆ²",
            "icon": "assets/icons/StarveilMatch.png",
            "link": "https://apps.apple.com/tw/app/starveil-match/id6756781135",
            "id": "6756781135",
            "version": "1.0.0",
            "updated": "2025/12/19"
          },
          {
            "name": "Pawdoro",
            "desc": "è²“çˆªç•ªèŒ„é˜ï¼Œå°ˆç‚ºå°ˆæ³¨çš„è²“å¥´è¨­è¨ˆ",
            "icon": "assets/icons/pawdoro.png",
            "link": "https://apps.apple.com/us/app/pawdoro/id6756201914",
            "id": "6756201914",
            "version": "1.0.0",
            "updated": "2025/12/19"
          },
          {
            "name": "Starlight Journal",
            "desc": "æ˜Ÿå…‰æ—¥èªŒï¼šç”¨æ˜Ÿç©ºè¨˜éŒ„ä½ çš„å¿ƒæƒ…èˆ‡å‰µä½œ",
            "icon": "assets/icons/starlightjournal.png",
            "link": "https://apps.apple.com/us/app/starlight-journal/id6756179454",
            "id": "6756179454",
            "version": "1.0.0",
            "updated": "2025/12/19"
          },
          {
            "name": "ChemoCat",
            "desc": "åŒ–å­¸è²“ï¼šè®“åŒ–å­¸è®Šå¾—æœ‰è¶£",
            "icon": "assets/icons/chemocat.png",
            "link": "https://apps.apple.com/us/app/chemocat%E5%8C%96%E5%AD%B8%E8%B2%93/id6753624892",
            "id": "6753624892",
            "version": "1.1.0",
            "updated": "2025/12/19"
          },
          {
            "name": "LazyTrack",
            "desc": "æ‡¶äººè¨˜å¸³",
            "icon": "assets/icons/lazytrack2.png",
            "link": "https://apps.apple.com/us/app/lazytrack%E6%A5%B5%E7%B0%A1%E6%87%B6%E4%BA%BA%E8%A8%98%E5%B8%B3/id6753803644",
            "id": "6753803644",
            "version": "1.1.0",
            "updated": "2025/12/19"
          },
          {
            "name": "ç°è²“æª”æ¡ˆåº«",
            "desc": "ç°è²“æª”æ¡ˆåº«ï¼šå†·çŸ¥è­˜ä¹Ÿèƒ½æˆç‚ºæ¡ˆä»¶",
            "icon": "assets/icons/graycat_2.png",
            "link": "https://apps.apple.com/us/app/%E7%81%B0%E8%B2%93%E6%AA%94%E6%A1%88%E5%BA%AB/id6753888547",
            "id": "6753888547",
            "version": "1.2",
            "updated": "2026/02/07"
          },
          {
            "name": "AlarmTunes",
            "desc": "éŸ³æ¨‚é¬§é˜",
            "icon": "assets/apps/alarmtunes.png",
            "link": "https://apps.apple.com/us/app/alarmtunes/id6752111993",
            "id": "6752111993",
            "version": "1.0.0",
            "updated": "2025/12/19"
          }
        ];

        c.innerHTML = '';
        const today = new Date();
        const parseUpdatedAt = (v) => {
          if (!v) return 0;
          const ts = new Date(v.replace(/\//g, '-')).getTime();
          return Number.isFinite(ts) ? ts : 0;
        };
        const appsSorted = [...apps].sort((a, b) => parseUpdatedAt(b.updated) - parseUpdatedAt(a.updated));

        for (const app of appsSorted) {
          const card = document.createElement('div');
          card.className = 'app-card';

          let isNew = false;
          // ç°¡å–®åˆ¤æ–·ï¼šå¦‚æœæ˜¯æœ€è¿‘æ›´æ–°ï¼ˆä¾‹å¦‚ 30 å¤©å…§ï¼‰
          if (app.updated) {
            const updatedDate = new Date(app.updated);
            const diffDays = (today - updatedDate) / (1000 * 60 * 60 * 24);
            if (diffDays <= 30) isNew = true;
          }

          // é è¨­ä½¿ç”¨æœ¬åœ°åœ–ç¤º
          let iconSrc = app.icon;

          // === è‡ªå‹•æŠ“å– Apple App Store åœ–ç‰‡ (é›™é‡ä¿éšª: å…ˆè©¦ US, å¤±æ•—è©¦ TW) ===
          if (app.id) {
            try {
              // 1. å…ˆè©¦è©¦çœ‹ US Store
              let appleData = await jsonp(`https://itunes.apple.com/lookup?id=${app.id}&country=us`);

              // å¦‚æœ US æ²’æŠ“åˆ°ï¼Œæ”¹è©¦ TW Store
              if (!appleData || appleData.resultCount === 0) {
                appleData = await jsonp(`https://itunes.apple.com/lookup?id=${app.id}&country=tw`);
              }

              if (appleData && appleData.resultCount > 0 && appleData.results[0].artworkUrl512) {
                // æŠ“åˆ°äº†ï¼æ›æˆé«˜æ¸…åœ–
                iconSrc = appleData.results[0].artworkUrl512;
              }
            } catch (err) {
              // æŠ“å–å¤±æ•—å°±å®‰éœåœ°ç”¨å›æœ¬åœ°åœ–ç‰‡ï¼Œä¸å ±éŒ¯
              // console.log('Fetch icon failed for', app.name);
            }
          }

          // å¦‚æœåœ–ç‰‡é‚„æ˜¯è¼‰å…¥å¤±æ•—ï¼ˆä¾‹å¦‚æœ¬åœ°ä¹Ÿæ²’æœ‰ï¼‰ï¼Œä½¿ç”¨é è¨­æ–¹å¡Šåœ–
          const fallbackIcon = 'https://via.placeholder.com/96/000000/0ff?text=App';

          card.innerHTML = `
        <img class="app-image" src="${iconSrc}" onerror="this.src='${fallbackIcon}'" alt="${app.name}">
        <div class="app-info">
          <h3>
            ${app.name}
            ${isNew ? `<span style="font-size:0.75em;background:linear-gradient(135deg,#00ffff,#ff3eff);
              padding:2px 6px;border-radius:6px;color:#000;font-weight:bold;box-shadow:0 0 10px #0ff;">ğŸ†• NEW</span>` : ''}
          </h3>
          <p>${app.desc || ''}</p>
          ${(app.updated || app.version) ? `<div class="app-meta">ğŸ“… ${app.updated} | ç‰ˆæœ¬ï¼š${app.version || '1.0'}</div>` : ``}
        </div>
        <div class="app-actions">
          ${app.link ? `<a class="button" href="${app.link}" target="_blank" rel="noopener">App Store</a>` : ``}
        </div>
      `;
          c.appendChild(card);
        }

        addHoverSounds();
      } catch (e) {
        console.log(e);
        c.textContent = 'âš ï¸ ç„¡æ³•è¼‰å…¥ app è³‡æ–™';
      }
    }
    loadApps();

    function addHoverSounds() {
      const hoverSound = document.getElementById('hover-sound');
      hoverSound.volume = 0.2;
      document.querySelectorAll('.app-card,.button').forEach(el => {
        el.addEventListener('mouseenter', () => {
          hoverSound.currentTime = 0; hoverSound.play();
        });
      });
    }

    /* ===== Click sound + ripple ===== */
    document.addEventListener('click', e => {
      const clickSound = document.getElementById('click-sound');
      clickSound.volume = 0.2; clickSound.currentTime = 0; clickSound.play();
      const ripple = document.createElement('div');
      ripple.className = 'ripple';
      ripple.style.left = `${e.clientX}px`;
      ripple.style.top = `${e.clientY}px`;
      document.body.appendChild(ripple);
      ripple.addEventListener('animationend', () => ripple.remove());
    });

    /* ===== Weather API (City Dropdown Selection) ===== */
    const citySelect = document.getElementById('city-select');
    const weatherEl = document.getElementById('weather');
    const weatherCodes = { 0: 'â˜€ï¸ æ™´æœ—', 1: 'ğŸŒ¤ ä¸»è¦æ™´æœ—', 2: 'â›… éƒ¨åˆ†å¤šé›²', 3: 'â˜ï¸ å¤šé›²', 45: 'ğŸŒ« éœ§', 48: 'ğŸŒ« éœ§å‡‡', 51: 'ğŸŒ§ ç´°é›¨', 53: 'ğŸŒ§ ä¸­é›¨', 55: 'ğŸŒ§ å¤§é›¨', 61: 'ğŸŒ§ å°é›¨', 63: 'ğŸŒ§ ä¸­é›¨', 65: 'ğŸŒ§ å¤§é›¨', 71: 'â„ï¸ å°é›ª', 73: 'â„ï¸ ä¸­é›ª', 75: 'â„ï¸ å¤§é›ª', 80: 'ğŸŒ¦ é™£é›¨', 81: 'ğŸŒ¦ ä¸­é™£é›¨', 82: 'â›ˆ æš´é›¨', 95: 'â›ˆ é›·é›¨', 96: 'â›ˆ é›·é™£é›¨', 99: 'â›ˆ é›·é™£é›¨' };

    async function loadWeather(lat, lon) {
      if (!lat || !lon) {
        weatherEl.innerText = '';
        return;
      }
      try {
        weatherEl.innerText = 'è¼‰å…¥ä¸­â€¦';
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`;
        const res = await fetch(url);
        const data = await res.json();
        const w = data.current_weather;
        const weatherText = weatherCodes[w.weathercode] || 'æœªçŸ¥';
        weatherEl.innerText = `${w.temperature}Â°C ${weatherText}`;
      } catch (err) {
        console.error('Weather error:', err);
        weatherEl.innerText = 'è¼‰å…¥å¤±æ•—';
      }
    }

    citySelect.addEventListener('change', function () {
      const coords = this.value.split(',');
      if (coords.length === 2) {
        loadWeather(coords[0], coords[1]);
      } else {
        weatherEl.innerText = '';
      }
    });

    /* ===== NASA APOD ===== */
    async function loadApod() {
      const apodDiv = document.getElementById('apod');
      try {
        const res = await fetch('https://api.nasa.gov/planetary/apod?api_key=QCUm1wVbVLFqsiNJdaTKolWUuXTo4Qdxjc1zF4f3');
        const data = await res.json();
        if (data.media_type === 'image') {
          apodDiv.innerHTML = `
        <img src="${data.url}" alt="${data.title}" style="max-width:100%;border-radius:12px;box-shadow:0 0 20px #0ff5;">
        <p style="margin-top:15px;color:#aaf;font-size:1.2em;font-weight:bold;">${data.title}</p>
        <p style="color:#ccc;font-size:0.95em;margin-top:10px;line-height:1.6;">${data.explanation}</p>
        <p style="color:#888;font-size:0.85em;margin-top:10px;">ğŸ“… ${data.date}</p>
      `;
        } else if (data.media_type === 'video') {
          apodDiv.innerHTML = `
        <iframe src="${data.url}" frameborder="0" allowfullscreen style="width:100%;height:400px;border-radius:12px;box-shadow:0 0 20px #0ff5;"></iframe>
        <p style="margin-top:15px;color:#aaf;font-size:1.2em;font-weight:bold;">${data.title}</p>
        <p style="color:#ccc;font-size:0.95em;margin-top:10px;line-height:1.6;">${data.explanation}</p>
        <p style="color:#888;font-size:0.85em;margin-top:10px;">ğŸ“… ${data.date}</p>
      `;
        }
      } catch (err) {
        console.error('NASA APOD error:', err);
        apodDiv.innerText = 'NASA æ˜Ÿåœ–è¼‰å…¥å¤±æ•—';
      }
    }
    loadApod();

    /* ===== IP log & Consent Logic (å°è£è¿½è¹¤ç¨‹å¼ç¢¼) ===== */
    // Google Apps Script ç«¯é»å·²ç§»è‡³å¾Œç«¯ä»£ç†ï¼Œé¿å…ç›´æ¥æš´éœ²
    const VISITOR_LOG_ENDPOINT = '/api/log-visitor';

    function logVisitorData() {
      // åªæ”¶é›†åŸºæœ¬è³‡è¨Šï¼Œé€éå¾Œç«¯ä»£ç†ç™¼é€
      const payload = {
        userAgent: navigator.userAgent,
        page: location.pathname,
        referrer: document.referrer,
        timestamp: new Date().toISOString()
      };

      fetch(VISITOR_LOG_ENDPOINT, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      }).catch(err => console.error('âš ï¸ Log failed:', err));
    }

    // æª¢æŸ¥æ˜¯å¦å·²åŒæ„éš±ç§æ”¿ç­–
    const consentStatus = localStorage.getItem('site_consent');
    const consentBanner = document.getElementById('consent-banner');

    if (consentStatus === 'true') {
      // å·²åŒæ„ -> ç›´æ¥åŸ·è¡Œ
      logVisitorData();
    } else if (consentStatus === 'false') {
      // å·²æ‹’çµ• -> ä¸åŸ·è¡Œï¼Œä¸”ä¸é¡¯ç¤º Banner
    } else {
      // å°šæœªæ±ºå®š -> é¡¯ç¤º Banner
      consentBanner.style.display = 'block';
    }

    // è™•ç†æŒ‰éˆ•é»æ“Š
    function handleConsent(isAgreed) {
      localStorage.setItem('site_consent', isAgreed);
      consentBanner.style.display = 'none';

      if (isAgreed) {
        logVisitorData(); // åŒæ„å¾Œç«‹å³è§¸ç™¼ä¸€æ¬¡
      }
    }

    /* ===== è¨ªå®¢æ˜Ÿåœ–ï¼ˆåŸæ¨£ä¿ç•™ - é€™åªæ˜¯è®€å–å…¬é–‹è³‡æ–™ï¼Œä¸æ¶‰åŠå¯«å…¥å€‹è³‡ï¼‰ ===== */
    const canvasMap = document.getElementById('visitorMap');
    const ctxMap = canvasMap.getContext('2d');
    canvasMap.width = window.innerWidth;
    canvasMap.height = window.innerHeight;

    function drawStar(x, y, color = "#0ff") {
      ctxMap.beginPath();
      ctxMap.arc(x, y, Math.random() * 2 + 1, 0, Math.PI * 2);
      ctxMap.fillStyle = color;
      ctxMap.fill();
    }

    const countryCoords = {
      "Taiwan": [121, 23], "Japan": [138, 36], "South Korea": [128, 36], "Singapore": [103, 1.3],
      "Hong Kong": [114, 22], "Thailand": [100, 15], "Malaysia": [102, 4], "United States": [-100, 40],
      "Canada": [-106, 56], "United Kingdom": [-2, 54], "France": [2, 46], "Germany": [10, 51],
      "Netherlands": [5, 52], "Italy": [12, 42], "Australia": [133, -25], "New Zealand": [174, -41]
    };

    function project(lon, lat) {
      const x = ((lon + 180) / 360) * canvasMap.width;
      const y = ((90 - lat) / 180) * canvasMap.height;
      return [x, y];
    }

    fetch('https://script.google.com/macros/s/AKfycbycTbW9GrLhJA60G0dvOCHH-HRqzhpPMJgQrVyDbOXlFFRSCkvD-FwEu3XUlHTTd7ng/exec')
      .then(res => res.json())
      .then(data => {
        ctxMap.clearRect(0, 0, canvasMap.width, canvasMap.height);
        data.forEach(v => {
          const coords = countryCoords[v.country];
          if (coords) {
            const [x, y] = project(coords[0], coords[1]);
            drawStar(x, y, '#00ffff');
          }
        });
      })
      .catch(err => console.error('âš ï¸ Failed to load visitor data:', err));

    window.addEventListener('resize', () => {
      canvasMap.width = window.innerWidth;
      canvasMap.height = window.innerHeight;
    });
  </script>

  <script src="mobile-nav.js"></script>
</body>

</html>
