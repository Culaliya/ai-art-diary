<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Culaliya's AI Art Diary ğŸŒŒ</title>
<style>
body {
  margin:0;font-family:'Orbitron',sans-serif;color:#fff;
  overflow-x:hidden;background:#000;position:relative;
  cursor: none; /* éš±è—é è¨­æ»‘é¼ æ¸¸æ¨™ */
}
header{text-align:center;padding:60px 20px;}
h1{font-size:3em;color:#0ff;text-shadow:0 0 20px #0ff;animation:glow 3s ease-in-out infinite alternate;}
@keyframes glow{from{text-shadow:0 0 10px #0ff;} to{text-shadow:0 0 25px #ff3eff;}}
section{max-width:1000px;margin:auto;padding:40px 20px;}
h2{color:#ff3eff;margin-bottom:16px;}
#particles{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-2;background:#000;}

/* ===== æ»‘é¼ è·Ÿéš¨ç‰¹æ•ˆ ===== */
#cursor {
  position: fixed;
  width: 20px;
  height: 20px;
  border: 2px solid #0ff;
  border-radius: 50%;
  pointer-events: none;
  z-index: 9999;
  transition: transform 0.1s ease;
  box-shadow: 0 0 20px #0ff, inset 0 0 10px #0ff;
}
#cursor-trail {
  position: fixed;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 9998;
}
.rainbow-trail {
  position: fixed;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 9997;
  animation: fadeOut 1s ease-out forwards;
}
@keyframes fadeOut {
  to { opacity: 0; transform: scale(2); }
}

.app-container{display:flex;flex-direction:column;gap:20px;}
.app-card{display:flex;align-items:center;gap:20px;background:rgba(255,255,255,0.05);border:1px solid #0ff3;border-radius:12px;padding:20px;transition:transform .3s, box-shadow .3s;position:relative;}
.app-card:hover{transform:translateY(-5px);box-shadow:0 0 25px #0ff;}
.app-image{width:120px;height:120px;border-radius:16px;object-fit:cover;}
.app-info h3{margin:0 0 8px 0;color:#0ff;}
.app-info p{color:#ccc;margin:0 0 10px 0;}
.button{display:inline-block;padding:8px 16px;border:1px solid #0ff;color:#0ff;border-radius:6px;text-decoration:none;transition:.2s;cursor:pointer;background:transparent;font-size:14px;}
.button:hover{background:#0ff;color:#000;transform:scale(1.05);}
.media-flex{display:flex;flex-wrap:wrap;gap:20px;}
.video-container{flex:2;min-width:300px;aspect-ratio:16/9;}
.spotify-container{flex:1;min-width:300px;}
.video-container iframe,.spotify-container iframe{width:100%;height:100%;border:none;border-radius:12px;}

/* è¼ªæ’­å®¹å™¨å’Œæ§åˆ¶æŒ‰éˆ• */
.slideshow-container{position:relative;width:100%;max-width:800px;margin:auto;}
.slide{display:none;width:100%;border-radius:12px;box-shadow:0 0 20px #0ff5;}
.slide-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,255,255,0.3);color:#0ff;border:2px solid #0ff;font-size:24px;padding:10px 15px;cursor:pointer;border-radius:6px;transition:all 0.3s;z-index:10;}
.slide-btn:hover{background:rgba(0,255,255,0.6);box-shadow:0 0 15px #0ff;}
.slide-btn.prev{left:10px;}
.slide-btn.next{right:10px;}
.dot{display:inline-block;width:12px;height:12px;margin:0 5px;background:#0ff3;border-radius:50%;cursor:pointer;transition:all 0.3s;}
.dot:hover,.dot.active{background:#0ff;box-shadow:0 0 10px #0ff;}

.ripple{position:fixed;border-radius:50%;pointer-events:none;border:2px solid #0ff;animation:ripple 0.6s ease-out;}
@keyframes ripple{from{transform:scale(0);opacity:0.8;} to{transform:scale(10);opacity:0;}}
#weather-quote{text-align:center;margin-top:10px;color:#aaf;font-size:1em;}

/* å¯¦é©—å®¤æŒ‰éˆ•åˆ— */
.lab-buttons {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 40px;
}

.lab-btn {
  display: inline-block;
  padding: 12px 20px;
  border-radius: 25px;
  font-weight: bold;
  color: #fff;
  text-decoration: none;
  transition: 0.3s;
  box-shadow: 0 0 20px rgba(255,255,255,0.2);
}

.lab-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 30px #fff;
}

.lab-btn.pink {
  background: linear-gradient(135deg, #ff3eff, #ff00aa);
}

.lab-btn.purple {
  background: linear-gradient(135deg, #8a2be2, #ff3eff);
}

.lab-btn.blue {
  background: linear-gradient(135deg, #00e0ff, #008cff);
}

  
/* ===== è¶…ç´šå°è©±æ¡†æ¨£å¼ ===== */
#chatContainer {
  max-width: 800px;
  margin: 30px auto;
  background: rgba(0, 255, 255, 0.05);
  border: 2px solid #0ff;
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 0 30px rgba(0, 255, 255, 0.3);
}
#chatHistory {
  height: 300px;
  overflow-y: auto;
  margin-bottom: 20px;
  padding: 15px;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 12px;
  border: 1px solid #0ff3;
}
#chatHistory::-webkit-scrollbar {
  width: 8px;
}
#chatHistory::-webkit-scrollbar-track {
  background: rgba(0, 255, 255, 0.1);
  border-radius: 4px;
}
#chatHistory::-webkit-scrollbar-thumb {
  background: #0ff;
  border-radius: 4px;
}
.message {
  margin: 15px 0;
  display: flex;
  align-items: flex-start;
  animation: messageSlideIn 0.3s ease-out;
}
@keyframes messageSlideIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.message.user {
  justify-content: flex-end;
}
.message.ai {
  justify-content: flex-start;
}
.message-bubble {
  max-width: 70%;
  padding: 12px 16px;
  border-radius: 18px;
  position: relative;
  word-wrap: break-word;
}
.message.user .message-bubble {
  background: linear-gradient(135deg, #0ff, #00d4ff);
  color: #000;
  border-bottom-right-radius: 4px;
}
.message.ai .message-bubble {
  background: rgba(255, 62, 255, 0.2);
  border: 1px solid #ff3eff;
  color: #fff;
  border-bottom-left-radius: 4px;
}
.message-avatar {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  margin: 0 10px;
  border: 2px solid #0ff;
  box-shadow: 0 0 10px #0ff;
}
.message.user .message-avatar {
  order: 2;
}
.typing-indicator {
  display: none;
  padding: 10px 16px;
}
.typing-indicator span {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #0ff;
  margin: 0 3px;
  animation: typing 1.4s infinite;
}
.typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
.typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
@keyframes typing {
  0%, 60%, 100% { transform: translateY(0); }
  30% { transform: translateY(-10px); }
}
#chatInputArea {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}
#catInput {
  flex: 1;
  padding: 12px 16px;
  border-radius: 25px;
  border: 2px solid #0ff;
  background: rgba(0, 0, 0, 0.5);
  color: #0ff;
  font-size: 14px;
  outline: none;
  transition: all 0.3s;
}
#catInput:focus {
  box-shadow: 0 0 15px #0ff;
  background: rgba(0, 0, 0, 0.7);
}
#sendBtn {
  padding: 12px 24px;
  background: linear-gradient(135deg, #0ff, #00d4ff);
  border: none;
  border-radius: 25px;
  color: #000;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s;
  font-size: 14px;
}
#sendBtn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px #0ff;
}
#quickQuestions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 15px;
}
.quick-btn {
  padding: 6px 12px;
  background: rgba(0, 255, 255, 0.1);
  border: 1px solid #0ff;
  border-radius: 15px;
  color: #0ff;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.3s;
}
.quick-btn:hover {
  background: rgba(0, 255, 255, 0.3);
  transform: translateY(-2px);
}
#chatControls {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
#catMood {
  font-size: 12px;
  color: #0ff;
  display: flex;
  align-items: center;
  gap: 8px;
}
#moodIcon {
  font-size: 20px;
  animation: bounce 2s ease-in-out infinite;
}
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}
#clearChat {
  padding: 6px 12px;
  background: rgba(255, 62, 255, 0.2);
  border: 1px solid #ff3eff;
  border-radius: 15px;
  color: #ff3eff;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.3s;
}
#clearChat:hover {
  background: rgba(255, 62, 255, 0.4);
}

  @keyframes floatButton {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

#gameMenuBtn, #fortuneBtn {
  animation: floatButton 3s ease-in-out infinite;
}


/* éŠæˆ²æŒ‰éˆ• */
#gameBtn {
  position: fixed;
  top: 80px;
  right: 20px;
  z-index: 1000;
  padding: 12px 20px;
  background: linear-gradient(135deg, #ff3eff, #ff00aa);
  border: 2px solid #ff3eff;
  border-radius: 25px;
  color: #fff;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 0 20px rgba(255, 62, 255, 0.5);
}
#gameBtn:hover {
  transform: scale(1.1);
  box-shadow: 0 0 30px rgba(255, 62, 255, 0.8);
}

/* è²“å’ªå‹•ç•«æ•ˆæœ */
#memeCat {
  animation: float 4s ease-in-out infinite alternate;
  cursor: pointer;
  transition: transform 0.3s ease;
  width: 120px;
  border-radius: 50%;
  box-shadow: 0 0 20px #0ff;
}
@keyframes float {
  from { transform: translateY(0px); }
  to { transform: translateY(-10px); }
}
#memeCat:hover {
  animation: shake 0.5s ease-in-out infinite, float 4s ease-in-out infinite alternate;
}
@keyframes shake {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-5px) rotate(-5deg); }
  75% { transform: translateY(-5px) rotate(5deg); }
}

/* èƒŒæ™¯éŸ³æ¨‚æ’­æ”¾å™¨æŒ‰éˆ• */
#bgm-control {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1000;
  background: rgba(0,255,255,0.2);
  border: 2px solid #0ff;
  color: #0ff;
  padding: 10px 15px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 24px;
  transition: all 0.3s;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
}
#bgm-control:hover {
  background: rgba(0,255,255,0.4);
  box-shadow: 0 0 20px #0ff;
  transform: scale(1.1);
}
#bgm-control.playing {
  animation: pulse 2s ease-in-out infinite;
}
@keyframes pulse {
  0%, 100% { box-shadow: 0 0 10px #0ff; }
  50% { box-shadow: 0 0 25px #0ff, 0 0 40px #0ff; }
}
</style>
</head>
<body>
<canvas id="particles"></canvas>

<!-- è‡ªè¨‚æ»‘é¼ æ¸¸æ¨™ -->
<div id="cursor"></div>
<div id="cursor-trail"></div>

<!-- èƒŒæ™¯éŸ³æ¨‚æ’­æ”¾å™¨æŒ‰éˆ• -->
<button id="bgm-control" title="æ’­æ”¾/æš«åœèƒŒæ™¯éŸ³æ¨‚">ğŸµ</button>
<audio id="bgm" loop>
  <source src="music/background.mp3" type="audio/mpeg">
</audio>



<!-- éŸ³æ•ˆå…ƒç´  -->
<audio id="hover-sound" src="music/hover.mp3"></audio>
<audio id="click-sound" src="music/click.mp3"></audio>
<audio id="meow-sound" src="music/meow.mp3"></audio>

<header>
  <h1>AI ART DIARY âš¡ï¸</h1>
  <p>Where algorithm meets intuition â€” Culaliya's creative & cosmic lab.</p>
  <div id="weather-quote">
    <span id="weather">è¼‰å…¥å¤©æ°£ä¸­â€¦</span>
    <div id="inspiration-bar" style="text-align:center;margin-top:12px;color:#0ff;font-size:1.1em;opacity:0;transition:opacity 1.2s ease-in-out;">
      <span id="inspirationText">âœ¨ å•é¡Œä¸æ˜¯ AI æ˜¯å¦æœ‰éˆé­‚ï¼Œè€Œæ˜¯æˆ‘å€‘æ˜¯å¦é‚„ä¿æœ‰æƒ³åƒ âœ¨</span>
    </div>
  </div>
</header>

  <!-- ğŸ”® å¯¦é©—å®¤æ©«å‘æŒ‰éˆ•åˆ— -->
<div class="lab-buttons">
  <a href="games.html" class="lab-btn pink">ğŸ® éŠæˆ²å¯¦é©—å®¤</a>
  <a href="fortune_lab.html" class="lab-btn purple">ğŸ”® å‘½ç†å¯¦é©—å®¤</a>
  <a href="music_lab.html" class="lab-btn blue">ğŸ§ éŸ³æ¨‚å¯¦é©—å®¤</a>
</div>

<!-- ===== è¶…ç´š AI å°è©±æ¡† ===== -->
<section id="catSection">
  <h2>ğŸˆâ€â¬› AI Cosmic Meme Cat ğŸŒ</h2>
  <div style="text-align:center; margin-bottom:20px;">
    <img id="memeCat" src="assets/blackcat.png" alt="Meme Cat">
  </div>
  
  <div id="chatContainer">
    <!-- å°è©±æ­·å² -->
    <div id="chatHistory">
      <div class="message ai">
        <img class="message-avatar" src="assets/blackcat.png" alt="Cat">
        <div class="message-bubble">
          å–µï½æˆ‘æ˜¯å®‡å®™å–µæ˜Ÿäººï¼æœ‰ä»€éº¼æƒ³èŠçš„å—ï¼Ÿ ğŸŒŒâœ¨
        </div>
      </div>
    </div>
    
    <!-- å¿«é€Ÿå•é¡ŒæŒ‰éˆ• -->
    <div id="quickQuestions">
      <button class="quick-btn" onclick="askQuick('å‘Šè¨´æˆ‘ä¸€å€‹å®‡å®™å†·çŸ¥è­˜')">ğŸŒŒ å®‡å®™å†·çŸ¥è­˜</button>
      <button class="quick-btn" onclick="askQuick('çµ¦æˆ‘ä¸€å€‹å‰µä½œéˆæ„Ÿ')">ğŸ’¡ å‰µä½œéˆæ„Ÿ</button>
      <button class="quick-btn" onclick="askQuick('èªªå€‹ç¬‘è©±')">ğŸ˜¹ èªªç¬‘è©±</button>
      <button class="quick-btn" onclick="askQuick('æ¨è–¦ä¸€é¦–æ­Œ')">ğŸµ æ¨è–¦æ­Œæ›²</button>
      <button class="quick-btn" onclick="askQuick('ä»Šå¤©é©åˆåšä»€éº¼')">ğŸ² ä»Šæ—¥å»ºè­°</button>
    </div>
    
    <!-- è¼¸å…¥å€ -->
    <div id="chatInputArea">
      <input id="catInput" type="text" placeholder="è¼¸å…¥è¨Šæ¯çµ¦è²“å’ª..." onkeypress="handleEnter(event)">
      <button id="sendBtn" onclick="sendMessage()">ç™¼é€ âœ¨</button>
    </div>
    
    <!-- æ‰“å­—æŒ‡ç¤ºå™¨ -->
    <div class="typing-indicator" id="typingIndicator">
      <span></span><span></span><span></span>
    </div>
    
    <!-- æ§åˆ¶æŒ‰éˆ• -->
    <div id="chatControls">
      <div id="catMood">
        <span id="moodIcon">ğŸ˜º</span>
        <span id="moodText">å¿ƒæƒ…æ„‰å¿«</span>
      </div>
      <button id="clearChat" onclick="clearChatHistory()">ğŸ—‘ï¸ æ¸…é™¤å°è©±</button>
    </div>
  </div>
</section>

<!-- Featured Video & Music -->
<section>
  <h2>ğŸ¥ Featured Video & Music</h2>
  <div class="media-flex">
    <div class="video-container">
      <iframe src="https://www.youtube.com/embed/videoseries?list=PLf1VNbciujbc-QSR2wNNCvYZCv1cZ88ef" title="YouTube playlist" allow="autoplay; clipboard-write; encrypted-media; fullscreen" allowfullscreen></iframe>
    </div>
   
  </div>
</section>

<!-- Gallery -->
<section>
  <h2>ğŸ–¼ï¸ Gallery</h2>
  <div class="slideshow-container">
    <img class="slide" src="assets/midjourney/mid1.jpg">
    <img class="slide" src="assets/midjourney/mid2.jpg">
    <img class="slide" src="assets/midjourney/mid3.jpg">
    <img class="slide" src="assets/midjourney/mid4.jpg">
    <img class="slide" src="assets/midjourney/mid5.jpg">
    <img class="slide" src="assets/midjourney/mid6.jpg">
    <img class="slide" src="assets/midjourney/mid7.jpg">
    <img class="slide" src="assets/midjourney/mid8.jpg">
    <img class="slide" src="assets/midjourney/mid9.jpg">
    <img class="slide" src="assets/midjourney/mid10.jpg">
    <img class="slide" src="assets/midjourney/mid11.jpg">
    <img class="slide" src="assets/midjourney/mid12.jpg">
     <img class="slide" src="assets/midjourney/mid13.jpg">
     <img class="slide" src="assets/midjourney/mid14.jpg">
     <img class="slide" src="assets/midjourney/mid15.jpg">
     <img class="slide" src="assets/midjourney/mid16.jpg">
     <img class="slide" src="assets/midjourney/mid17.jpg">
     <img class="slide" src="assets/midjourney/mid18.jpg">
     <img class="slide" src="assets/midjourney/mid19.jpg">
     <img class="slide" src="assets/midjourney/mid20.jpg">
     <img class="slide" src="assets/midjourney/mid21.jpg">
     <img class="slide" src="assets/midjourney/mid22.jpg">
     <img class="slide" src="assets/midjourney/mid23.jpg">
     <img class="slide" src="assets/midjourney/mid24.jpg">
     <img class="slide" src="assets/midjourney/mid25.jpg">
     <img class="slide" src="assets/midjourney/mid26.jpg">
     <img class="slide" src="assets/midjourney/mid27.jpg">
     <img class="slide" src="assets/midjourney/mid28.jpg">
     <img class="slide" src="assets/midjourney/mid29.jpg">
     <img class="slide" src="assets/midjourney/mid30.jpg">
    <button class="slide-btn prev" onclick="changeSlide(-1)">â®</button>
    <button class="slide-btn next" onclick="changeSlide(1)">â¯</button>
  </div>
  <div style="text-align:center; margin-top:15px;">
    <span class="dot" onclick="currentSlide(0)"></span>
    <span class="dot" onclick="currentSlide(1)"></span>
    <span class="dot" onclick="currentSlide(2)"></span>
    <span class="dot" onclick="currentSlide(3)"></span>
    <span class="dot" onclick="currentSlide(4)"></span>
    <span class="dot" onclick="currentSlide(5)"></span>
    <span class="dot" onclick="currentSlide(6)"></span>
    <span class="dot" onclick="currentSlide(7)"></span>
    <span class="dot" onclick="currentSlide(8)"></span>
    <span class="dot" onclick="currentSlide(9)"></span>
    <span class="dot" onclick="currentSlide(10)"></span>
    <span class="dot" onclick="currentSlide(11)"></span>
    <span class="dot" onclick="currentSlide(12)"></span>
    <span class="dot" onclick="currentSlide(13)"></span>
    <span class="dot" onclick="currentSlide(14)"></span>
    <span class="dot" onclick="currentSlide(15)"></span>
    <span class="dot" onclick="currentSlide(16)"></span>
    <span class="dot" onclick="currentSlide(17)"></span>
    <span class="dot" onclick="currentSlide(18)"></span>
    <span class="dot" onclick="currentSlide(19)"></span>
    <span class="dot" onclick="currentSlide(20)"></span>
    <span class="dot" onclick="currentSlide(21)"></span>
    <span class="dot" onclick="currentSlide(22)"></span>
    <span class="dot" onclick="currentSlide(23)"></span>
    <span class="dot" onclick="currentSlide(24)"></span>
    <span class="dot" onclick="currentSlide(25)"></span>
    <span class="dot" onclick="currentSlide(26)"></span>
    <span class="dot" onclick="currentSlide(27)"></span>
    <span class="dot" onclick="currentSlide(28)"></span>
    <span class="dot" onclick="currentSlide(29)"></span>
    <span class="dot" onclick="currentSlide(30)"></span>
    
  </div>
</section>

<!-- Apps -->
<section>
  <h2>ğŸ“± My Published Apps</h2>
  <div class="app-container" id="app-container">Loading apps...</div>
</section>

<!-- NASA APOD -->
<section>
  <h2>ğŸŒŒ NASA Astronomy Picture of the Day</h2>
  <div id="apod" style="text-align:center;">è¼‰å…¥æ˜Ÿåœ–ä¸­â€¦</div>
</section>

<!-- å…«å­—å‘½ç›¤ -->
<section>
  <h2>ğŸ”® å…«å­—å‘½ç›¤åˆ†æ (API æ¨¡å¼)</h2>
  <p>è¼¸å…¥ç”Ÿæ—¥æ™‚é–“ï¼Œç¶²ç«™æœƒå¾ API å–å¾—å‘½ç›¤è³‡æ–™ï¼š</p>
  <input type="date" id="birthDate">
  <input type="time" id="birthTime">
  <button class="button" onclick="getFortune()">é–‹å§‹åˆ†æ</button>
  <div id="result">ç­‰å¾…è¼¸å…¥...</div>
</section>



<!-- Comments -->
<section>
  <h2>ğŸ’¬ Comments</h2>
  <script src="https://utteranc.es/client.js"
    repo="Culaliya/ai-art-diary"
    issue-term="pathname"
    theme="github-dark"
    crossorigin="anonymous"
    async></script>
</section>

<footer style="text-align:center;color:#888;padding:40px;">
  <a href="https://github.com/Culaliya/ai-art-diary" style="color:#888;text-decoration:none;">View Source on GitHub</a>
</footer>

<script>
// ===== æ»‘é¼ è·Ÿéš¨ç‰¹æ•ˆ =====
const cursor = document.getElementById('cursor');
const cursorTrail = document.getElementById('cursor-trail');
let mouseX = 0, mouseY = 0;
let cursorX = 0, cursorY = 0;
let trailX = 0, trailY = 0;

// å½©è™¹é¡è‰²
const rainbowColors = ['#ff0080', '#ff8000', '#ffff00', '#00ff00', '#0080ff', '#8000ff'];
let colorIndex = 0;

document.addEventListener('mousemove', (e) => {
  mouseX = e.clientX;
  mouseY = e.clientY;
  
  // å‰µå»ºå½©è™¹è»Œè·¡
  if (Math.random() > 0.7) {
    const trail = document.createElement('div');
    trail.className = 'rainbow-trail';
    trail.style.left = e.clientX + 'px';
    trail.style.top = e.clientY + 'px';
    trail.style.background = rainbowColors[colorIndex % rainbowColors.length];
    document.body.appendChild(trail);
    colorIndex++;
    
    setTimeout(() => trail.remove(), 1000);
  }
});

function updateCursor() {
  // å¹³æ»‘è¿½è¹¤
  cursorX += (mouseX - cursorX) * 0.15;
  cursorY += (mouseY - cursorY) * 0.15;
  trailX += (mouseX - trailX) * 0.08;
  trailY += (mouseY - trailY) * 0.08;
  
  cursor.style.left = cursorX + 'px';
  cursor.style.top = cursorY + 'px';
  cursorTrail.style.left = trailX + 'px';
  cursorTrail.style.top = trailY + 'px';
  cursorTrail.style.background = rainbowColors[Math.floor(colorIndex / 2) % rainbowColors.length];
  
  requestAnimationFrame(updateCursor);
}
updateCursor();

// ===== Inspiration quotes fade =====
const quotes = [
  "âœ¨ å•é¡Œä¸æ˜¯ AI æ˜¯å¦æœ‰éˆé­‚ï¼Œè€Œæ˜¯æˆ‘å€‘æ˜¯å¦é‚„ä¿æœ‰æƒ³åƒ âœ¨",
  "ğŸ¶ Let algorithms dream with us.",
  "ğŸ­ è—è¡“ï¼Œä¸éœ€è¦ç¡è¦ºã€‚",
  "ğŸ’¥ Creativity is coded chaos.",
  "ğŸŒ  Every pixel remembers its light.",
  "ğŸ§ª æƒ³åƒåŠ›æ˜¯äººé¡æœ€å¤è€çš„é‹ç®—ã€‚",
  "ğŸ§š You are the glitch the universe adores."
];
let qIndex = 0;
const inspirationBar = document.getElementById('inspiration-bar');
const inspirationText = document.getElementById('inspirationText');
function fadeQuote() {
  inspirationBar.style.opacity = 0;
  setTimeout(() => {
    qIndex = (qIndex + 1) % quotes.length;
    inspirationText.innerText = quotes[qIndex];
    inspirationBar.style.opacity = 1;
  }, 1200);
}
setInterval(fadeQuote, 8000);
window.addEventListener('load', () => { inspirationBar.style.opacity = 1; });

// ===== èƒŒæ™¯éŸ³æ¨‚æ§åˆ¶ =====
const bgm = document.getElementById('bgm');
const bgmControl = document.getElementById('bgm-control');
let isMusicPlaying = false;
bgm.volume = 0.3;

bgmControl.addEventListener('click', () => {
  if (isMusicPlaying) {
    bgm.pause();
    bgmControl.innerText = 'ğŸµ';
    bgmControl.classList.remove('playing');
  } else {
    bgm.play();
    bgmControl.innerText = 'ğŸ”Š';
    bgmControl.classList.add('playing');
  }
  isMusicPlaying = !isMusicPlaying;
});

// ===== è¶…ç´šå°è©±æ¡†ç³»çµ± =====
const chatHistory = document.getElementById('chatHistory');
const catInput = document.getElementById('catInput');
const typingIndicator = document.getElementById('typingIndicator');
const memeCat = document.getElementById('memeCat');
const moodIcon = document.getElementById('moodIcon');
const moodText = document.getElementById('moodText');
let messageCount = 0;

// è²“å’ªå¿ƒæƒ…ç‹€æ…‹
const moods = {
  happy: { icon: 'ğŸ˜º', text: 'å¿ƒæƒ…æ„‰å¿«' },
  thinking: { icon: 'ğŸ¤”', text: 'æ€è€ƒä¸­...' },
  excited: { icon: 'ğŸ˜»', text: 'è¶…èˆˆå¥®ï¼' },
  sleepy: { icon: 'ğŸ˜´', text: 'æœ‰é»ç' },
  playful: { icon: 'ğŸ˜¸', text: 'æƒ³ç©è€' }
};

function updateMood(mood) {
  moodIcon.innerText = moods[mood].icon;
  moodText.innerText = moods[mood].text;
}

function addMessage(text, isUser = false) {
  const message = document.createElement('div');
  message.className = `message ${isUser ? 'user' : 'ai'}`;
  
  const avatar = document.createElement('img');
  avatar.className = 'message-avatar';
  avatar.src = isUser ? 'https://via.placeholder.com/35/0ff/000?text=You' : 'assets/blackcat.png';
  
  const bubble = document.createElement('div');
  bubble.className = 'message-bubble';
  bubble.innerText = text;
  
  if (isUser) {
    message.appendChild(bubble);
    message.appendChild(avatar);
  } else {
    message.appendChild(avatar);
    message.appendChild(bubble);
  }
  
  chatHistory.appendChild(message);
  chatHistory.scrollTop = chatHistory.scrollHeight;
  messageCount++;
  
  // æ ¹æ“šå°è©±æ•¸æ›´æ–°å¿ƒæƒ…
  if (messageCount > 10) updateMood('excited');
  else if (messageCount > 5) updateMood('playful');
}

function typewriterEffect(text, element) {
  let index = 0;
  element.innerText = '';
  
  const interval = setInterval(() => {
    if (index < text.length) {
      element.innerText += text.charAt(index);
      chatHistory.scrollTop = chatHistory.scrollHeight;
      index++;
    } else {
      clearInterval(interval);
    }
  }, 30);
}

async function sendMessage() {
  const text = catInput.value.trim();
  if (!text) return;
  
  // æ·»åŠ ä½¿ç”¨è€…è¨Šæ¯
  addMessage(text, true);
  catInput.value = '';
  
  // é¡¯ç¤ºæ‰“å­—æŒ‡ç¤ºå™¨
  typingIndicator.style.display = 'block';
  updateMood('thinking');
  memeCat.style.transform = 'scale(1.1) rotate(5deg)';
  
  try {
    const res = await fetch('/api/gpt', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ prompt: text }),
    });
    
    const data = await res.json();
    const reply = data.reply || data.response || data.message || 'å–µå–µå–µï½';
    
    // éš±è—æ‰“å­—æŒ‡ç¤ºå™¨
    typingIndicator.style.display = 'none';
    
    // å‰µå»º AI è¨Šæ¯
    const message = document.createElement('div');
    message.className = 'message ai';
    
    const avatar = document.createElement('img');
    avatar.className = 'message-avatar';
    avatar.src = 'assets/blackcat.png';
    
    const bubble = document.createElement('div');
    bubble.className = 'message-bubble';
    
    message.appendChild(avatar);
    message.appendChild(bubble);
    chatHistory.appendChild(message);
    
    // æ‰“å­—æ©Ÿæ•ˆæœ
    typewriterEffect(reply, bubble);
    updateMood('happy');
    
  } catch (err) {
    typingIndicator.style.display = 'none';
    addMessage('å–µï¼Ÿç³»çµ±å‡ºéŒ¯äº†... ğŸ¾', false);
    console.error(err);
  } finally {
    memeCat.style.transform = 'scale(1) rotate(0deg)';
  }
}

function askQuick(question) {
  catInput.value = question;
  sendMessage();
}

function handleEnter(event) {
  if (event.key === 'Enter') {
    sendMessage();
  }
}

function clearChatHistory() {
  if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰å°è©±è¨˜éŒ„å—ï¼Ÿ')) {
    chatHistory.innerHTML = `
      <div class="message ai">
        <img class="message-avatar" src="assets/blackcat.png" alt="Cat">
        <div class="message-bubble">
          å–µï½æˆ‘æ˜¯å®‡å®™å–µæ˜Ÿäººï¼æœ‰ä»€éº¼æƒ³èŠçš„å—ï¼Ÿ ğŸŒŒâœ¨
        </div>
      </div>
    `;
    messageCount = 0;
    updateMood('happy');
  }
}

// ===== è²“å’ªé»æ“Šæ•ˆæœ =====
const meowSound = document.getElementById('meow-sound');
memeCat.addEventListener('click', () => {
  meowSound.pause();
  meowSound.currentTime = 0;
  meowSound.volume = 0.2;
  meowSound.play();
  memeCat.style.transform = 'scale(1.2) rotate(10deg)';
  setTimeout(() => {
    memeCat.style.transform = 'scale(1) rotate(0deg)';
  }, 350);
});

// ===== ç²’å­èƒŒæ™¯ =====
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
let particles = [];

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  particles = [];
  for (let i = 0; i < 80; i++) {
    particles.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      r: Math.random() * 2 + 0.5,
      dx: (Math.random() - 0.5) * 0.5,
      dy: (Math.random() - 0.5) * 0.5,
      hue: Math.random() * 360
    });
  }
}

function drawParticles() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  particles.forEach(p => {
    p.x += p.dx;
    p.y += p.dy;
    if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
    if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
    ctx.fillStyle = `hsla(${p.hue},100%,65%,0.7)`;
    ctx.fill();
  });
  requestAnimationFrame(drawParticles);
}

window.addEventListener('resize', resizeCanvas);
resizeCanvas();
drawParticles();

// ===== è¼ªæ’­ =====
let slideIndex = 0;
let slideTimer;

function showSlides() {
  const slides = document.querySelectorAll('.slide');
  const dots = document.querySelectorAll('.dot');
  
  slides.forEach((s, i) => s.style.display = i === slideIndex ? 'block' : 'none');
  dots.forEach((d, i) => d.classList.toggle('active', i === slideIndex));
  
  slideIndex = (slideIndex + 1) % slides.length;
  clearTimeout(slideTimer);
  slideTimer = setTimeout(showSlides, 3000);
}

function changeSlide(n) {
  const slides = document.querySelectorAll('.slide');
  slideIndex = (slideIndex + n + slides.length - 1) % slides.length;
  showSlides();
}

function currentSlide(n) {
  slideIndex = n;
  showSlides();
}

showSlides();

// ===== Load apps =====
async function loadApps() {
  const c = document.getElementById('app-container');
  try {
    const res = await fetch('data/apps.json');
    const apps = await res.json();
    c.innerHTML = '';

    const today = new Date();

    apps.forEach(app => {
      const card = document.createElement('div');
      card.className = 'app-card';

      // åˆ¤æ–·æ˜¯å¦ç‚ºæ–°ç‰ˆæœ¬ï¼ˆä¸ƒå¤©å…§æ›´æ–°ï¼‰
      let isNew = false;
      if (app.updated) {
        const updatedDate = new Date(app.updated.replace(/\//g, '-'));
        const diffDays = (today - updatedDate) / (1000 * 60 * 60 * 24);
        if (diffDays <= 7) isNew = true;
      }

      // å¡ç‰‡å…§å®¹
      card.innerHTML = `
        <img class="app-image" src="${app.icon}">
        <div class="app-info">
          <h3 style="display:flex;align-items:center;gap:8px;">
            ${app.name}
            ${isNew ? `<span style="font-size:0.75em;background:linear-gradient(135deg,#00ffff,#ff3eff);
            padding:2px 6px;border-radius:6px;color:#000;font-weight:bold;box-shadow:0 0 10px #0ff;">ğŸ†• NEW</span>` : ''}
          </h3>
          <p>${app.desc}</p>
          ${app.updated && app.version ? `
            <p style="color:#aaa;font-size:0.85em;margin-top:6px;text-align:right;">
              ğŸ—“ï¸ ${app.updated}ã€€|ã€€ç‰ˆæœ¬ï¼š${app.version}
            </p>` : ''}
          <a class="button" href="${app.link}" target="_blank">App Store</a>
        </div>`;

      c.appendChild(card);
    });

    addHoverSounds();
  } catch {
    c.textContent = 'âš ï¸ ç„¡æ³•è¼‰å…¥ app è³‡æ–™';
  }
}
loadApps();


// ===== Fortune API =====
async function getFortune() {
  const date = document.getElementById('birthDate').value;
  if (!date) {
    alert('è«‹è¼¸å…¥ç”Ÿæ—¥');
    return;
  }
  const r = document.getElementById('result');
  try {
    const res = await fetch('https://raw.githubusercontent.com/Culaliya/ai-art-diary/main/data/fortune.json');
    const f = await res.json();
    r.innerHTML = `<h3>å‘½ç†çµæœå ±å‘Šï¼ˆä¾†è‡ª APIï¼‰</h3>
      <p>å¤©å¹²åœ°æ”¯ï¼š<strong>${f.stem}${f.branch}</strong></p>
      <p>ä¸»äº”è¡Œï¼š<strong>${f.element}</strong></p>
      <p>${f.msg}</p>`;
  } catch {
    r.textContent = 'âš ï¸ ç„¡æ³•è®€å– API è³‡æ–™';
  }
}

// ===== Hover sounds =====
function addHoverSounds() {
  const hoverSound = document.getElementById('hover-sound');
  hoverSound.volume = 0.2;
  document.querySelectorAll('.app-card,.button').forEach(el => {
    el.addEventListener('mouseenter', () => {
      hoverSound.currentTime = 0;
      hoverSound.play();
    });
  });
}

// ===== Click sound =====
document.addEventListener('click', e => {
  const clickSound = document.getElementById('click-sound');
  clickSound.volume = 0.2;
  clickSound.currentTime = 0;
  clickSound.play();
  const ripple = document.createElement('div');
  ripple.className = 'ripple';
  ripple.style.left = `${e.clientX}px`;
  ripple.style.top = `${e.clientY}px`;
  document.body.appendChild(ripple);
  ripple.addEventListener('animationend', () => ripple.remove());
});

// ===== Weather API =====
async function loadWeather() {
  const url = 'https://api.open-meteo.com/v1/forecast?latitude=24.8138&longitude=120.9675&current_weather=true';
  try {
    const res = await fetch(url);
    const data = await res.json();
    const w = data.current_weather;
    const codes = {
      0: 'æ™´æœ—', 1: 'ä¸»è¦æ™´æœ—', 2: 'éƒ¨åˆ†å¤šé›²', 3: 'å¤šé›²', 45: 'éœ§', 48: 'éœ§å‡‡',
      51: 'ç´°é›¨', 53: 'ä¸­é›¨', 55: 'å¤§é›¨', 61: 'å°é›¨', 63: 'ä¸­é›¨', 65: 'å¤§é›¨',
      71: 'å°é›ª', 73: 'ä¸­é›ª', 75: 'å¤§é›ª', 80: 'é™£é›¨', 81: 'ä¸­é™£é›¨', 82: 'æš´é›¨'
    };
    const weatherText = codes[w.weathercode] || 'æœªçŸ¥';
    document.getElementById('weather').innerText = `æ–°ç«¹ ${w.temperature}Â°Cï¼Œ${weatherText}`;
  } catch {
    document.getElementById('weather').innerText = 'å¤©æ°£è¼‰å…¥å¤±æ•—';
  }
}
loadWeather();

// ===== NASA APOD =====
async function loadApod() {
  const apodDiv = document.getElementById('apod');
  try {
    const res = await fetch('https://api.nasa.gov/planetary/apod?api_key=QCUm1wVbVLFqsiNJdaTKolWUuXTo4Qdxjc1zF4f3');
    const data = await res.json();
    
    if (data.media_type === 'image') {
      apodDiv.innerHTML = `
        <img src="${data.url}" alt="${data.title}" 
             style="max-width:100%;border-radius:12px;box-shadow:0 0 20px #0ff5;">
        <p style="margin-top:15px;color:#aaf;font-size:1.2em;font-weight:bold;">${data.title}</p>
        <p style="color:#ccc;font-size:0.95em;margin-top:10px;line-height:1.6;">${data.explanation}</p>
        <p style="color:#888;font-size:0.85em;margin-top:10px;">ğŸ“… ${data.date}</p>
      `;
    } else if (data.media_type === 'video') {
      apodDiv.innerHTML = `
        <iframe src="${data.url}" frameborder="0" allowfullscreen 
                style="width:100%;height:400px;border-radius:12px;box-shadow:0 0 20px #0ff5;"></iframe>
        <p style="margin-top:15px;color:#aaf;font-size:1.2em;font-weight:bold;">${data.title}</p>
        <p style="color:#ccc;font-size:0.95em;margin-top:10px;line-height:1.6;">${data.explanation}</p>
        <p style="color:#888;font-size:0.85em;margin-top:10px;">ğŸ“… ${data.date}</p>
      `;
    }
  } catch (err) {
    console.error('NASA APOD error:', err);
    apodDiv.innerText = 'NASA æ˜Ÿåœ–è¼‰å…¥å¤±æ•—';
  }
}
loadApod();

<script>
fetch('https://api.ipify.org?format=json')
  .then(res => res.json())
  .then(data => {
    const ip = data.ip;

</script>


<!-- âœ… é€™æ®µæ˜¯æ–°çš„ç¨ç«‹ scriptï¼Œä¸è¦æ”¾åœ¨ä¸Šé¢çš„ä¸» <script> è£¡é¢ -->
<script>
fetch('https://api.ipify.org?format=json')
  .then(res => res.json())
  .then(data => {
    const ip = data.ip;
    fetch('https://ipapi.co/json')
      .then(res => res.json())
      .then(info => {
        fetch('https://script.google.com/macros/s/AKfycbycTbW9GrLhJA60G0dvOCHH-HRqzhpPMJgQrVyDbOXlFFRSCkvD-FwEu3XUlHTTd7ng/exec', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            ip: ip,
            country: info.country_name,
            userAgent: navigator.userAgent,
            page: location.pathname,
            referrer: document.referrer
          })
        });
      });
  });
</script>

</body>
</html>
